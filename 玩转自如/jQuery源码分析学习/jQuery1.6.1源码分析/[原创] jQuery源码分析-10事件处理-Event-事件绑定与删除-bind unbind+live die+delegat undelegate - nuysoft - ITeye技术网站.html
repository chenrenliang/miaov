<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- saved from url=(0037)http://nuysoft.iteye.com/blog/1199674 -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="zh-CN" dir="ltr"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
    <title>[原创] jQuery源码分析-10事件处理-Event-事件绑定与删除-bind/unbind+live/die+delegat/undelegate - nuysoft - ITeye技术网站</title>
    <meta name="description" content="   作者：nuysoft/高云　QQ：47214707　EMail：nuysoft@gmail.com  声明：本文为原创文章，如需转载，请注明来源并保留原文链接。   后文预告：封装事件对象 便捷接口解析 ready专题  10.4	.bind() .one()  10.4.1	如何使用  .bind( eventType, [eventData], handler(eventObject) ) ...">
    <meta name="keywords" content="javascript, jquery, 源码分析, 事件绑定与删除, bind/unbind+live/die+delegate/undelegate [原创] jQuery源码分析-10事件处理-Event-事件绑定与删除-bind/unbind+live/die+delegat/undelegate">
    <link rel="shortcut icon" href="http://nuysoft.iteye.com/images/favicon.ico" type="image/x-icon">
    <link rel="search" type="application/opensearchdescription+xml" href="http://nuysoft.iteye.com/open_search.xml" title="ITeye">
    <link href="http://nuysoft.iteye.com/rss" rel="alternate" title="nuysoft" type="application/rss+xml">
    <link href="./[原创] jQuery源码分析-10事件处理-Event-事件绑定与删除-bind unbind+live die+delegat undelegate - nuysoft - ITeye技术网站_files/blog.css" media="screen" rel="stylesheet" type="text/css">
<link href="./[原创] jQuery源码分析-10事件处理-Event-事件绑定与删除-bind unbind+live die+delegat undelegate - nuysoft - ITeye技术网站_files/black.css" media="screen" rel="stylesheet" type="text/css">
    <script type="text/javascript" async="" src="./[原创] jQuery源码分析-10事件处理-Event-事件绑定与删除-bind unbind+live die+delegat undelegate - nuysoft - ITeye技术网站_files/ga.js"></script><script type="text/javascript" async="" src="./[原创] jQuery源码分析-10事件处理-Event-事件绑定与删除-bind unbind+live die+delegat undelegate - nuysoft - ITeye技术网站_files/ga.js"></script><script src="./[原创] jQuery源码分析-10事件处理-Event-事件绑定与删除-bind unbind+live die+delegat undelegate - nuysoft - ITeye技术网站_files/application.js" type="text/javascript"></script>
    <script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-535605-1']);
  _gaq.push(['_setDomainName', 'iteye.com']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>


      <link href="./[原创] jQuery源码分析-10事件处理-Event-事件绑定与删除-bind unbind+live die+delegat undelegate - nuysoft - ITeye技术网站_files/SyntaxHighlighter.css" media="screen" rel="stylesheet" type="text/css">
  <script src="./[原创] jQuery源码分析-10事件处理-Event-事件绑定与删除-bind unbind+live die+delegat undelegate - nuysoft - ITeye技术网站_files/shCoreCommon.js" type="text/javascript"></script>
<script src="./[原创] jQuery源码分析-10事件处理-Event-事件绑定与删除-bind unbind+live die+delegat undelegate - nuysoft - ITeye技术网站_files/hotkey.js" type="text/javascript"></script>
  <script src="./[原创] jQuery源码分析-10事件处理-Event-事件绑定与删除-bind unbind+live die+delegat undelegate - nuysoft - ITeye技术网站_files/code_favorites.js" type="text/javascript"></script>
<script src="./[原创] jQuery源码分析-10事件处理-Event-事件绑定与删除-bind unbind+live die+delegat undelegate - nuysoft - ITeye技术网站_files/weiboshare.js" type="text/javascript"></script>
  <link href="./[原创] jQuery源码分析-10事件处理-Event-事件绑定与删除-bind unbind+live die+delegat undelegate - nuysoft - ITeye技术网站_files/ui.css" media="screen" rel="stylesheet" type="text/css">
  <script src="./[原创] jQuery源码分析-10事件处理-Event-事件绑定与删除-bind unbind+live die+delegat undelegate - nuysoft - ITeye技术网站_files/compress.js" type="text/javascript"></script>
  </head>
  <body>
    <div id="header">
      <div id="blog_site_nav">
  <a href="http://www.iteye.com/" class="homepage">首页</a>
  <a href="http://www.iteye.com/news">资讯</a>
  <a href="http://www.iteye.com/magazines">精华</a>
  <a href="http://www.iteye.com/forums">论坛</a>
  <a href="http://www.iteye.com/ask">问答</a>
  <a href="http://www.iteye.com/blogs">博客</a>
  <a href="http://www.iteye.com/blogs/subjects">专栏</a>
  <a href="http://www.iteye.com/groups">群组</a>
  <a href="http://nuysoft.iteye.com/blog/1199674#" onclick="return false;" id="msna"><u>更多</u> <small>▼</small></a>
  <div class="quick_menu" style="display:none;">
    <a target="_blank" href="http://job.iteye.com/iteye">招聘</a>
    <a href="http://www.iteye.com/search">搜索</a>
  </div>
</div>

      <div id="user_nav">
  
        <a href="http://hhy5277.iteye.com/" title="查看我的博客首页" class="welcome">欢迎hhy5277</a>
    <a id="notifications_count" href="http://my.iteye.com/notifications" class="" title="没有未读消息">0</a>
    
      <a href="http://my.iteye.com/messages" title="你有新的站内短信"><img alt="Newpm" src="./[原创] jQuery源码分析-10事件处理-Event-事件绑定与删除-bind unbind+live die+delegat undelegate - nuysoft - ITeye技术网站_files/newpm.gif">收件箱(2)</a>
    
    <a href="http://my.iteye.com/" title="我的应用首页">我的应用</a>
    <div class="quick_menu" style="display:none;">
      <a href="http://my.iteye.com/feed" title="我关注的好友动态消息">我的关注</a>
      <a href="http://my.iteye.com/mygroup" title="我加入的群组最新话题">我的群组</a>
      <a href="http://my.iteye.com/myresume" title="我的个人简历">我的简历</a>
      <a href="http://my.iteye.com/admin/album" title="我的个人简历">我的相册</a>
      <a href="http://my.iteye.com/admin/link" title="我收藏的网络资源链接">我的收藏</a>
      <a href="http://my.iteye.com/admin/code" title="我收藏的代码">我的代码</a>
      <a href="http://my.iteye.com/admin/weibo" title="用微博发表简短的话题">我的微博</a>
    </div>
    <a href="http://hhy5277.iteye.com/admin" title="管理我的博客">我的博客</a>
    <a href="http://my.iteye.com/profile" title="修改我的个人设置">设置</a>
    <a href="http://nuysoft.iteye.com/logout" class="nobg" onclick="var f = document.createElement(&#39;form&#39;); f.style.display = &#39;none&#39;; this.parentNode.appendChild(f); f.method = &#39;POST&#39;; f.action = this.href;var m = document.createElement(&#39;input&#39;); m.setAttribute(&#39;type&#39;, &#39;hidden&#39;); m.setAttribute(&#39;name&#39;, &#39;_method&#39;); m.setAttribute(&#39;value&#39;, &#39;put&#39;); f.appendChild(m);var s = document.createElement(&#39;input&#39;); s.setAttribute(&#39;type&#39;, &#39;hidden&#39;); s.setAttribute(&#39;name&#39;, &#39;authenticity_token&#39;); s.setAttribute(&#39;value&#39;, &#39;foncspGUjo88KbEH23TBNwmOVJHI8suaVg9RqM0afpk=&#39;); f.appendChild(s);f.submit();return false;">退出</a>
  </div>

    </div>

    <div id="page">
      <div id="branding" class="clearfix">
        <div id="blog_name">
          <h1><a href="http://nuysoft.iteye.com/">nuysoft</a></h1>
        </div>
        <div id="fd"></div>
        <div id="blog_navbar">
          <ul>
            <li class="blog_navbar_for"><a href="http://nuysoft.iteye.com/"><strong>博客</strong></a></li>
            <li><a href="http://nuysoft.iteye.com/weibo">微博</a></li>
            <li><a href="http://nuysoft.iteye.com/album">相册</a></li>
            <li><a href="http://nuysoft.iteye.com/link">收藏</a></li>
            <li><a href="http://nuysoft.iteye.com/blog/guest_book">留言</a></li>
            <li><a href="http://nuysoft.iteye.com/blog/profile">关于我</a></li>
          </ul>
    
          <div class="search">
            <form action="http://nuysoft.iteye.com/blog/search" method="get">
              <input class="search_text" id="query" name="query" style="margin-left: 10px;width: 110px;" type="text" value="">
              <input class="submit_search" type="submit" value="">
            </form>
          </div> 
          <div id="fd"></div>         
        </div>
      </div>
      
      <div id="content" class="clearfix">
        <div id="main">
          



          


<div class="h-entry" style="display:none">
  <a href="http://nuysoft.iteye.com/" class="p-author" target="_blank">nuysoft</a>
</div>


<div class="blog_main">
  <div class="blog_title">
    <h3>
      <a href="./[原创] jQuery源码分析-10事件处理-Event-事件绑定与删除-bind unbind+live die+delegat undelegate - nuysoft - ITeye技术网站_files/[原创] jQuery源码分析-10事件处理-Event-事件绑定与删除-bind unbind+live die+delegat undelegate - nuysoft - ITeye技术网站.html">[原创] jQuery源码分析-10事件处理-Event-事件绑定与删除-bind/unbind+live/die+delegat/undelegate</a>
      <em class="actions">      </em>
    </h3>
    <ul class="blog_categories"><strong>博客分类：</strong> <li><a href="http://nuysoft.iteye.com/category/140986">jQuery</a></li> </ul>
        <div class="news_tag"><a href="http://www.iteye.com/blogs/tag/javascript">javascript</a><a href="http://www.iteye.com/blogs/tag/jquery">jquery</a><a href="http://www.iteye.com/blogs/tag/%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90">源码分析</a><a href="http://www.iteye.com/blogs/tag/%E4%BA%8B%E4%BB%B6%E7%BB%91%E5%AE%9A%E4%B8%8E%E5%88%A0%E9%99%A4">事件绑定与删除</a><a href="http://www.iteye.com/blogs/tag/bind%2Funbind+live%2Fdie+delegate%2Fundelegate">bind/unbind+live/die+delegate/undelegate</a>&nbsp;</div>
  </div>

  <div id="blog_content" class="blog_content">
    <p>&nbsp;</p>
<div class="dp-highlighter" id=""><div class="bar"><div class="tools">Js代码 <embed wmode="transparent" src="/javascripts/syntaxhighlighter/clipboard_new.swf" width="14" height="15" flashvars="clipboard=%E4%BD%9C%E8%80%85%EF%BC%9Anuysoft%2F%E9%AB%98%E4%BA%91%E3%80%80QQ%EF%BC%9A47214707%E3%80%80EMail%EF%BC%9Anuysoft%40gmail.com%0A%E5%A3%B0%E6%98%8E%EF%BC%9A%E6%9C%AC%E6%96%87%E4%B8%BA%E5%8E%9F%E5%88%9B%E6%96%87%E7%AB%A0%EF%BC%8C%E5%A6%82%E9%9C%80%E8%BD%AC%E8%BD%BD%EF%BC%8C%E8%AF%B7%E6%B3%A8%E6%98%8E%E6%9D%A5%E6%BA%90%E5%B9%B6%E4%BF%9D%E7%95%99%E5%8E%9F%E6%96%87%E9%93%BE%E6%8E%A5%E3%80%82%20%0A%E5%90%8E%E6%96%87%E9%A2%84%E5%91%8A%EF%BC%9A%E5%B0%81%E8%A3%85%E4%BA%8B%E4%BB%B6%E5%AF%B9%E8%B1%A1%20%E4%BE%BF%E6%8D%B7%E6%8E%A5%E5%8F%A3%E8%A7%A3%E6%9E%90%20ready%E4%B8%93%E9%A2%98" quality="high" allowscriptaccess="always" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer">&nbsp;<a href="javascript:void()" title="收藏这段代码" onclick="code_favorites_do_favorite(this);return false;"><img class="star" src="./[原创] jQuery源码分析-10事件处理-Event-事件绑定与删除-bind unbind+live die+delegat undelegate - nuysoft - ITeye技术网站_files/icon_star.png" alt="收藏代码"><img class="spinner" src="./[原创] jQuery源码分析-10事件处理-Event-事件绑定与删除-bind unbind+live die+delegat undelegate - nuysoft - ITeye技术网站_files/spinner.gif" style="display:none"></a></div></div><ol start="1" class="dp-c"><li><span><span>作者：nuysoft/高云　QQ：47214707　EMail：nuysoft@gmail.com&nbsp;&nbsp;</span></span></li><li><span>声明：本文为原创文章，如需转载，请注明来源并保留原文链接。&nbsp;&nbsp;&nbsp;</span></li><li><span>后文预告：封装事件对象&nbsp;便捷接口解析&nbsp;ready专题&nbsp;&nbsp;</span></li></ol></div><pre class="js" name="code" codeable_id="1199674" codeable_type="Blog" source_url="http://nuysoft.iteye.com/blog/1199674" pre_index="0" title="[原创] jQuery源码分析-10事件处理-Event-事件绑定与删除-bind/unbind+live/die+delegat/undelegate" style="display: none;">作者：nuysoft/高云　QQ：47214707　EMail：nuysoft@gmail.com
声明：本文为原创文章，如需转载，请注明来源并保留原文链接。 
后文预告：封装事件对象 便捷接口解析 ready专题</pre>
<div class="dp-highlighter" id=""><div class="bar"><div class="tools">Js代码 <embed wmode="transparent" src="/javascripts/syntaxhighlighter/clipboard_new.swf" width="14" height="15" flashvars="clipboard=10.4%09.bind()%20.one()%0A10.4.1%09%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8%0A.bind(%20eventType%2C%20%5BeventData%5D%2C%20handler(eventObject)%20)%09%E5%9C%A8%E5%8C%B9%E9%85%8D%E7%9A%84%E5%85%83%E7%B4%A0%E4%B8%8A%E7%BB%91%E5%AE%9A%E6%8C%87%E5%AE%9A%E7%B1%BB%E5%9E%8B%E7%9A%84%E4%BA%8B%E4%BB%B6%E5%A4%84%E7%90%86%E5%87%BD%E6%95%B0%0A.bind(%20eventType%2C%20%5BeventData%5D%2C%20preventBubble%20)%09%E7%AC%AC%E4%B8%89%E4%B8%AA%E5%8F%82%E6%95%B0%E4%B8%BAfalse%EF%BC%8C%E5%88%99%E9%98%BB%E6%AD%A2%E6%B5%8F%E8%A7%88%E5%99%A8%E9%BB%98%E8%AE%A4%E8%A1%8C%E4%B8%BA%E5%B9%B6%E5%81%9C%E6%AD%A2%E4%BA%8B%E4%BB%B6%E5%86%92%E6%B3%A1%EF%BC%8C%E9%BB%98%E8%AE%A4true%0A.bind(%20events%20)%09%E7%BB%91%E5%AE%9A%E5%A4%9A%E4%B8%AA%E4%BA%8B%E4%BB%B6%EF%BC%8Cevents%E7%9A%84%E9%94%AE%E4%B8%BA%E4%BA%8B%E4%BB%B6%E7%B1%BB%E5%9E%8B%EF%BC%8C%E5%80%BC%E4%B8%BA%E5%AF%B9%E5%BA%94%E7%9A%84%E4%BA%8B%E4%BB%B6%E5%A4%84%E7%90%86%E5%87%BD%E6%95%B0%0A.one(%20eventType%2C%20%5BeventData%5D%2C%20handler(eventObject)%20)%09%E5%9C%A8%E5%8C%B9%E9%85%8D%E7%9A%84%E5%85%83%E7%B4%A0%E4%B8%8A%E7%BB%91%E5%AE%9A%E6%8C%87%E5%AE%9A%E7%B1%BB%E5%9E%8B%E7%9A%84%E4%BA%8B%E4%BB%B6%E5%A4%84%E7%90%86%E5%87%BD%E6%95%B0%EF%BC%8C%E8%BF%99%E4%B8%AA%E5%87%BD%E6%95%B0%E6%9C%80%E5%A4%9A%E6%89%A7%E8%A1%8C%E4%B8%80%E6%AC%A1%0A%E5%85%B6%E5%AE%9E%E6%98%AF%E6%94%B9%E5%86%99%E4%BA%86%E4%BA%8B%E4%BB%B6%E5%A4%84%E7%90%86%E5%87%BD%E6%95%B0%EF%BC%8C%E5%87%BD%E6%95%B0%E6%89%A7%E8%A1%8C%E6%97%B6%E5%85%88%E8%A7%A3%E7%BB%91%E5%AE%9A%EF%BC%8C%E5%86%8D%E6%89%A7%E8%A1%8C%0A10.4.2%09%E8%B0%83%E7%94%A8%E8%BF%87%E7%A8%8B%20%0AjQuery.fn.bind%20%E2%86%92%20jQuery.event.add%0AjQuery.fn.one%20%E2%86%92%20jQuery.event.add%0A10.4.3%09%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90%0A%2F**%0A%20*%20bind%3A%0A%20*%20.bind(%20eventType%2C%20%5BeventData%5D%2C%20handler(eventObject)%20)%20%E5%9C%A8%E5%8C%B9%E9%85%8D%E7%9A%84%E5%85%83%E7%B4%A0%E4%B8%8A%E7%BB%91%E5%AE%9A%E6%8C%87%E5%AE%9A%E7%B1%BB%E5%9E%8B%E7%9A%84%E4%BA%8B%E4%BB%B6%E5%A4%84%E7%90%86%E5%87%BD%E6%95%B0%0A%20*%20.bind(%20eventType%2C%20%5BeventData%5D%2C%20preventBubble%20)%20%E7%AC%AC%E4%B8%89%E4%B8%AA%E5%8F%82%E6%95%B0%E4%B8%BAfalse%EF%BC%8C%E5%88%99%E9%98%BB%E6%AD%A2%E6%B5%8F%E8%A7%88%E5%99%A8%E9%BB%98%E8%AE%A4%E8%A1%8C%E4%B8%BA%E5%B9%B6%E5%81%9C%E6%AD%A2%E4%BA%8B%E4%BB%B6%E5%86%92%E6%B3%A1%EF%BC%8C%E9%BB%98%E8%AE%A4true%0A%20*%20.bind(%20events%20)%20%E7%BB%91%E5%AE%9A%E5%A4%9A%E4%B8%AA%E4%BA%8B%E4%BB%B6%EF%BC%8Cevents%E7%9A%84%E9%94%AE%E4%B8%BA%E4%BA%8B%E4%BB%B6%E7%B1%BB%E5%9E%8B%EF%BC%8C%E5%80%BC%E4%B8%BA%E5%AF%B9%E5%BA%94%E7%9A%84%E4%BA%8B%E4%BB%B6%E5%A4%84%E7%90%86%E5%87%BD%E6%95%B0%0A%20*%20%0A%20*%20one%3A%0A%20*%20.one(%20eventType%2C%20%5BeventData%5D%2C%20handler(eventObject)%20)%20%E5%9C%A8%E5%8C%B9%E9%85%8D%E7%9A%84%E5%85%83%E7%B4%A0%E4%B8%8A%E7%BB%91%E5%AE%9A%E6%8C%87%E5%AE%9A%E7%B1%BB%E5%9E%8B%E7%9A%84%E4%BA%8B%E4%BB%B6%E5%A4%84%E7%90%86%E5%87%BD%E6%95%B0%EF%BC%8C%E8%BF%99%E4%B8%AA%E5%87%BD%E6%95%B0%E6%9C%80%E5%A4%9A%E6%89%A7%E8%A1%8C%E4%B8%80%E6%AC%A1%0A%20*%20%E5%85%B6%E5%AE%9E%E6%98%AF%E6%94%B9%E5%86%99%E4%BA%86%E4%BA%8B%E4%BB%B6%E5%A4%84%E7%90%86%E5%87%BD%E6%95%B0%EF%BC%8C%E5%87%BD%E6%95%B0%E6%89%A7%E8%A1%8C%E6%97%B6%E5%85%88%E8%A7%A3%E7%BB%91%E5%AE%9A%EF%BC%8C%E5%86%8D%E6%89%A7%E8%A1%8C%0A%20*%2F%0AjQuery.each(%5B%22bind%22%2C%20%22one%22%5D%2C%20function(%20i%2C%20name%20)%20%7B%0A%09%2F%2F%20%E4%B8%BAjQuery%E5%AF%B9%E8%B1%A1%E6%89%A9%E5%B1%95bind%E3%80%81one%E6%96%B9%E6%B3%95%0A%09jQuery.fn%5B%20name%20%5D%20%3D%20function(%20type%2C%20data%2C%20fn%20)%20%7B%0A%09%09var%20handler%3B%0A%0A%09%09%2F%2F%20Handle%20object%20literals%0A%09%09%2F%2F%20%E7%BB%91%E5%AE%9A%E5%A4%9A%E4%B8%AA%E4%BA%8B%E4%BB%B6%EF%BC%8Ckey%E4%B8%BA%E4%BA%8B%E4%BB%B6%E7%B1%BB%E5%9E%8B%EF%BC%8Ctype%5Bkey%5D%E6%98%AF%E4%BA%8B%E4%BB%B6%E5%A4%84%E7%90%86%E5%87%BD%E6%95%B0%0A%09%09if%20(%20typeof%20type%20%3D%3D%3D%20%22object%22%20)%20%7B%20%2F%2F%0A%09%09%09for%20(%20var%20key%20in%20type%20)%20%7B%0A%09%09%09%09this%5B%20name%20%5D(key%2C%20data%2C%20type%5Bkey%5D%2C%20fn)%3B%0A%09%09%09%7D%0A%09%09%09return%20this%3B%0A%09%09%7D%0A%09%09%2F%2F%20%E4%BF%AE%E6%AD%A3%E5%8F%82%E6%95%B0%EF%BC%9A%E5%A6%82%E6%9E%9C%E6%B2%A1%E6%9C%89%E4%BC%A0%E5%85%A5data%EF%BC%8C%E6%88%96data%E4%B8%BAfalse%EF%BC%8C%EF%BC%88jQuery%E7%9A%84%E8%BF%99%E7%A7%8D%E5%86%99%E6%B3%95%E5%BE%88%E5%B7%A7%E5%A6%99%EF%BC%8C%E4%BD%86%E6%98%AF%E5%8F%AF%E8%AF%BB%E6%80%A7%E5%A4%AA%E5%B7%AE%EF%BC%89%0A%09%09%2F%2F%20%E5%A6%82%E6%9E%9C%E6%9C%89%E4%B8%A4%E4%B8%AA%E5%8F%82%E6%95%B0%EF%BC%8C%E5%88%99%E8%AE%A4%E4%B8%BA%E5%BF%BD%E7%95%A5%E4%BA%86data%EF%BC%9Atype%2C%20fn%EF%BC%8C%E7%BB%93%E6%9E%9C%E6%98%AF%EF%BC%9Atype%2C%20undefined%2C%20fn%0A%09%09%2F%2F%20%E5%A6%82%E6%9E%9Cdata%E6%98%AFfalse%EF%BC%8C%E5%88%99%E8%AE%A4%E4%B8%BA%E6%98%AFtype%2C%20false%2C%20fn%EF%BC%8C%E7%BB%93%E6%9E%9C%E6%98%AF%EF%BC%9Atype%2C%20undefined%2C%20false%0A%09%09if%20(%20arguments.length%20%3D%3D%3D%202%20%7C%7C%20data%20%3D%3D%3D%20false%20)%20%7B%0A%09%09%09fn%20%3D%20data%3B%0A%09%09%09data%20%3D%20undefined%3B%0A%09%09%7D%0A%0A%09%09if%20(%20name%20%3D%3D%3D%20%22one%22%20)%20%7B%20%2F%2F%20%E5%8F%AA%E6%89%A7%E8%A1%8C%E4%B8%80%E6%AC%A1%0A%09%09%09handler%20%3D%20function(%20event%20)%20%7B%20%2F%2F%20%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E6%96%B0%E7%9A%84%E4%BA%8B%E4%BB%B6%E5%A4%84%E7%90%86%E5%87%BD%E6%95%B0%E5%8F%A5%E6%9F%84%0A%09%09%09%09jQuery(%20this%20).unbind(%20event%2C%20handler%20)%3B%20%2F%2F%20%E5%85%88%E5%88%A0%E9%99%A4%E4%BA%8B%E4%BB%B6%0A%09%09%09%09return%20fn.apply(%20this%2C%20arguments%20)%3B%20%2F%2F%20%E5%86%8D%E6%89%A7%E8%A1%8C%E4%BC%A0%E5%85%A5%E7%9A%84%E4%BA%8B%E4%BB%B6%E5%A4%84%E7%90%86%E5%87%BD%E6%95%B0fn%EF%BC%8C%E8%BF%99%E9%87%8Cthis%E6%98%AFDOM%E5%85%83%E7%B4%A0%0A%09%09%09%7D%3B%0A%09%09%09handler.guid%20%3D%20fn.guid%20%7C%7C%20jQuery.guid%2B%2B%3B%20%2F%2F%20%E5%90%8C%E6%AD%A5guid%EF%BC%8C%E9%87%8D%E6%96%B0%E5%8C%85%E8%A3%85%E5%90%8E%E7%9A%84%E5%87%BD%E6%95%B0%E4%B8%8E%E5%8E%9F%E5%A7%8B%E5%87%BD%E6%95%B0%E7%9A%84guid%E7%BB%9F%E4%B8%80%0A%09%09%7D%20else%20%7B%0A%09%09%09handler%20%3D%20fn%3B%0A%09%09%7D%0A%0A%09%09if%20(%20type%20%3D%3D%3D%20%22unload%22%20%26%26%20name%20!%3D%3D%20%22one%22%20)%20%7B%20%2F%2F%20%E5%A6%82%E6%9E%9C%E6%98%AFunload%E4%BA%8B%E4%BB%B6%EF%BC%8C%E5%88%99%E5%8F%AA%E6%89%A7%E8%A1%8C%E4%B8%80%E6%AC%A1%0A%09%09%09this.one(%20type%2C%20data%2C%20fn%20)%3B%20%2F%2F%20%E8%BF%AD%E4%BB%A3%E8%B0%83%E7%94%A8%EF%BC%8C%E6%B2%A1%E6%9C%89%E6%B8%85%E6%99%B0%E7%9A%84%E7%BB%93%E6%9E%84%E5%BE%88%E5%8D%B1%E9%99%A9%0A%09%09%7D%20else%20%7B%0A%09%09%09for%20(%20var%20i%20%3D%200%2C%20l%20%3D%20this.length%3B%20i%20%3C%20l%3B%20i%2B%2B%20)%20%7B%0A%09%09%09%09jQuery.event.add(%20this%5Bi%5D%2C%20type%2C%20handler%2C%20data%20)%3B%20%2F%2F%20%E9%81%8D%E5%8E%86%E5%8C%B9%E9%85%8D%E7%9A%84%E5%85%83%E7%B4%A0%EF%BC%8C%E5%B9%B6%E7%BB%91%E5%AE%9A%E4%BA%8B%E4%BB%B6%E5%A4%84%E7%90%86%E5%87%BD%E6%95%B0%0A%09%09%09%7D%0A%09%09%7D%0A%09%09%2F%2F%20%E8%BF%94%E5%9B%9EjQuery%E5%AF%B9%E8%B1%A1%EF%BC%8C%E4%BD%BF%E5%BE%97%E5%8F%AF%E4%BB%A5%E7%BB%A7%E7%BB%AD%E9%93%BE%E5%BC%8F%E8%B0%83%E7%94%A8%0A%09%09return%20this%3B%0A%09%7D%3B%0A%7D)%3B%0A10.4.4%09jQuery.event.add%0A.bind()%E5%92%8C.one()%E9%83%BD%E8%B0%83%E7%94%A8%E4%BA%86jQuery.event.add%E6%9D%A5%E5%AE%9E%E7%8E%B0%EF%BC%8C%E4%B8%BA%E5%85%83%E7%B4%A0elem%E6%B7%BB%E5%8A%A0%E7%B1%BB%E5%9E%8Btypes%E7%9A%84%E5%8F%A5%E6%9F%84handler%EF%BC%8C%E4%BA%8B%E5%AE%9E%E4%B8%8A%E6%89%80%E6%9C%89%E7%9A%84%E4%BA%8B%E4%BB%B6%E7%BB%91%E5%AE%9A%E6%9C%80%E5%90%8E%E9%83%BD%E9%80%9A%E8%BF%87jQuery.event.add%E6%9D%A5%E5%AE%9E%E7%8E%B0%E3%80%82%E5%85%B6%E6%89%A7%E8%A1%8C%E8%BF%87%E7%A8%8B%E5%A4%A7%E8%87%B4%E5%A6%82%E4%B8%8B%EF%BC%9A%0A1.%09%E5%85%88%E8%B0%83%E7%94%A8jQuery._data%E4%BB%8E%24.cache%E4%B8%AD%E5%8F%96%E5%87%BA%E5%B7%B2%E6%9C%89%E7%9A%84%E4%BA%8B%E4%BB%B6%E7%BC%93%E5%AD%98%EF%BC%88%E7%A7%81%E6%9C%89%E6%95%B0%E6%8D%AE%EF%BC%8CCache%E7%9A%84%E8%A7%A3%E6%9E%90%E8%AF%A6%E8%A7%81%E6%95%B0%E6%8D%AE%E7%BC%93%E5%AD%98%EF%BC%89%0A2.%09%E5%A6%82%E6%9E%9C%E6%98%AF%E7%AC%AC%E4%B8%80%E6%AC%A1%E5%9C%A8DOM%E5%85%83%E7%B4%A0%E4%B8%8A%E7%BB%91%E5%AE%9A%E8%AF%A5%E7%B1%BB%E5%9E%8B%E4%BA%8B%E4%BB%B6%E5%8F%A5%E6%9F%84%EF%BC%8C%E5%9C%A8DOM%E5%85%83%E7%B4%A0%E4%B8%8A%E7%BB%91%E5%AE%9AjQuery.event.handle%EF%BC%8C%E4%BD%9C%E4%B8%BA%E7%BB%9F%E4%B8%80%E7%9A%84%E4%BA%8B%E4%BB%B6%E5%93%8D%E5%BA%94%E5%85%A5%E5%8F%A3%0A3.%09%E5%B0%86%E5%B0%81%E8%A3%85%E5%90%8E%E7%9A%84%E4%BA%8B%E4%BB%B6%E5%8F%A5%E6%9F%84%E6%94%BE%E5%85%A5%E7%BC%93%E5%AD%98%E4%B8%AD%0A%E4%BC%A0%E5%85%A5%E7%9A%84%E4%BA%8B%E4%BB%B6%E5%8F%A5%E6%9F%84%EF%BC%8C%E4%BC%9A%E8%A2%AB%E5%B0%81%E8%A3%85%E5%88%B0%E5%AF%B9%E8%B1%A1handleObj%E7%9A%84handle%E5%B1%9E%E6%80%A7%E4%B8%8A%EF%BC%8C%E6%AD%A4%E5%A4%96handleObj%E8%BF%98%E4%BC%9A%E5%A1%AB%E5%85%85guid%E3%80%81type%E3%80%81namespace%E3%80%81data%E5%B1%9E%E6%80%A7%EF%BC%9BDOM%E4%BA%8B%E4%BB%B6%E5%8F%A5%E6%9F%84elemData.handle%E6%8C%87%E5%90%91jQuery.event.handle%EF%BC%8C%E5%8D%B3jQuery%E5%9C%A8DOM%E5%85%83%E7%B4%A0%E4%B8%8A%E7%BB%91%E5%AE%9A%E4%BA%8B%E4%BB%B6%E6%97%B6%E6%80%BB%E6%98%AF%E7%BB%91%E5%AE%9A%E5%90%8C%E6%A0%B7%E7%9A%84DOM%E4%BA%8B%E4%BB%B6%E5%8F%A5%E6%9F%84jQuery.event.handle%E3%80%82%0A%E4%BA%8B%E4%BB%B6%E5%8F%A5%E6%9F%84%E5%9C%A8%E7%BC%93%E5%AD%98%24.cache%E4%B8%AD%E7%9A%84%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%A6%82%E4%B8%8B%EF%BC%8C%E4%BA%8B%E4%BB%B6%E7%B1%BB%E5%9E%8B%E5%92%8C%E4%BA%8B%E4%BB%B6%E5%8F%A5%E6%9F%84%E9%83%BD%E5%AD%98%E5%82%A8%E5%9C%A8%E5%B1%9E%E6%80%A7events%E4%B8%AD%EF%BC%8C%E5%B1%9E%E6%80%A7handle%E5%AD%98%E6%94%BE%E7%9A%84%E6%89%A7%E8%A1%8C%E8%BF%99%E4%BA%9B%E4%BA%8B%E4%BB%B6%E5%8F%A5%E6%9F%84%E7%9A%84DOM%E4%BA%8B%E4%BB%B6%E5%8F%A5%E6%9F%84%EF%BC%9A%0AelemData%20%3D%20%7B%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20events%3A%20%7B%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20&#39;click&#39;%20%3A%20%5B%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%20guid%3A%205%2C%20type%3A%20&#39;click&#39;%2C%20namespace%3A%20&#39;&#39;%2C%20data%3A%20undefined%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20handle%3A%20%7B%20guid%3A%205%2C%20prototype%3A%20%7B%7D%20%7D%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%20...%20%7D%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%5D%2C%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20&#39;keypress&#39;%20%3A%20%5B%20...%20%5D%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%7D%2C%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20handle%3A%20%7B%20%2F%2F%20DOM%E4%BA%8B%E4%BB%B6%E5%8F%A5%E6%9F%84%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20elem%3A%20elem%2C%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20prototype%3A%20%7B%7D%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%7D%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0A%7D%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0A%E7%9C%8B%E7%9C%8BjQuery.event.add%E7%9A%84%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90%EF%BC%9A%0AjQuery.event%20%3D%20%7B%0A%09%2F%2F%20Bind%20an%20event%20to%20an%20element%0A%09%2F%2F%20Original%20by%20Dean%20Edwards%0A%09%2F%2F%20%E4%B8%BA%E5%85%83%E7%B4%A0elem%E6%B7%BB%E5%8A%A0%E7%B1%BB%E5%9E%8Btypes%E7%9A%84%E5%8F%A5%E6%9F%84handler%0A%09add%3A%20function(%20elem%2C%20types%2C%20handler%2C%20data%20)%20%7B%0A%09%09%2F%2F%20%E5%BF%BD%E7%95%A5%20Text%20Comment%0A%09%09if%20(%20elem.nodeType%20%3D%3D%3D%203%20%7C%7C%20elem.nodeType%20%3D%3D%3D%208%20)%20%7B%0A%09%09%09return%3B%0A%09%09%7D%0A%0A%09%09if%20(%20handler%20%3D%3D%3D%20false%20)%20%7B%20%2F%2F%20%E5%A6%82%E6%9E%9C%E4%BA%8B%E4%BB%B6%E5%A4%84%E7%90%86%E5%87%BD%E6%95%B0%E6%98%AFfalse%EF%BC%8C%E5%88%99%E7%94%A8returnFalse%E4%BB%A3%E6%9B%BFfalse%0A%09%09%09handler%20%3D%20returnFalse%3B%20%2F%2F%20returnFalse%E4%BC%9A%E5%8F%96%E6%B6%88%E4%BA%8B%E4%BB%B6%E7%9A%84%E9%BB%98%E8%AE%A4%E8%A1%8C%E4%B8%BA%0A%09%09%7D%20else%20if%20(%20!handler%20)%20%7B%0A%09%09%09%2F%2F%20Fixes%20bug%20%237229.%20Fix%20recommended%20by%20jdalton%0A%09%09%09return%3B%20%2F%2F%20%E5%A6%82%E6%9E%9Chandler%E6%98%AFundefined%20null%20&#39;&#39;%EF%BC%8C%E5%88%99%E7%9B%B4%E6%8E%A5%E8%BF%94%E5%9B%9E%EF%BC%8C%E4%B8%8D%E6%89%A7%E8%A1%8C%E5%90%8E%E8%BE%B9%E7%9A%84%E4%BB%A3%E7%A0%81%0A%09%09%7D%0A%0A%09%09var%20handleObjIn%2C%20handleObj%3B%0A%0A%09%09if%20(%20handler.handler%20)%20%7B%20%2F%2F%20%E5%A6%82%E6%9E%9C%E5%B7%B2%E7%BB%8F%E6%98%AF%E5%B0%81%E8%A3%85%E8%BF%87%E7%9A%84jQuery%E4%BA%8B%E4%BB%B6%E5%AF%B9%E8%B1%A1%EF%BC%88JS%E7%9C%9F%E6%98%AF%E6%84%81%E4%BA%BA%E5%95%8A%EF%BC%8C%E5%BC%B1%E7%B1%BB%E5%9E%8B%EF%BC%8C%E5%8F%AA%E8%83%BD%E9%80%9A%E8%BF%87%E7%89%B9%E6%80%A7%E3%80%81%E5%B1%9E%E6%80%A7%E5%88%A4%E6%96%AD%E5%AF%B9%E8%B1%A1%E7%9A%84%E7%B1%BB%E5%9E%8B%EF%BC%89%0A%09%09%09handleObjIn%20%3D%20handler%3B%20%2F%2F%20handleObj%E6%98%AFDOM%E4%BA%8B%E4%BB%B6%E5%8F%A5%E6%9F%84%E5%AF%B9%E8%B1%A1%EF%BC%88%E4%B8%B0%E5%AF%8C%E5%90%8E%E7%9A%84jQuery.event.handle%EF%BC%89%0A%09%09%09handler%20%3D%20handleObjIn.handler%3B%20%2F%2F%20handler%E5%A7%8B%E7%BB%88%E6%98%AF%E4%B8%AA%E5%87%BD%E6%95%B0%0A%09%09%7D%0A%0A%09%09%2F%2F%20Make%20sure%20that%20the%20function%20being%20executed%20has%20a%20unique%20ID%0A%09%09if%20(%20!handler.guid%20)%20%7B%20%2F%2F%20%E5%A6%82%E6%9E%9C%E6%B2%A1%E6%9C%89%E5%88%86%E9%85%8D%E5%94%AF%E4%B8%80id%EF%BC%8C%E5%88%99%E5%88%86%E9%85%8D%E4%B8%80%E4%B8%AA%0A%09%09%09handler.guid%20%3D%20jQuery.guid%2B%2B%3B%0A%09%09%7D%0A%0A%09%09%2F%2F%20Init%20the%20element&#39;s%20event%20structure%0A%09%09%2F%2F%20%E5%86%85%E9%83%A8%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8%E5%9C%A8%E5%86%85%E9%83%A8%E5%AF%B9%E8%B1%A1%E4%B8%8A%EF%BC%8C%E5%9B%A0%E6%AD%A4elemData%E4%B8%8D%E5%BA%94%E8%AF%A5%E4%B8%BA%E7%A9%BA%EF%BC%8C%E9%99%A4%E9%9D%9Eelem%E4%B8%8D%E6%94%AF%E6%8C%81jQuery%E7%BC%93%E5%AD%98%EF%BC%88embed%E3%80%81object%E3%80%81applet%EF%BC%89%0A%09%09var%20elemData%20%3D%20jQuery._data(%20elem%20)%3B%20%2F%2F%20%E4%BB%85%E4%BB%85%E8%B0%83%E7%94%A8_data%E6%8E%A5%E5%8F%A3%E4%B8%80%E6%AC%A1%EF%BC%8C%E5%90%8E%E7%BB%AD%E7%9B%B4%E6%8E%A5%E5%9C%A8%E8%BF%94%E5%9B%9E%E7%9A%84%E5%AF%B9%E8%B1%A1%E4%B8%8A%E6%93%8D%E4%BD%9C%0A%0A%09%09%2F%2F%20If%20no%20elemData%20is%20found%20then%20we%20must%20be%20trying%20to%20bind%20to%20one%20of%20the%0A%09%09%2F%2F%20banned%20noData%20elements%0A%09%09%2F%2F%20%E5%A6%82%E6%9E%9CelemData%E4%B8%8D%E5%AD%98%E5%9C%A8%EF%BC%8C%E8%AF%B4%E6%98%8E%E6%98%AF%E4%B8%80%E4%B8%AA%E4%B8%8D%E6%94%AF%E6%8C%81%E7%BC%93%E5%AD%98%E7%9A%84%E5%85%83%E7%B4%A0%E4%B8%8A%E7%BB%91%E5%AE%9A%E4%BA%8B%E4%BB%B6%EF%BC%8C%E7%9B%B4%E6%8E%A5%E8%BF%94%E5%9B%9E%0A%09%09if%20(%20!elemData%20)%20%7B%0A%09%09%09return%3B%0A%09%09%7D%0A%0A%09%09var%20events%20%3D%20elemData.events%2C%20%2F%2F%20%E4%BA%8B%E4%BB%B6%E7%B1%BB%E5%9E%8B%E5%92%8C%E4%BA%8B%E4%BB%B6%E5%8F%A5%E6%9F%84%E9%83%BD%E5%AD%98%E5%82%A8%E5%9C%A8%E5%B1%9E%E6%80%A7events%E4%B8%AD%0A%09%09%09eventHandle%20%3D%20elemData.handle%3B%20%2F%2F%20%E5%B1%9E%E6%80%A7handle%E5%AD%98%E6%94%BE%E7%9A%84%E6%89%A7%E8%A1%8C%E8%BF%99%E4%BA%9B%E4%BA%8B%E4%BB%B6%E5%8F%A5%E6%9F%84%E7%9A%84DOM%E4%BA%8B%E4%BB%B6%E5%8F%A5%E6%9F%84%0A%0A%09%09if%20(%20!events%20)%20%7B%0A%09%09%09elemData.events%20%3D%20events%20%3D%20%7B%7D%3B%20%2F%2F%20%E5%88%9D%E5%A7%8B%E5%8C%96%E4%B8%80%E4%B8%AA%E5%AD%98%E6%94%BE%E4%BA%8B%E4%BB%B6%E7%9A%84%E5%AF%B9%E8%B1%A1%EF%BC%8C%E4%BA%8B%E4%BB%B6%E5%90%8D%E4%B8%BAkey%EF%BC%8C%E4%BA%8B%E4%BB%B6%E5%87%BD%E6%95%B0%E4%B8%BAvalue%0A%09%09%7D%0A%0A%09%09if%20(%20!eventHandle%20)%20%7B%20%2F%2F%20%E5%88%9D%E5%A7%8B%E5%8C%96%E4%B8%80%E4%B8%AA%E6%89%A7%E8%A1%8C%E4%BA%8B%E4%BB%B6%E5%87%BD%E6%95%B0%E7%9A%84%E5%87%BD%E6%95%B0%0A%09%09%09elemData.handle%20%3D%20eventHandle%20%3D%20function(%20e%20)%20%7B%0A%09%09%09%09%2F%2F%20Discard%20the%20second%20event%20of%20a%20jQuery.event.trigger()%20and%0A%09%09%09%09%2F%2F%20when%20an%20event%20is%20called%20after%20a%20page%20has%20unloaded%0A%09%09%09%09%2F%2F%20%E8%B0%83%E7%94%A8jQuery.event.handler%0A%09%09%09%09%2F%2F%20jQuery.event.handler%E6%98%AF%E4%BB%80%E4%B9%88%E6%84%8F%E6%80%9D%EF%BC%9F%0A%09%09%09%09return%20typeof%20jQuery%20!%3D%3D%20%22undefined%22%20%26%26%20(!e%20%7C%7C%20jQuery.event.triggered%20!%3D%3D%20e.type)%20%3F%0A%09%09%09%09%09jQuery.event.handle.apply(%20eventHandle.elem%2C%20arguments%20)%20%3A%0A%09%09%09%09%09undefined%3B%0A%09%09%09%7D%3B%0A%09%09%7D%0A%0A%09%09%2F%2F%20Add%20elem%20as%20a%20property%20of%20the%20handle%20function%0A%09%09%2F%2F%20This%20is%20to%20prevent%20a%20memory%20leak%20with%20non-native%20events%20in%20IE.%0A%09%09%2F%2F%20%E5%86%85%E5%AD%98%E6%B3%84%E6%BC%8F%EF%BC%9F%0A%09%09%2F%2F%20%E5%B0%86elem%E4%BD%9C%E4%B8%BAeventHandle%E7%9A%84%E5%B1%9E%E6%80%A7%E5%AD%98%E5%82%A8%EF%BC%8C%E7%94%A8%E6%9D%A5%E9%81%BF%E5%85%8DIE%E4%B8%AD%E9%9D%9E%E6%9C%AC%E5%9C%B0%E4%BA%8B%E4%BB%B6%E7%9A%84%E5%86%85%E5%AD%98%E6%B3%84%E6%BC%8F%0A%09%09eventHandle.elem%20%3D%20elem%3B%0A%0A%09%09%2F%2F%20Handle%20multiple%20events%20separated%20by%20a%20space%0A%09%09%2F%2F%20jQuery(...).bind(%22mouseover%20mouseout%22%2C%20fn)%3B%0A%09%09types%20%3D%20types.split(%22%20%22)%3B%20%2F%2F%20%E5%90%8C%E6%97%B6%E7%BB%91%E5%AE%9A%E7%9A%84%E5%A4%9A%E4%B8%AA%E4%BA%8B%E4%BB%B6%E5%8F%AF%E4%BB%A5%E7%94%A8%E7%A9%BA%E6%A0%BC%E9%9A%94%E5%BC%80%0A%09%09%2F%2F%20%E4%B8%BA%E4%BB%80%E4%B9%88%E6%9C%89%E7%9A%84%E5%9C%B0%E6%96%B9%E7%94%A8%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9B%B4%E6%8E%A5%E9%87%8F%EF%BC%8C%E6%9C%89%E7%9A%84%E5%9C%B0%E6%96%B9%E8%A6%81%E7%94%A8%E6%AD%A3%E5%88%99%E5%91%A2%EF%BC%9F%E5%9B%A0%E4%B8%BA%E6%AD%A3%E5%88%99%E5%8F%AF%E4%BB%A5%E8%BF%9B%E8%A1%8C%E5%85%A8%E5%B1%80%E5%8C%B9%E9%85%8Dg%0A%0A%09%09var%20type%2C%20i%20%3D%200%2C%20namespaces%3B%0A%0A%09%09while%20(%20(type%20%3D%20types%5B%20i%2B%2B%20%5D)%20)%20%7B%20%2F%2F%20%E5%8F%88%E4%B8%80%E7%A7%8D%E9%81%8D%E5%8E%86%E6%95%B0%E7%BB%84%E7%9A%84%E6%96%B9%E6%B3%95%EF%BC%8C%E6%95%85%E6%84%8F%E7%A7%80%E6%8A%80%E5%B7%A7%E4%B9%88%EF%BC%9F%0A%09%09%09handleObj%20%3D%20handleObjIn%20%3F%0A%09%09%09%09jQuery.extend(%7B%7D%2C%20handleObjIn)%20%3A%0A%09%09%09%09%7B%20handler%3A%20handler%2C%20data%3A%20data%20%7D%3B%20%2F%2F%20%E5%88%9B%E5%BB%BA%E4%BA%8B%E4%BB%B6%E5%8F%A5%E6%9F%84%E5%AF%B9%E8%B1%A1%EF%BC%8C%E5%90%8E%E8%BE%B9%E8%BF%98%E4%BC%9A%E6%B7%BB%E5%8A%A0%E5%B1%9E%E6%80%A7%EF%BC%9Aguid%20anmespace%20type%0A%0A%09%09%09%2F%2F%20Namespaced%20event%20handlers%0A%09%09%09%2F%2F%20%E5%A6%82%E6%9E%9C%E4%BA%8B%E4%BB%B6%E5%AD%97%E7%AC%A6%E4%B8%B2%E4%B8%AD%E6%9C%89%E5%8F%A5%E5%8F%B7.%EF%BC%8C%E5%88%99%E8%AF%B4%E6%98%8E%E6%9C%89%E5%91%BD%E5%90%8D%E7%A9%BA%E9%97%B4%0A%09%09%09if%20(%20type.indexOf(%22.%22)%20%3E%20-1%20)%20%7B%0A%09%09%09%09namespaces%20%3D%20type.split(%22.%22)%3B%0A%09%09%09%09type%20%3D%20namespaces.shift()%3B%20%2F%2F%20%E5%8F%96%E5%87%BA%E7%AC%AC%E4%B8%80%E4%B8%AA%E5%85%83%E7%B4%A0%0A%09%09%09%09handleObj.namespace%20%3D%20namespaces.slice(0).sort().join(%22.%22)%3B%20%2F%2F%20%E5%B0%86%E4%BA%8E%E4%B8%8B%E9%83%A8%E5%88%86%E4%BD%9C%E4%B8%BA%E5%91%BD%E5%90%8D%E7%A9%BA%E9%97%B4%EF%BC%8C%E5%AD%98%E5%82%A8%E5%88%B0%E5%B1%9E%E6%80%A7namespace%E4%B8%AD%0A%0A%09%09%09%7D%20else%20%7B%0A%09%09%09%09namespaces%20%3D%20%5B%5D%3B%0A%09%09%09%09handleObj.namespace%20%3D%20%22%22%3B%20%2F%2F%20%E6%B2%A1%E6%9C%89%E5%91%BD%E5%90%8D%E7%A9%BA%E9%97%B4%0A%09%09%09%7D%0A%0A%09%09%09handleObj.type%20%3D%20type%3B%20%2F%2F%20%E4%BA%8B%E4%BB%B6%E7%B1%BB%E5%9E%8B%0A%09%09%09if%20(%20!handleObj.guid%20)%20%7B%0A%09%09%09%09handleObj.guid%20%3D%20handler.guid%3B%20%2F%2F%20%E4%BA%8B%E4%BB%B6%E5%AF%B9%E8%B1%A1%E5%94%AF%E4%B8%80id%0A%09%09%09%7D%0A%0A%09%09%09%2F%2F%20Get%20the%20current%20list%20of%20functions%20bound%20to%20this%20event%0A%09%09%09var%20handlers%20%3D%20events%5B%20type%20%5D%2C%20%2F%2F%20%E4%BA%8B%E4%BB%B6%E5%8F%A5%E6%9F%84%E9%98%9F%E5%88%97%EF%BC%8C%E5%8F%96%E5%87%BA%E5%B7%B2%E7%BB%8F%E5%AD%98%E5%9C%A8%E5%87%BD%E6%95%B0%E6%95%B0%E7%BB%84%0A%09%09%09%09special%20%3D%20jQuery.event.special%5B%20type%20%5D%20%7C%7C%20%7B%7D%3B%20%2F%2F%20%E7%89%B9%E6%AE%8A%E5%A4%84%E7%90%86%E7%9A%84%E4%BA%8B%E4%BB%B6%0A%0A%09%09%09%2F%2F%20Init%20the%20event%20handler%20queue%0A%09%09%09if%20(%20!handlers%20)%20%7B%20%2F%2F%20%E5%A6%82%E6%9E%9C%E6%B2%A1%E6%9C%89%E7%BB%91%E5%AE%9A%E4%BA%8B%E4%BB%B6%EF%BC%8C%E5%88%99%E5%88%9D%E5%A7%8B%E5%8C%96%E4%B8%BA%E4%B8%80%E4%B8%AA%E7%A9%BA%E6%95%B0%E7%BB%84%0A%09%09%09%09handlers%20%3D%20events%5B%20type%20%5D%20%3D%20%5B%5D%3B%20%2F%2F%20%0A%0A%09%09%09%09%2F%2F%20Check%20for%20a%20special%20event%20handler%0A%09%09%09%09%2F%2F%20Only%20use%20addEventListener%2FattachEvent%20if%20the%20special%0A%09%09%09%09%2F%2F%20events%20handler%20returns%20false%0A%09%09%09%09%2F%2F%20%E5%A6%82%E6%9E%9C%E7%89%B9%E6%AE%8A%E4%BA%8B%E4%BB%B6%E6%B2%A1%E6%9C%89setup%E5%B1%9E%E6%80%A7%20%E6%88%96%20setup%E8%BF%94%E5%9B%9Efalse%EF%BC%8C%E5%88%99%E7%94%A8%E6%B5%8F%E8%A7%88%E5%99%A8%E5%8E%9F%E7%94%9F%E7%9A%84%E7%BB%91%E5%AE%9A%E4%BA%8B%E4%BB%B6%E6%8E%A5%E5%8F%A3addEventListener%2FaddEventListener%EF%BC%8C%E4%BE%8B%E5%A6%82live%E4%BA%8B%E4%BB%B6%0A%09%09%09%09if%20(%20!special.setup%20%7C%7C%20special.setup.call(%20elem%2C%20data%2C%20namespaces%2C%20eventHandle%20)%20%3D%3D%3D%20false%20)%20%7B%0A%09%09%09%09%09%2F%2F%20Bind%20the%20global%20event%20handler%20to%20the%20element%0A%09%09%09%09%09%2F%2F%20%E7%BB%91%E5%AE%9A%E4%BA%8B%E4%BB%B6%E5%8F%A5%E6%9F%84%0A%09%09%09%09%09if%20(%20elem.addEventListener%20)%20%7B%0A%09%09%09%09%09%09elem.addEventListener(%20type%2C%20eventHandle%2C%20false%20)%3B%20%2F%2F%20jQuery%E7%BB%91%E5%AE%9A%E7%9A%84%E4%BA%8B%E4%BB%B6%E9%BB%98%E8%AE%A4%E9%83%BD%E6%98%AF%E8%B5%B7%E6%B3%A1%E9%98%B6%E6%AE%B5%E6%8D%95%E8%8E%B7%0A%0A%09%09%09%09%09%7D%20else%20if%20(%20elem.attachEvent%20)%20%7B%0A%09%09%09%09%09%09elem.attachEvent(%20%22on%22%20%2B%20type%2C%20eventHandle%20)%3B%20%2F%2F%20IE%E4%BA%8B%E4%BB%B6%E6%A8%A1%E5%9E%8B%E4%B8%AD%E6%B2%A1%E6%9C%892%E7%BA%A7DOM%E4%BA%8B%E4%BB%B6%E6%A8%A1%E5%9E%8B%E5%85%B7%E6%9C%89%E7%9A%84%E4%BA%8B%E4%BB%B6%E6%8D%95%E6%8D%89%E7%9A%84%E6%A6%82%E5%BF%B5%EF%BC%8C%E5%8F%AA%E6%9C%89%E8%B5%B7%E6%B3%A1%E9%98%B6%E6%AE%B5%0A%09%09%09%09%09%7D%0A%09%09%09%09%7D%0A%09%09%09%7D%0A%0A%09%09%09if%20(%20special.add%20)%20%7B%20%2F%2F%20%E5%A6%82%E6%9E%9C%E6%9C%89add%E6%96%B9%E6%B3%95%EF%BC%8C%E5%B0%B1%E8%B0%83%E7%94%A8%0A%09%09%09%09special.add.call(%20elem%2C%20handleObj%20)%3B%0A%0A%09%09%09%09if%20(%20!handleObj.handler.guid%20)%20%7B%20%2F%2F%20%E5%A7%8B%E7%BB%88%E4%BF%9D%E8%AF%81%E4%BA%8B%E4%BB%B6%E5%8F%A5%E6%9F%84%E6%9C%89%E5%94%AF%E4%B8%80%E7%9A%84id%0A%09%09%09%09%09handleObj.handler.guid%20%3D%20handler.guid%3B%0A%09%09%09%09%7D%0A%09%09%09%7D%0A%0A%09%09%09%2F%2F%20Add%20the%20function%20to%20the%20element&#39;s%20handler%20list%0A%09%09%09%2F%2F%20%E5%B0%86%E5%8F%A5%E6%9F%84%E5%AF%B9%E8%B1%A1handleObj%EF%BC%8C%E5%8A%A0%E5%85%A5%E5%88%B0%E5%8F%A5%E6%9F%84%E6%95%B0%E7%BB%84handler%E4%B8%AD%EF%BC%8C%0A%09%09%09%2F%2F%20handleObj%E5%8C%85%E5%90%AB%E4%BB%A5%E4%B8%8B%E5%B1%9E%E6%80%A7%EF%BC%9Adata%20%E5%94%AF%E4%B8%80guid%20%E5%91%BD%E5%90%8D%E7%A9%BA%E9%97%B4namespace%20%E4%BA%8B%E4%BB%B6%E7%B1%BB%E5%9E%8Btype%20handler%E5%87%BD%E6%95%B0%0A%09%09%09handlers.push(%20handleObj%20)%3B%0A%0A%09%09%09%2F%2F%20Keep%20track%20of%20which%20events%20have%20been%20used%2C%20for%20event%20optimization%0A%09%09%09%2F%2F%20%E8%AE%B0%E5%BD%95%E5%B7%B2%E7%BB%8F%E4%BD%BF%E7%94%A8%E7%9A%84%E4%BA%8B%E4%BB%B6%EF%BC%8C%E7%94%A8%E4%BA%8E%E4%BA%8B%E4%BB%B6%E4%BC%98%E5%8C%96%EF%BC%9F%E6%80%8E%E4%B9%88%E4%B8%AA%E4%BC%98%E5%8C%96%EF%BC%9F%0A%09%09%09jQuery.event.global%5B%20type%20%5D%20%3D%20true%3B%0A%09%09%7D%0A%0A%09%09%2F%2F%20Nullify%20elem%20to%20prevent%20memory%20leaks%20in%20IE%0A%09%09%2F%2F%20%E5%B0%86elem%E7%BD%AE%E4%B8%BAnull%EF%BC%8C%E9%81%BF%E5%85%8DIE%E4%B8%AD%E7%9A%84%E5%86%85%E5%AD%98%E6%B3%84%E6%BC%8F%EF%BC%88%E8%BF%99%E8%A1%8C%E4%BB%A3%E7%A0%81%E7%9C%9F%E6%98%AF%E5%9D%91%E7%88%B9%E5%95%8A%EF%BC%8C%E6%B2%A1%E6%9C%89%E6%97%A0%E6%95%B0%E6%AC%A1%E7%9A%84%E6%B5%8B%E8%AF%95%E7%A1%AE%E8%AE%A4%EF%BC%8C%E6%80%8E%E4%B9%88%E5%8F%AF%E8%83%BD%E6%83%B3%E5%88%B0%E8%BF%99%E8%A1%8C%E4%BB%A3%E7%A0%81%E5%91%A2%EF%BC%89%0A%09%09elem%20%3D%20null%3B%0A%09%7D%2C%0A%09%2F%2F%20...%0A%7D%3B%0A10.5%09.unbind()%0A10.5.1%09%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8%0A.unbind(%20%5BeventType%5D%20%5B%2C%20handler(eventObject)%5D%20)%09%E4%BB%8E%E5%8C%B9%E9%85%8D%E7%9A%84%E5%85%83%E7%B4%A0%E4%B8%8A%E5%88%A0%E9%99%A4%E4%B8%80%E4%B8%AA%E4%B9%8B%E5%89%8D%E7%BB%91%E5%AE%9A%E7%9A%84%E4%BA%8B%E4%BB%B6%E5%8F%A5%E6%9F%84%0A%E5%A6%82%E6%9E%9C%E6%B2%A1%E6%9C%89%E5%8F%82%E6%95%B0%EF%BC%8C%E5%88%A0%E9%99%A4%E6%89%80%E6%9C%89%E4%BA%8B%E4%BB%B6%E5%8F%A5%E6%9F%84%0A.unbind(%20eventType%2C%20false%20)%09%E5%88%A0%E9%99%A4%E9%80%9A%E8%BF%87.bind(%20eventType%2C%20false%20)%E7%BB%91%E5%AE%9A%E7%9A%84%E4%BA%8B%E4%BB%B6%E5%8F%A5%E6%9F%84%0A.unbind(%20event%20)%09%E7%9C%8B%E4%B8%8D%E6%87%82%E3%80%82%E3%80%82%E3%80%82%0A10.5.2%09%E8%B0%83%E7%94%A8%E8%BF%87%E7%A8%8B%0AjQuery.fn.unbind%20%E2%86%92%20jQuery.event.remove%0A10.5.3%09%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90%0AjQuery.fn.extend(%7B%0A%09%2F%2F%20%E5%88%A0%E9%99%A4%E5%8F%A5%E6%9F%84%EF%BC%9A%E5%88%A0%E9%99%A4%E4%B8%80%E4%B8%AA%E6%88%96%E5%A4%9A%E4%B8%AA%E4%B9%8B%E5%89%8D%E9%99%84%E5%8A%A0%E7%9A%84%E4%BA%8B%E4%BB%B6%E5%8F%A5%E6%9F%84%EF%BC%8CjQuery%E4%BA%8B%E4%BB%B6%E5%8F%AA%E5%9C%A8%E8%B5%B7%E6%B3%A1%E9%98%B6%E6%AE%B5%E6%8D%95%E8%8E%B7%EF%BC%8C%E4%B8%8D%E9%9C%80%E8%A6%81%E5%86%8D%E5%AE%9A%E4%B9%89%E6%8E%A7%E5%88%B6%E6%8D%95%E8%8E%B7%E9%98%B6%E6%AE%B5%E7%9A%84%E5%8F%82%E6%95%B0%0A%09unbind%3A%20function(%20type%2C%20fn%20)%20%7B%0A%09%09%2F%2F%20Handle%20object%20literals%0A%09%09%2F%2F%20%E4%B8%80%E6%AC%A1%E5%88%A0%E9%99%A4%E5%A4%9A%E4%B8%AA%E4%BA%8B%E4%BB%B6%E5%8F%A5%E6%9F%84%EF%BC%8Ckey%E6%98%AF%E4%BA%8B%E4%BB%B6%E7%B1%BB%E5%9E%8B%EF%BC%8Ctype%5Bkey%5D%E6%98%AF%E4%BA%8B%E4%BB%B6%E5%8F%A5%E6%9F%84%EF%BC%88%E8%BF%99%E9%87%8C%E6%98%AF%E8%BF%AD%E4%BB%A3%E5%A4%8D%E7%94%A8%EF%BC%89%0A%09%09%2F%2F%20!type.preventDefault%20%E8%A1%A8%E6%98%8E%E8%BF%99%E4%B8%8D%E6%98%AF%E4%B8%80%E4%B8%AA%E5%B0%B1jQuery%E4%BA%8B%E4%BB%B6%E5%AF%B9%E8%B1%A1%0A%09%09if%20(%20typeof%20type%20%3D%3D%3D%20%22object%22%20%26%26%20!type.preventDefault%20)%20%7B%0A%09%09%09for%20(%20var%20key%20in%20type%20)%20%7B%0A%09%09%09%09this.unbind(key%2C%20type%5Bkey%5D)%3B%0A%09%09%09%7D%0A%09%09%2F%2F%20%E5%88%B0%E8%BF%99%E9%87%8C%EF%BC%8Ctype%E5%8F%AF%E8%83%BD%E6%98%AF%E5%AD%97%E7%AC%A6%E4%B8%B2%EF%BC%8C%E4%B9%9F%E5%8F%AF%E8%83%BD%E6%98%AFjQuery%E4%BA%8B%E4%BB%B6%E5%AF%B9%E8%B1%A1%0A%09%09%7D%20else%20%7B%0A%09%09%09for%20(%20var%20i%20%3D%200%2C%20l%20%3D%20this.length%3B%20i%20%3C%20l%3B%20i%2B%2B%20)%20%7B%0A%09%09%09%09jQuery.event.remove(%20this%5Bi%5D%2C%20type%2C%20fn%20)%3B%20%2F%2F%20%E8%B0%83%E7%94%A8remove%E5%88%A0%E9%99%A4%E5%8F%A5%E6%9F%84%0A%09%09%09%7D%0A%09%09%7D%0A%0A%09%09return%20this%3B%0A%09%7D%2C%0A%09%2F%2F%20...%0A%7D%3B%0A10.5.4%09jQuery.event.remove%0A.unbind()%E9%80%9A%E8%BF%87%E8%B0%83%E7%94%A8jQuery.event.remove%EF%BC%8C%E5%88%A0%E9%99%A4%E4%B9%8B%E5%89%8D%E7%BB%91%E5%AE%9A%E7%9A%84%E4%B8%80%E4%B8%AA%E6%88%96%E5%A4%9A%E4%B8%AA%E4%BA%8B%E4%BB%B6%E5%8F%A5%E6%9F%84%EF%BC%8C%E4%BA%8B%E5%AE%9E%E4%B8%8A%E6%89%80%E6%9C%89%E7%9A%84%E5%8F%A5%E6%9F%84%E5%88%A0%E9%99%A4%E6%9C%80%E5%90%8E%E9%83%BD%E9%80%9A%E8%BF%87jQuery.event.remove%E5%AE%9E%E7%8E%B0%EF%BC%8C%E5%85%B6%E6%89%A7%E8%A1%8C%E8%BF%87%E7%A8%8B%E5%A4%A7%E8%87%B4%E5%A6%82%E4%B8%8B%EF%BC%9A%0A1.%20%E7%8E%B0%E8%B0%83%E7%94%A8jQuery._data%E4%BB%8E%E7%BC%93%E5%AD%98%24.cache%E4%B8%AD%E5%8F%96%E5%87%BAelem%E5%AF%B9%E5%BA%94%E7%9A%84%E6%89%80%E6%9C%89%E6%95%B0%E7%BB%84%EF%BC%88%E5%86%85%E9%83%A8%E6%95%B0%E6%8D%AE%EF%BC%8C%E4%B8%8E%E8%B0%83%E7%94%A8jQuery.data%E5%AD%98%E5%82%A8%E7%9A%84%E6%95%B0%E6%8D%AE%E7%A8%8D%E6%9C%89%E4%B8%8D%E5%90%8C%20%0A2.%20%E5%A6%82%E6%9E%9C%E6%9C%AA%E4%BC%A0%E5%85%A5types%E5%88%99%E7%A7%BB%E9%99%A4%E6%89%80%E6%9C%89%E4%BA%8B%E4%BB%B6%E5%8F%A5%E6%9F%84%EF%BC%8C%E5%A6%82%E6%9E%9Ctypes%E6%98%AF%E5%91%BD%E5%90%8D%E7%A9%BA%E9%97%B4%EF%BC%8C%E5%88%99%E7%A7%BB%E9%99%A4%E6%89%80%E6%9C%89%E4%B8%8E%E5%91%BD%E5%90%8D%E7%A9%BA%E9%97%B4%E5%8C%B9%E9%85%8D%E7%9A%84%E4%BA%8B%E4%BB%B6%E5%8F%A5%E6%9F%84%0A3.%20%E5%A6%82%E6%9E%9C%E6%98%AF%E5%A4%9A%E4%B8%AA%E4%BA%8B%E4%BB%B6%EF%BC%8C%E5%88%99%E5%88%86%E5%89%B2%E5%90%8E%E9%81%8D%E5%8E%86%0A4.%20%E5%A6%82%E6%9E%9C%E6%9C%AA%E6%8C%87%E5%AE%9A%E5%88%A0%E9%99%A4%E5%93%AA%E4%B8%AA%E4%BA%8B%E4%BB%B6%E5%8F%A5%E6%9F%84%EF%BC%8C%E5%88%99%E5%88%A0%E9%99%A4%E4%BA%8B%E4%BB%B6%E7%B1%BB%E5%9E%8B%E5%AF%B9%E5%BA%94%E7%9A%84%E5%85%A8%E9%83%A8%E5%8F%A5%E6%9F%84%EF%BC%8C%E6%88%96%E8%80%85%E4%B8%8E%E5%91%BD%E5%90%8D%E7%A9%BA%E9%97%B4%E5%8C%B9%E9%85%8D%E7%9A%84%E5%85%A8%E9%83%A8%E5%8F%A5%E6%9F%84%20%0A5.%20%E5%A6%82%E6%9E%9C%E6%8C%87%E5%AE%9A%E4%BA%86%E5%88%A0%E9%99%A4%E6%9F%90%E4%B8%AA%E4%BA%8B%E4%BB%B6%E5%8F%A5%E6%9F%84%EF%BC%8C%E5%88%99%E5%88%A0%E9%99%A4%E6%8C%87%E5%AE%9A%E7%9A%84%E4%BA%8B%E4%BB%B6%E5%8F%A5%E6%9F%84%20%20%20%20%0A6.%20%E6%89%80%E6%9C%89%E7%9A%84%E4%BA%8B%E4%BB%B6%E5%8F%A5%E6%9F%84%E5%88%A0%E9%99%A4%EF%BC%8C%E9%83%BD%E7%9B%B4%E6%8E%A5%E5%9C%A8%E4%BA%8B%E4%BB%B6%E5%8F%A5%E6%9F%84%E6%95%B0%E7%BB%84jQuery._data(%20elem%20).events%5B%20type%20%5D%E4%B8%8A%E8%B0%83%E7%94%A8splice%E6%93%8D%E4%BD%9C%20%0A7.%20%E6%9C%80%E5%90%8E%E6%A3%80%E6%9F%A5%E4%BA%8B%E4%BB%B6%E5%8F%A5%E6%9F%84%E6%95%B0%E7%BB%84%E7%9A%84%E9%95%BF%E5%BA%A6%EF%BC%8C%E5%A6%82%E6%9E%9C%E4%B8%BA0%EF%BC%8C%E6%88%96%E4%B8%BA1%E4%BD%86%E8%A6%81%E5%88%A0%E9%99%A4%EF%BC%8C%E5%88%99%E7%A7%BB%E9%99%A4%E7%BB%91%E5%AE%9A%E5%9C%A8elem%E4%B8%8ADOM%E4%BA%8B%E4%BB%B6%20%0A8.%20%E6%9C%80%E5%90%8E%E7%9A%84%E6%9C%80%E5%90%8E%EF%BC%8C%E5%A6%82%E6%9E%9Celem%E5%AF%B9%E5%BA%94%E7%9A%84%E6%89%80%E6%9C%89%E4%BA%8B%E4%BB%B6%E5%8F%A5%E6%9F%84events%E9%83%BD%E5%B7%B2%E5%88%A0%E9%99%A4%EF%BC%8C%E5%88%99%E4%BB%8E%E7%BC%93%E5%AD%98%E4%B8%AD%E7%A7%BB%E8%B5%B0elem%E7%9A%84%E5%86%85%E9%83%A8%E6%95%B0%E6%8D%AE%0A9.%20%E5%9C%A8%E4%BB%A5%E4%B8%8A%E7%9A%84%E5%90%84%E4%B8%AA%E8%BF%87%E7%A8%8B%EF%BC%8C%E9%83%BD%E8%A6%81%E6%A3%80%E6%9F%A5%E6%98%AF%E5%90%A6%E6%9C%89%E7%89%B9%E4%BE%8B%E9%9C%80%E8%A6%81%E5%A4%84%E7%90%86%20%0A%E7%9C%8B%E7%9C%8B%E5%AE%83%E7%9A%84%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90%EF%BC%9A%0AjQuery.event%20%3D%20%7B%0A%09%2F%2F%20...%0A%09%2F**%0A%09%20*%20%E7%A7%BB%E9%99%A4%E5%85%83%E7%B4%A0elem%E4%B8%8A%E7%9A%84%E4%B8%80%E4%B8%AA%E6%88%96%E5%A4%9A%E4%B8%AA%E6%88%96%E4%B8%80%E7%BB%84%E4%BA%8B%E4%BB%B6%0A%09%20*%20pos%20%E6%8C%87%E8%A6%81%E7%A7%BB%E9%99%A4%E7%9A%84%E6%98%AF%E7%AC%AC%E5%87%A0%E4%B8%AAtypes%E4%BA%8B%E4%BB%B6%EF%BC%8C%E5%8F%AF%E4%BB%A5%E5%87%8F%E5%B0%91%E9%81%8D%E5%8E%86%E6%AC%A1%E6%95%B0%0A%09%20*%20handler%E7%9A%84%E5%B1%9E%E6%80%A7guid%E5%94%AF%E4%B8%80%E6%A0%87%E8%AF%86%E6%9F%90%E4%B8%AA%E4%BA%8B%E4%BB%B6%E5%AF%B9%E8%B1%A1%EF%BC%8C%E7%A7%BB%E9%99%A4%E6%97%B6%E9%80%9A%E8%BF%87%E6%AF%94%E8%BE%83guid%E6%98%AF%E5%90%A6%E7%9B%B8%E7%AD%89%0A%09%20*%2F%20%0A%09remove%3A%20function(%20elem%2C%20types%2C%20handler%2C%20pos%20)%20%7B%20%2F%2F%20add%2Fremove%E9%83%BD%E6%98%AF%E4%BD%9C%E4%B8%BAjQuery%E5%86%85%E9%83%A8%E6%8E%A5%E5%8F%A3%E4%BD%BF%E7%94%A8%0A%09%09%2F%2F%20don&#39;t%20do%20events%20on%20text%20and%20comment%20nodes%0A%09%09%2F%2F%20%E5%BF%BD%E7%95%A5%E6%96%87%E6%9C%AC%E5%85%83%E7%B4%A0Text%E5%92%8C%E6%B3%A8%E9%87%8A%E5%85%83%E7%B4%A0Comment%0A%09%09if%20(%20elem.nodeType%20%3D%3D%3D%203%20%7C%7C%20elem.nodeType%20%3D%3D%3D%208%20)%20%7B%0A%09%09%09return%3B%0A%09%09%7D%0A%0A%09%09if%20(%20handler%20%3D%3D%3D%20false%20)%20%7B%20%2F%2F%20%E6%9B%BF%E6%8D%A2%E5%B8%83%E5%B0%94%E5%9E%8Bhandler%E4%B8%BA%E5%87%BD%E6%95%B0%EF%BC%8C%E4%BF%9D%E8%AF%81handler%E5%A7%8B%E7%BB%88%E6%98%AF%E4%B8%80%E4%B8%AA%E5%87%BD%E6%95%B0%EF%BC%8C%E4%BD%BF%E5%BE%97remove%E6%8E%A5%E5%8F%A3%E7%9A%84%E4%BD%BF%E7%94%A8%E6%9B%B4%E5%8A%A0%E4%BE%BF%E6%8D%B7%0A%09%09%09handler%20%3D%20returnFalse%3B%0A%09%09%7D%0A%0A%09%09var%20ret%2C%20type%2C%20fn%2C%20j%2C%20i%20%3D%200%2C%20all%2C%20namespaces%2C%20namespace%2C%20special%2C%20eventType%2C%20handleObj%2C%20origType%2C%0A%09%09%09elemData%20%3D%20jQuery.hasData(%20elem%20)%20%26%26%20jQuery._data(%20elem%20)%2C%20%2F%2F%20%E5%A6%82%E6%9E%9C%E5%9C%A8%E7%BC%93%E5%AD%98cache%E4%B8%AD%E6%9C%89%E6%95%B0%E6%8D%AE%EF%BC%8C%E5%88%99%E5%8F%96%E5%87%BA%EF%BC%8C%E5%90%A6%E5%88%99elemData%E4%B8%BAundefine%0A%09%09%09%2F%2F%20%E5%9B%A0%E4%B8%BAjQuery._data%E6%80%BB%E6%98%AF%E8%BF%94%E5%9B%9E%E4%B8%80%E4%B8%AA%E5%AF%B9%E8%B1%A1%EF%BC%8C%E5%9B%A0%E6%AD%A4%E8%A6%81%E5%85%88%E5%88%A4%E6%96%AD%E7%BC%93%E5%AD%98cache%E4%B8%AD%E6%98%AF%E5%90%A6%E6%9C%89%E6%95%B0%E7%BB%84%0A%09%09%09events%20%3D%20elemData%20%26%26%20elemData.events%3B%20%2F%2F%20%E5%8F%96%E5%87%BA%E4%BA%8B%E4%BB%B6%E5%8F%A5%E6%9F%84%E6%95%B0%E7%BB%84%EF%BC%8C%E7%94%A8%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E5%8F%AF%E4%BB%A5%E5%B0%86%E5%A4%9A%E8%A1%8C%E4%BB%A3%E7%A0%81%E5%90%88%E5%B9%B6%E4%B8%BA%E4%B8%80%E8%A1%8C%EF%BC%8C%E8%BF%99%E9%87%8C%E5%8F%AF%E4%BB%A5%E7%94%A8if-else%E6%88%96%E4%B8%89%E5%85%83%E8%A1%A8%E8%BE%BE%E5%BC%8F%E4%BB%A3%E6%9B%BF%0A%0A%09%09if%20(%20!elemData%20%7C%7C%20!events%20)%20%7B%20%2F%2F%20%E5%A6%82%E6%9E%9C%E6%9C%AA%E7%BB%91%E5%AE%9A%EF%BC%8C%E5%88%99%E5%BF%BD%E7%95%A5%E6%9C%AC%E6%AC%A1%E8%B0%83%E7%94%A8%EF%BC%8C%E7%9B%B4%E6%8E%A5%E8%BF%94%E5%9B%9E%0A%09%09%09return%3B%0A%09%09%7D%0A%0A%09%09%2F%2F%20types%20is%20actually%20an%20event%20object%20here%0A%09%09%2F%2F%20%E5%A6%82%E6%9E%9Ctypes%E6%98%AF%E4%B8%80%E4%B8%AAjQuery%20Event%E5%AF%B9%E8%B1%A1%EF%BC%8C%E5%88%99%E3%80%82%E3%80%82%E3%80%82%0A%09%09if%20(%20types%20%26%26%20types.type%20)%20%7B%0A%09%09%09handler%20%3D%20types.handler%3B%0A%09%09%09types%20%3D%20types.type%3B%0A%09%09%7D%0A%0A%09%09%2F%2F%20Unbind%20all%20events%20for%20the%20element%0A%09%09%2F%2F%20%E5%A6%82%E6%9E%9Ctypes%E4%B8%BAfalse%EF%BC%88%E5%BC%BA%E5%88%B6%E8%BD%AC%E6%8D%A2%E7%B1%BB%E5%9E%8B%EF%BC%89%EF%BC%8C%E5%88%99%E7%A7%BB%E9%99%A4%E6%89%80%E6%9C%89%E4%BA%8B%E4%BB%B6%0A%09%09%2F%2F%20%E5%A6%82%E6%9E%9Ctypes%E6%98%AF%E5%AD%97%E7%AC%A6%E4%B8%B2%EF%BC%8C%E5%B9%B6%E4%B8%94%E4%BB%A5%E5%8F%A5%E5%8F%B7%E5%BC%80%E5%A4%B4%EF%BC%8C%E5%88%99%E7%A7%BB%E9%99%A4types%E5%91%BD%E5%90%8D%E7%A9%BA%E9%97%B4%E4%B8%8B%E7%9A%84%E6%8C%87%E5%AE%9A%E4%BA%8B%E4%BB%B6%EF%BC%88type%2Btypes%EF%BC%89%0A%09%09if%20(%20!types%20%7C%7C%20typeof%20types%20%3D%3D%3D%20%22string%22%20%26%26%20types.charAt(0)%20%3D%3D%3D%20%22.%22%20)%20%7B%0A%09%09%09types%20%3D%20types%20%7C%7C%20%22%22%3B%0A%0A%09%09%09for%20(%20type%20in%20events%20)%20%7B%20%2F%2F%20%E9%81%8D%E5%8E%86events%EF%BC%8C%E7%A7%BB%E9%99%A4%E6%89%80%E6%9C%89%E5%B7%B2%E7%BB%91%E5%AE%9A%E7%9A%84%E4%BA%8B%E4%BB%B6%EF%BC%8C%E8%BF%99%E9%87%8C%E6%98%AF%E8%BF%AD%E4%BB%A3%E8%B0%83%E7%94%A8%EF%BC%8CjQuery%E7%9A%84%E6%BA%90%E7%A0%81%E5%BE%88%E7%B2%BE%E8%87%B4%EF%BC%8C%E8%83%BD%E5%A4%8D%E7%94%A8%E7%9A%84%E4%BB%A3%E7%A0%81%E4%BC%9A%E5%B0%BD%E9%87%8F%E5%A4%8D%E7%94%A8%0A%09%09%09%09jQuery.event.remove(%20elem%2C%20type%20%2B%20types%20)%3B%20%2F%2F%20%E5%85%A8%E9%83%A8%E4%BA%8B%E4%BB%B6%EF%BC%8C%E6%88%96%E6%9F%90%E4%B8%80%E5%91%BD%E5%90%8D%E7%A9%BA%E9%97%B4%E4%B8%8B%E7%9A%84%E5%85%A8%E9%83%A8%E4%BA%8B%E4%BB%B6%0A%09%09%09%7D%0A%0A%09%09%09return%3B%0A%09%09%7D%0A%0A%09%09%2F%2F%20Handle%20multiple%20events%20separated%20by%20a%20space%0A%09%09%2F%2F%20jQuery(...).unbind(%22mouseover%20mouseout%22%2C%20fn)%3B%0A%09%09%2F%2F%20%E5%90%8C%E6%97%B6%E7%A7%BB%E9%99%A4%E5%A4%9A%E4%B8%AA%E4%BA%8B%E4%BB%B6%EF%BC%8C%E4%BA%8B%E4%BB%B6%E4%B9%8B%E9%97%B4%E7%94%A8%E7%A9%BA%E6%A0%BC%E9%9A%94%E5%BC%80%EF%BC%8C%E4%BD%BF%E5%BE%97remove%E6%8E%A5%E5%8F%A3%E5%BE%88%E7%81%B5%E6%B4%BB%0A%09%09types%20%3D%20types.split(%22%20%22)%3B%0A%0A%09%09%2F%2F%20%E4%B8%AA%E4%BA%BA%E8%A7%89%E7%9A%84%E5%8F%98%E9%87%8Fi%E7%9A%84%E5%AE%9A%E4%B9%89%E4%B8%8E%E4%BD%BF%E7%94%A8%E7%A6%BB%E5%BE%97%E9%82%A3%E4%B9%88%E8%BF%9C%EF%BC%8C%E4%B8%8D%E6%98%AF%E5%A5%BD%E4%B9%A0%E6%83%AF%EF%BC%8C%E5%83%8F%E8%BF%99%E7%A7%8D%E5%B1%80%E9%83%A8%E4%BD%BF%E7%94%A8%E7%9A%84%E5%8F%98%E9%87%8F%EF%BC%8C%E5%BA%94%E8%AF%A5%E5%93%AA%E9%87%8C%E7%94%A8%E5%B0%B1%E5%9C%A8%E5%93%AA%E9%87%8C%E5%AE%9A%E4%B9%89%0A%09%09%2F%2F%20%E5%8F%AF%E8%83%BD%E4%BD%9C%E8%80%85%E8%A7%89%E5%BE%97%E9%9B%86%E4%B8%AD%E5%AE%9A%E4%B9%89%E6%98%BE%E5%BE%97%E4%BB%A3%E7%A0%81%E4%B8%8D%E5%87%8C%E4%B9%B1%E5%90%A7%0A%09%09while%20(%20(type%20%3D%20types%5B%20i%2B%2B%20%5D)%20)%20%7B%20%2F%2F%20%E6%9C%89%E4%B8%80%E7%A7%8D%E5%BE%AA%E7%8E%AF%E6%96%B9%E5%BC%8F%0A%09%09%09origType%20%3D%20type%3B%0A%09%09%09handleObj%20%3D%20null%3B%0A%09%09%09all%20%3D%20type.indexOf(%22.%22)%20%3C%200%3B%20%2F%2F%20all%E5%9C%A8%E8%BF%99%E9%87%8C%E8%A1%A8%E7%A4%BA%E7%A7%BB%E9%99%A4%E7%9A%84%E6%98%AFtype%E5%91%BD%E5%90%8D%E7%A9%BA%E9%97%B4%E4%B8%8B%E7%9A%84%E5%85%A8%E9%83%A8%E4%BA%8B%E4%BB%B6%E5%AF%B9%E8%B1%A1%EF%BC%8C%E5%B0%8F%E4%BA%8E0%E8%A1%A8%E7%A4%BA%E4%B8%8D%E6%98%AF%E4%BB%A5.%E5%BC%80%E5%A4%B4%0A%09%09%09%2F%2F%20all%E4%B8%BAtrue%E8%A1%A8%E7%A4%BA%E6%98%AF%E4%BA%8B%E4%BB%B6%EF%BC%8Cfalse%E8%A1%A8%E7%A4%BA%E5%91%BD%E5%90%8D%E7%A9%BA%E9%97%B4%0A%09%09%09namespaces%20%3D%20%5B%5D%3B%0A%0A%09%09%09if%20(%20!all%20)%20%7B%20%2F%2F%20%E5%A6%82%E6%9E%9C%E4%BB%A5.%E5%BC%80%E5%A4%B4%EF%BC%8C%E5%8D%B3type%E6%98%AF%E5%91%BD%E5%90%8D%E7%A9%BA%E9%97%B4%EF%BC%8C%E6%9E%84%E5%BB%BA%E5%91%BD%E5%90%8D%E7%A9%BA%E9%97%B4%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%0A%09%09%09%09%2F%2F%20Namespaced%20event%20handlers%0A%09%09%09%09namespaces%20%3D%20type.split(%22.%22)%3B%20%2F%2F%20%E5%85%A8%E9%83%A8%E5%91%BD%E5%90%8D%E7%A9%BA%E9%97%B4%0A%09%09%09%09type%20%3D%20namespaces.shift()%3B%20%2F%2F%20%E5%8F%96%E5%87%BA%E7%AC%AC%E4%B8%80%E4%B8%AA%E4%BD%9C%E4%B8%BA%E4%BA%8B%E4%BB%B6%E7%B1%BB%E5%9E%8B%EF%BC%8C%E5%85%B6%E4%BD%99%E7%9A%84%E4%B8%BA%E5%91%BD%E5%90%8D%E7%A9%BA%E9%97%B4%0A%0A%09%09%09%09namespace%20%3D%20new%20RegExp(%22(%5E%7C%5C%5C.)%22%20%2B%0A%09%09%09%09%09jQuery.map(%20namespaces.slice(0).sort()%2C%20fcleanup%20).join(%22%5C%5C.(%3F%3A.*%5C%5C.)%3F%22)%20%2B%20%22(%5C%5C.%7C%24)%22)%3B%0A%09%09%09%09%2F%2F%20%E8%BF%99%E9%87%8C%E8%A6%81%E5%8A%A8%E6%80%81%E5%88%9B%E5%BB%BA%E6%AD%A3%E5%88%99%EF%BC%8C%E5%9B%A0%E6%AD%A4%E7%94%A8%E4%BA%86%20new%20RegExp%20%E7%9A%84%E6%96%B9%E5%BC%8F%0A%09%09%09%7D%0A%0A%09%09%09eventType%20%3D%20events%5B%20type%20%5D%3B%20%2F%2F%20%E5%8F%96%E5%87%BAtype%E5%AF%B9%E5%BA%94%E7%9A%84%E4%BA%8B%E4%BB%B6%E5%AF%B9%E8%B1%A1%E6%95%B0%E7%BB%84%0A%0A%09%09%09if%20(%20!eventType%20)%20%7B%20%2F%2F%20%E5%A6%82%E6%9E%9Ctype%E5%AF%B9%E5%BA%94%E7%9A%84%E4%BA%8B%E4%BB%B6%E5%AF%B9%E8%B1%A1%E6%95%B0%E7%BB%84%E4%B8%8D%E5%AD%98%E5%9C%A8%EF%BC%8C%E5%88%99%E8%B7%B3%E8%BF%87%E6%9C%AC%E6%AC%A1%E5%BE%AA%E7%8E%AF%EF%BC%88%E6%97%A2%E7%84%B6%E4%B8%8D%E5%AD%98%E5%9C%A8%E5%B0%B1%E4%B8%8D%E5%BF%85%E7%A7%BB%E9%99%A4%E4%BA%86%EF%BC%89%0A%09%09%09%09continue%3B%0A%09%09%09%7D%0A%0A%09%09%09if%20(%20!handler%20)%20%7B%20%2F%2F%20%E6%B2%A1%E6%9C%89%E6%8C%87%E5%AE%9A%E7%A7%BB%E9%99%A4%E5%93%AA%E4%B8%AA%E4%BA%8B%E4%BB%B6%E5%AF%B9%E8%B1%A1%EF%BC%8Chandler%E5%85%B6%E5%AE%9E%E6%98%AF%E4%B8%80%E4%B8%AA%E5%B8%A6%E6%9C%89guid%E5%B1%9E%E6%80%A7%E7%9A%84%E5%87%BD%E6%95%B0%EF%BC%8C%E5%9B%A0%E4%B8%BA%E9%80%9A%E8%BF%87guid%E5%8F%AF%E4%BB%A5%E6%89%BE%E5%88%B0%E5%AF%B9%E5%BA%94%E7%9A%84%E4%BA%8B%E4%BB%B6%E5%AF%B9%E8%B1%A1%EF%BC%8C%E5%9B%A0%E6%AD%A4%E8%BF%99%E9%87%8C%E4%BE%9D%E7%84%B6%E7%A7%B0handler%E4%B8%BA%E4%BA%8B%E4%BB%B6%E5%AF%B9%E8%B1%A1%0A%09%09%09%09for%20(%20j%20%3D%200%3B%20j%20%3C%20eventType.length%3B%20j%2B%2B%20)%20%7B%20%2F%2F%20%E9%81%8D%E5%8E%86%E4%BA%8B%E4%BB%B6%E5%AF%B9%E8%B1%A1%E6%95%B0%E7%BB%84%EF%BC%8C%E8%BF%99%E9%87%8C%E5%9B%A0%E4%B8%BA%E6%98%AF%E9%81%8D%E5%8E%86%E4%B8%80%E4%B8%AA%E5%8A%A8%E6%80%81%E7%9A%84%E6%95%B0%E7%BB%84%EF%BC%8C%E6%89%80%E4%BB%A5%E6%B2%A1%E6%9C%89%E5%AE%9A%E4%B9%89eventType.length%E5%8F%98%E9%87%8F%0A%09%09%09%09%09handleObj%20%3D%20eventType%5B%20j%20%5D%3B%0A%0A%09%09%09%09%09if%20(%20all%20%7C%7C%20namespace.test(%20handleObj.namespace%20)%20)%20%7B%20%2F%2F%20%E5%A6%82%E6%9E%9C%E6%98%AF%E4%BA%8B%E4%BB%B6%E6%88%96%E5%91%BD%E5%90%8D%E7%A9%BA%E9%97%B4%E5%8C%B9%E9%85%8D%0A%09%09%09%09%09%09jQuery.event.remove(%20elem%2C%20origType%2C%20handleObj.handler%2C%20j%20)%3B%20%2F%2F%20%E5%8F%96%E5%87%BA%E4%BA%8B%E4%BB%B6%E5%AF%B9%E8%B1%A1%EF%BC%8C%E8%BF%AD%E4%BB%A3%E8%B0%83%E7%94%A8remove%E6%8E%A5%E5%8F%A3%0A%09%09%09%09%09%09%2F%2F%20handleObj.handler%E6%9C%89guid%E5%B1%9E%E6%80%A7%EF%BC%8C%E5%9B%A0%E6%AD%A4%E8%BF%AD%E4%BB%A3%E8%B0%83%E7%94%A8remove%E4%BE%9D%E7%84%B6%E5%8F%AF%E4%BB%A5%E5%8C%B9%E9%85%8D%E5%88%B0%E5%AF%B9%E5%BA%94handleObj%EF%BC%8C%E4%BA%8B%E5%AE%9E%E4%B8%8A%E8%BF%99%E9%87%8C%E4%B9%9F%E5%8F%AF%E4%BB%A5%E6%94%B9%E5%86%99%E4%B8%BA%E4%BC%A0%E5%85%A5handleObj%0A%09%09%09%09%09%09%2F%2F%20%E6%B3%A8%E6%84%8F%E6%9C%80%E5%90%8E%E4%B8%80%E4%B8%AA%E5%8F%82%E6%95%B0j%EF%BC%8Cremove%E7%9A%84pos%E4%B8%8D%E4%B8%BAnull%EF%BC%8C%E5%B0%B1%E4%B8%8D%E4%BC%9A%E5%9C%A8%E5%85%B6%E4%BB%96%E5%9C%B0%E6%96%B9%E8%A2%ABsplice%E5%88%A0%E9%99%A4%EF%BC%8C%E6%89%80%E4%BB%A5%E4%B8%8B%E4%B8%80%E8%A1%8C%E6%89%8D%E4%BC%9Asplice%EF%BC%88%E8%BF%99%E4%B8%AA%E9%97%AE%E9%A2%98%E7%9A%84%E5%A4%84%E7%90%86%E5%A4%AA%E4%B9%B1%E4%BA%86%EF%BC%89%0A%09%09%09%09%09%09eventType.splice(%20j--%2C%201%20)%3B%20%2F%2F%20%E5%A6%82%E6%9E%9C%E5%BE%AA%E7%8E%AF%E9%81%8D%E5%8E%86%E7%9A%84%E6%98%AF%E4%B8%80%E4%B8%AA%E5%8F%98%E5%8C%96%E7%9A%84%E6%95%B0%E7%BB%84%EF%BC%8C%E5%88%99%E5%8F%AF%E4%BB%A5%E7%94%A8%E8%BF%99%E7%A7%8D%E6%96%B9%E5%BC%8F%EF%BC%9Aj%2B%2B%E4%B9%8B%E5%89%8D%E5%85%88%E6%89%A7%E8%A1%8Cj--%EF%BC%8C%E4%BF%9D%E8%AF%81%E4%B8%8D%E4%BC%9A%E5%9B%A0%E4%B8%BA%E6%95%B0%E7%BB%84%E4%B8%8B%E6%A0%87%E7%9A%84%E9%94%99%E8%AF%AF%E5%AF%BC%E8%87%B4%E6%9F%90%E4%BA%9B%E6%95%B0%E7%BB%84%E5%85%83%E7%B4%A0%E9%81%8D%E5%8E%86%E4%B8%8D%E5%88%B0%EF%BC%8C%E7%A7%80%EF%BC%81%0A%09%09%09%09%09%7D%0A%09%09%09%09%7D%0A%09%09%09%09%2F%2F%20%E5%A6%82%E6%9E%9C%E6%9C%AA%E6%8C%87%E5%AE%9A%E5%88%A0%E9%99%A4%E5%93%AA%E4%B8%AA%E4%BA%8B%E4%BB%B6%E5%8F%A5%E6%9F%84%EF%BC%8C%E5%88%99%E5%88%A0%E9%99%A4%E4%BA%8B%E4%BB%B6%E7%B1%BB%E5%9E%8B%E5%AF%B9%E5%BA%94%E7%9A%84%E5%85%A8%E9%83%A8%E5%8F%A5%E6%9F%84%EF%BC%8C%E6%88%96%E8%80%85%E4%B8%8E%E5%91%BD%E5%90%8D%E7%A9%BA%E9%97%B4%E5%8C%B9%E9%85%8D%E7%9A%84%E5%85%A8%E9%83%A8%E5%8F%A5%E6%9F%84%0A%09%09%09%09%2F%2F%20%E8%BF%99%E9%87%8C%E5%AF%B9%24.cache%E7%9A%84%E6%93%8D%E4%BD%9C%EF%BC%8C%E6%98%AF%E9%80%9A%E8%BF%87%E5%AF%B9%20eventType%20%3D%20jQuery._data(%20elem%20).events%5B%20type%20%5D%E7%9A%84%E7%9B%B4%E6%8E%A5%E6%93%8D%E4%BD%9C%E8%BF%9B%E8%A1%8C%E7%BB%B4%E6%8A%A4%EF%BC%8C%E7%9B%B4%E6%8E%A5%E6%93%8D%E4%BD%9C%E4%BA%8B%E4%BB%B6%E5%8F%A5%E6%9F%84%E6%95%B0%E7%BB%84%0A%09%09%09%09%2F%2F%20%E5%A6%82%E6%9E%9C%E6%98%AF%E6%88%91%EF%BC%8C%E5%8F%AF%E8%83%BD%E4%BC%9A%E5%86%8D%E5%BC%80%E5%8F%91%E4%B8%80%E4%B8%AA%E6%8E%A5%E5%8F%A3%E4%BE%9B%E5%AE%A2%E6%88%B7%E7%AB%AF%E8%BF%9B%E8%A1%8C%E8%BF%99%E7%A7%8D%E5%BE%AE%E6%93%8D%EF%BC%8C%E5%85%B6%E5%AE%9E%E6%B2%A1%E5%BF%85%E8%A6%81%E3%80%82%0A%09%09%09%09continue%3B%0A%09%09%09%7D%0A%0A%09%09%09%2F%2F%20%E5%88%B0%E8%BF%99%E9%87%8C%EF%BC%8C%E8%AF%B4%E6%98%8E%E6%8C%87%E5%AE%9A%E4%BA%8B%E4%BB%B6%E5%8F%A5%E6%9F%84handler%0A%09%09%09%0A%09%09%09special%20%3D%20jQuery.event.special%5B%20type%20%5D%20%7C%7C%20%7B%7D%3B%20%2F%2F%20%E7%89%B9%E4%BE%8B%0A%0A%09%09%09%2F%2F%20%E5%A6%82%E6%9E%9C%E6%B2%A1%E6%9C%89%E6%8C%87%E5%AE%9Apos%EF%BC%8C%E5%88%99%E9%BB%98%E8%AE%A4%E4%BB%8E0%E5%BC%80%E5%A7%8B%E9%81%8D%E5%8E%86%EF%BC%8C%E8%BF%99%E9%87%8C%E7%9A%84pos%E5%8F%AF%E4%BB%A5%E5%87%8F%E5%B0%91%E9%81%8D%E5%8E%86%E6%AC%A1%E6%95%B0%EF%BC%8C%E6%8F%90%E9%AB%98%E6%80%A7%E8%83%BD%EF%BC%8C%E5%A4%9A%E4%B9%88%E7%B2%BE%E8%87%B4%E7%9A%84%E4%BB%A3%E7%A0%81%0A%09%09%09%2F%2F%20%E6%9C%AC%E4%BA%BA%E5%96%9C%E6%AC%A2%E8%BF%99%E7%A7%8D%E6%9E%81%E8%87%B4%E7%9A%84%E4%BB%A3%E7%A0%81%EF%BC%8C%E6%9B%B4%E5%96%9C%E6%AC%A2%E4%BC%98%E9%9B%85%E7%9A%84%E4%BB%A3%E7%A0%81%EF%BC%8C%E6%9B%B4%E6%B3%A8%E9%87%8D%E4%BB%A3%E7%A0%81%E7%9A%84%E5%8F%AF%E8%AF%BB%E6%80%A7%EF%BC%8C%E7%A8%8D%E5%BE%AE%E7%9A%84%E6%80%A7%E8%83%BD%E4%B8%8B%E9%99%8D%E5%8F%AF%E4%BB%A5%E6%8E%A5%E5%8F%97%0A%09%09%09for%20(%20j%20%3D%20pos%20%7C%7C%200%3B%20j%20%3C%20eventType.length%3B%20j%2B%2B%20)%20%7B%0A%09%09%09%09handleObj%20%3D%20eventType%5B%20j%20%5D%3B%0A%0A%09%09%09%09if%20(%20handler.guid%20%3D%3D%3D%20handleObj.guid%20)%20%7B%20%2F%2F%20%E6%AF%94%E8%BE%83%E4%BA%8B%E4%BB%B6%E5%87%BD%E6%95%B0%E7%9A%84guid%E5%92%8C%E6%97%B6%E9%97%B4%E5%AF%B9%E8%B1%A1%E7%9A%84guid%EF%BC%8C%3D%3D%3D%E5%8F%AF%E4%BB%A5%E9%81%BF%E5%85%8D%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2%EF%BC%8C%E7%A8%8D%E5%BE%AE%E6%8F%90%E9%AB%98%E6%80%A7%E8%83%BD%0A%09%09%09%09%09%2F%2F%20remove%20the%20given%20handler%20for%20the%20given%20type%0A%09%09%09%09%09if%20(%20all%20%7C%7C%20namespace.test(%20handleObj.namespace%20)%20)%20%7B%0A%09%09%09%09%09%09if%20(%20pos%20%3D%3D%20null%20)%20%7B%20%2F%2F%20%E5%A6%82%E6%9E%9C%E6%B2%A1%E6%9C%89%E6%8C%87%E5%AE%9Apos%EF%BC%8C%E5%8C%B9%E9%85%8D%E5%88%B0%E5%90%8E%E5%B0%B1%E5%88%A0%E9%99%A4%0A%09%09%09%09%09%09%09eventType.splice(%20j--%2C%201%20)%3B%20%2F%2F%20j%2B%2B%E4%B9%8B%E5%89%8D%E5%85%88j--%EF%BC%8C%E9%81%BF%E5%85%8D%E6%95%B0%E7%BB%84%E5%8F%98%E5%8C%96%E5%AF%BC%E8%87%B4%E9%81%8D%E5%8E%86%E9%94%99%E8%AF%AF%0A%09%09%09%09%09%09%7D%0A%0A%09%09%09%09%09%09if%20(%20special.remove%20)%20%7B%20%2F%2F%20%E5%A6%82%E6%9E%9C%E6%9C%89%E8%87%AA%E5%AE%9A%E4%B9%89%E7%9A%84remove%E6%96%B9%E6%B3%95%EF%BC%8C%E5%88%99%E8%B0%83%E7%94%A8%EF%BC%88%E4%BC%BC%E4%B9%8E%E5%8F%AA%E6%9C%89live%E6%9C%89add%20remove%E6%96%B9%E6%B3%95%EF%BC%89%0A%09%09%09%09%09%09%09special.remove.call(%20elem%2C%20handleObj%20)%3B%0A%09%09%09%09%09%09%7D%0A%09%09%09%09%09%7D%0A%09%09%09%09%09%2F%2F%20%E5%9B%A0%E4%B8%BAguid%E6%98%AF%E5%85%A8%E5%B1%80%E5%94%AF%E4%B8%80%E7%9A%84%EF%BC%8C%E6%89%80%E4%BB%A5%E5%8C%B9%E9%85%8D%E5%88%B0guid%E5%AF%B9%E5%BA%94%E7%9A%84%E4%BA%8B%E4%BB%B6%E5%B0%B1%E5%8F%AF%E4%BB%A5%E9%80%80%E5%87%BA%E4%BA%86%0A%09%09%09%09%09if%20(%20pos%20!%3D%20null%20)%20%7B%20%2F%2F%20%E5%A6%82%E6%9E%9Cpos%E4%B8%8D%E4%B8%BAnull%EF%BC%8C%E8%AF%B4%E6%98%8E%E6%98%AF%E8%A6%81%E5%88%A0%E9%99%A4%E6%8C%87%E5%AE%9A%E7%9A%84%E4%BA%8B%E4%BB%B6%E5%AF%B9%E8%B1%A1%EF%BC%8C%E4%BB%BB%E5%8A%A1%E5%AE%8C%E6%88%90%EF%BC%8C%E9%80%80%E5%87%BA%0A%09%09%09%09%09%09break%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%7D%0A%09%09%09%7D%0A%0A%09%09%09%2F%2F%20remove%20generic%20event%20handler%20if%20no%20more%20handlers%20exist%0A%09%09%09%2F%2F%20%E5%A6%82%E6%9E%9Ctype%E5%AF%B9%E5%BA%94%E7%9A%84%E4%BA%8B%E4%BB%B6%E5%AF%B9%E8%B1%A1%E6%95%B0%E7%BB%84%E4%B8%BA%E7%A9%BA%EF%BC%8C%E6%88%96%E8%80%85%E5%8F%91%E7%8E%B0%E5%8F%AA%E5%89%A9%E4%B8%80%E4%B8%AA%EF%BC%8C%E5%88%99%E7%A7%BB%E9%99%A4%E7%BB%91%E5%AE%9A%E5%9C%A8elem%E4%B8%8A%E6%B5%8F%E8%A7%88%E5%99%A8%E5%8E%9F%E7%94%9F%E4%BA%8B%E4%BB%B6%0A%09%09%09if%20(%20eventType.length%20%3D%3D%3D%200%20%7C%7C%20pos%20!%3D%20null%20%26%26%20eventType.length%20%3D%3D%3D%201%20)%20%7B%0A%09%09%09%09%2F%2F%20%E6%A3%80%E6%9F%A5special%E6%98%AF%E5%90%A6%E6%9C%89%E8%87%AA%E5%AE%9A%E4%B9%89%E7%9A%84teardown%EF%BC%8C%E4%BC%98%E5%85%88%E8%B0%83%E7%94%A8%0A%09%09%09%09%2F%2F%20%E8%BF%99%E4%B8%80%E8%A1%8C%E7%9A%84%E5%B7%A7%E5%A6%99%E6%94%AF%E5%87%BA%E5%9C%A8%E4%BA%8E%EF%BC%9A%0A%09%09%09%09%2F%2F%201.%20special%E4%B8%8D%E4%BC%9A%E4%B8%BAnull%E6%88%96undefined%EF%BC%8C%E5%A6%82%E6%9E%9C%E6%B2%A1%E6%9C%89%E6%89%BE%E5%88%B0%E4%BC%9A%E8%A2%AB%E8%B5%8B%E5%80%BC%E4%B8%BA%7B%7D%EF%BC%8C%E6%98%AF%E7%A9%BA%E8%AE%BE%E7%BD%AE%E6%A8%A1%E5%BC%8F%E7%9A%84%E5%BA%94%E7%94%A8%0A%09%09%09%09%2F%2F%202.%20%E9%A6%96%E5%85%88%E5%B7%A7%E5%A6%99%E7%9A%84%E5%88%A4%E6%96%ADspecial.teardown%E6%98%AF%E5%90%A6%E5%AD%98%E5%9C%A8%EF%BC%8C%E5%A6%82%E6%9E%9C%E4%B8%8D%E5%AD%98%E5%9C%A8%E5%88%99%E8%AE%A4%E4%B8%BA%E6%98%AF%E6%99%AE%E9%80%9A%E4%BA%8B%E4%BB%B6%EF%BC%8C%E5%A6%82%E6%9E%9C%E5%AD%98%E5%9C%A8%E5%88%99%E5%8F%AF%E4%BB%A5%E8%B0%83%E7%94%A8teardown%0A%09%09%09%09%2F%2F%203.%20%E5%9C%A8jQuery%E6%BA%90%E7%A0%81%E4%B8%AD%E4%BD%A0%E7%9C%8B%E5%88%B0%E8%BF%87%E6%B2%A1%E6%9C%89%E8%BF%94%E5%9B%9E%E5%80%BC%E7%9A%84%E5%87%BD%E6%95%B0%E7%A0%81%EF%BC%9F%E4%BC%BC%E4%B9%8E%E6%B2%A1%E6%9C%89%EF%BC%8Cteardown%E8%BF%94%E5%9B%9Efalse%E8%A1%A8%E7%A4%BA%E5%A4%B1%E8%B4%A5%EF%BC%8C%E8%BF%98%E5%BE%97%E7%94%A8%E6%99%AE%E9%80%9A%E6%96%B9%E5%BC%8F%E5%88%A0%E9%99%A4%0A%09%09%09%09if%20(%20!special.teardown%20%7C%7C%20special.teardown.call(%20elem%2C%20namespaces%20)%20%3D%3D%3D%20false%20)%20%7B%20%0A%09%09%09%09%09jQuery.removeEvent(%20elem%2C%20type%2C%20elemData.handle%20)%3B%0A%09%09%09%09%7D%0A%0A%09%09%09%09ret%20%3D%20null%3B%20%2F%2F%20%E8%BF%99%E4%B8%AA%E5%8F%98%E9%87%8F%E6%90%9E%E7%AC%91%E4%BA%86%EF%BC%8C%E8%87%AA%E4%BB%8E%E5%AE%9A%E4%B9%89%E4%B9%8B%E5%90%8E%E5%B0%B1%E4%BB%8E%E6%9D%A5%E5%B0%B1%E6%B2%A1%E7%94%A8%E8%BF%87%EF%BC%8C%E6%98%8E%E6%98%BE%E5%A4%9A%E4%BD%99%EF%BC%8C%E5%8F%AF%E4%BB%A5%E9%81%97%E7%95%99%E4%BB%A3%E7%A0%81%E9%87%8C%E7%9A%84%E5%8F%98%E9%87%8F%E5%90%A7%0A%09%09%09%09delete%20events%5B%20type%20%5D%3B%20%2F%2F%20%E5%88%A0%E9%99%A4%E7%B1%BB%E5%9E%8B%E5%B1%9E%E6%80%A7%EF%BC%8C%E8%BF%98%E6%98%AF%E7%9B%B4%E6%8E%A5%E5%AF%B9%E6%95%B0%E7%BB%84%E5%8F%A5%E6%9F%84%E6%95%B0%E7%BB%84%E6%93%8D%E4%BD%9C%EF%BC%8C%E6%A0%B9%E6%9C%AC%E6%B2%A1%E6%9C%89%E4%BB%80%E4%B9%88%E7%BC%93%E5%AD%98%E5%BE%AE%E6%93%8D%E6%8E%A5%E5%8F%A3%0A%09%09%09%7D%0A%09%09%7D%0A%0A%09%09%2F%2F%20Remove%20the%20expando%20if%20it&#39;s%20no%20longer%20used%0A%09%09%2F%2F%20%E4%BB%8EjQuery.cache%E4%B8%AD%E7%A7%BB%E9%99%A4elem%E7%9A%84%E6%95%B0%E6%8D%AE%EF%BC%8C%E6%9C%80%E5%90%8E%E6%A3%80%E6%9F%A5elemData.events%0A%09%09if%20(%20jQuery.isEmptyObject(%20events%20)%20)%20%7B%0A%09%09%09var%20handle%20%3D%20elemData.handle%3B%0A%09%09%09if%20(%20handle%20)%20%7B%0A%09%09%09%09handle.elem%20%3D%20null%3B%20%2F%2F%20%E7%BD%AE%E7%A9%BA%EF%BC%8C%E5%88%A0%E9%99%A4%E5%AF%B9HTML%E5%85%83%E7%B4%A0%E7%9A%84%E5%BC%95%E7%94%A8%EF%BC%8C%E9%81%BF%E5%85%8D%E5%9B%A0%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E6%9C%BA%E5%88%B6%E4%B8%8D%E8%B5%B7%E4%BD%9C%E7%94%A8%E5%AF%BC%E8%87%B4%E7%9A%84%E6%B5%8F%E8%A7%88%E5%99%A8%E5%86%85%E5%AD%98%E6%B3%84%E6%BC%8F%0A%09%09%09%09%2F%2F%20%E8%BF%99%E6%98%AF%E4%B8%80%E4%B8%AA%E9%9D%9E%E5%B8%B8%E5%A5%BD%E7%9A%84%E6%8A%80%E5%B7%A7%EF%BC%8C%E6%88%91%E4%BB%AC%E5%9C%A8JavaScript%E4%B8%AD%E5%BC%95%E7%94%A8%E5%AE%8CHTML%E5%85%83%E7%B4%A0%E5%90%8E%E4%B8%80%E5%AE%9A%E8%A6%81%E7%BD%AE%E7%A9%BA%E3%80%82%0A%09%09%09%7D%0A%0A%09%09%09delete%20elemData.events%3B%20%2F%2F%20%E5%88%A0%E9%99%A4%E5%AD%98%E5%82%A8%E4%BA%8B%E4%BB%B6%E5%8F%A5%E6%9F%84%E7%9A%84%E5%AF%B9%E8%B1%A1%0A%09%09%09delete%20elemData.handle%3B%20%2F%2F%20%E5%88%A0%E9%99%A4DOM%E4%BA%8B%E4%BB%B6%E5%8F%A5%E6%9F%84%0A%0A%09%09%09if%20(%20jQuery.isEmptyObject(%20elemData%20)%20)%20%7B%20%2F%2F%20%E9%83%BD%E5%88%A0%E4%BA%86%E9%9A%BE%E9%81%93%E8%BF%98%E4%B8%8D%E6%98%AFisEmptyObject%EF%BC%9F%E6%9C%89%E7%82%B9%E5%A4%9A%E4%BD%99%EF%BC%8C%E9%99%A4%E9%9D%9E%E6%9F%90%E4%BA%9B%E6%B5%8F%E8%A7%88%E5%99%A8%E4%B8%8D%E6%94%AF%E6%8C%81delete%EF%BC%8C%E5%8F%AF%E9%97%AE%E9%A2%98%E6%98%AF%E4%B8%8D%E6%94%AF%E6%8C%81%E4%B9%9F%E5%BE%97%E7%A7%BB%E9%99%A4%E6%95%B0%E6%8D%AE%EF%BC%8C%E8%BF%98%E6%98%AF%E5%A4%9A%E4%BD%99%EF%BC%81%0A%09%09%09%09jQuery.removeData(%20elem%2C%20undefined%2C%20true%20)%3B%20%2F%2F%20%E5%BD%BB%E5%BA%95%E7%9A%84%E4%BB%8E%E7%BC%93%E5%AD%98%E4%B8%AD%E7%A7%BB%E8%B5%B0elem%E7%9A%84%E5%86%85%E9%83%A8%E6%95%B0%E6%8D%AE%EF%BC%88%E5%AD%98%E5%82%A8%E5%9C%A8%E5%B1%9E%E6%80%A7expando%E4%B8%8A%EF%BC%89%0A%09%09%09%7D%0A%09%09%7D%0A%09%7D%2C%0A%0A%09%2F%2F%20...%0A%7D%3B%0A10.6%09.live()%20.die()%0A10.6.1%09%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8%0Alive%20%E5%9C%A8%E5%8C%B9%E9%85%8D%E5%BD%93%E5%89%8D%E9%80%89%E6%8B%A9%E5%99%A8%E7%9A%84%E5%85%83%E7%B4%A0%E4%B8%8A%E7%BB%91%E5%AE%9A%E4%B8%80%E4%B8%AA%E4%BA%8B%E4%BB%B6%E5%A4%84%E7%90%86%E5%87%BD%E6%95%B0%EF%BC%8C%E5%8C%85%E6%8B%AC%E5%B7%B2%E7%BB%8F%E5%AD%98%E5%9C%A8%E7%9A%84%E5%92%8C%E6%9C%AA%E6%9D%A5%E6%B7%BB%E5%8A%A0%E7%9A%84%EF%BC%8C%E5%8D%B3%E4%BB%BB%E4%BD%95%E6%B7%BB%E5%8A%A0%E7%9A%84%E5%85%83%E7%B4%A0%E5%8F%AA%E8%A6%81%E5%8C%B9%E9%85%8D%E5%BD%93%E5%89%8D%E9%80%89%E6%8B%A9%E5%99%A8%EF%BC%8C%E5%B0%B1%E4%BC%9A%E8%A2%AB%E7%BB%91%E5%AE%9A%E4%BA%8B%E4%BB%B6%E5%A4%84%E7%90%86%E5%87%BD%E6%95%B0%0A.live(%20eventType%2C%20handler%20)%09%E5%9C%A8%E5%8C%B9%E9%85%8D%E5%BD%93%E5%89%8D%E9%80%89%E6%8B%A9%E5%99%A8%E7%9A%84%E5%85%83%E7%B4%A0%E4%B8%8A%E7%BB%91%E5%AE%9A%E4%B8%80%E4%B8%AA%E6%8C%87%E5%AE%9A%E7%B1%BB%E5%9E%8B%E7%9A%84%E4%BA%8B%E4%BB%B6%E5%A4%84%E7%90%86%E5%87%BD%E6%95%B0%0A.live(%20eventType%2C%20eventData%2C%20handler%20)%09eventData%E5%8F%AF%E4%BB%A5%E4%BC%A0%E9%80%92%E6%95%B0%E6%8D%AE%E7%BB%99%E4%BA%8B%E4%BB%B6%E5%A4%84%E7%90%86%E5%87%BD%E6%95%B0%0A.live(%20events%20)%09%E7%BB%91%E5%AE%9A%E5%A4%9A%E4%B8%AA%E4%BA%8B%E4%BB%B6%0A.die()%09%E5%88%A0%E9%99%A4%E4%B9%8B%E5%89%8D%E9%80%9A%E8%BF%87.live()%E7%BB%91%E5%AE%9A%E7%9A%84%E5%85%A8%E9%83%A8%E4%BA%8B%E4%BB%B6%E5%8F%A5%E6%9F%84%0A.die(%20eventType%20%5B%2C%20handler%5D%20)%09eventType%E6%98%AF%E5%AD%97%E7%AC%A6%E4%B8%B2%E4%BA%8B%E4%BB%B6%E7%B1%BB%E5%9E%8B%EF%BC%8C%E5%88%A0%E9%99%A4%E4%B8%80%E4%B8%AA%E6%88%96%E4%B8%80%E7%B1%BB%E4%B9%8B%E5%89%8D%E9%80%9A%E8%BF%87.live()%E7%BB%91%E5%AE%9A%E7%9A%84%E4%BA%8B%E4%BB%B6%E5%8F%A5%E6%9F%84%0A.die(%20eventTypes%20)%09eventTypes%E6%98%AFMap%E5%AF%B9%E8%B1%A1%EF%BC%8C%E5%88%A0%E9%99%A4%E5%A4%9A%E7%B1%BB%E4%BA%8B%E4%BB%B6%E5%8F%A5%E6%9F%84%0A10.6.2%09%E8%B0%83%E7%94%A8%E8%BF%87%E7%A8%8B%0A%0A.live()%E6%96%B9%E6%B3%95%E6%B0%B8%E8%BF%9C%E4%B8%8D%E4%BC%9A%E5%B0%86%E4%BA%8B%E4%BB%B6%E7%BB%91%E5%AE%9A%E5%88%B0%E5%8C%B9%E9%85%8D%E7%9A%84%E5%85%83%E7%B4%A0%E4%B8%8A%EF%BC%8C%E8%80%8C%E6%98%AF%E5%B0%86%E4%BA%8B%E4%BB%B6%E7%BB%91%E5%AE%9A%E5%88%B0%E7%A5%96%E5%85%88%E5%85%83%E7%B4%A0%EF%BC%88document%E6%88%96context%EF%BC%89%EF%BC%8C%E7%94%B1%E8%AF%A5%E7%A5%96%E5%85%88%E5%85%83%E7%B4%A0%E4%BB%A3%E7%90%86%E5%AD%90%E5%85%83%E7%B4%A0%E7%9A%84%E4%BA%8B%E4%BB%B6%E3%80%82%0A%E4%BB%A5%20%24(&#39;.clickme&#39;).live(&#39;click&#39;%2C%20function()%20%7B%20%E2%80%A6%20%7D%20)%20%E4%B8%BA%E4%BE%8B%EF%BC%8C%E5%BD%93%E5%9C%A8%E6%96%B0%E6%B7%BB%E5%8A%A0%E7%9A%84%E5%85%83%E7%B4%A0%E4%B8%8A%E7%82%B9%E5%87%BB%E6%97%B6%EF%BC%8C%E6%89%A7%E8%A1%8C%E8%BF%87%E7%A8%8B%E5%A6%82%E4%B8%8B%EF%BC%9A%0A1.%20click%E4%BA%8B%E4%BB%B6%E8%A2%AB%E7%94%9F%E6%88%90%EF%BC%8C%E5%B9%B6%E4%BC%A0%E9%80%92%E7%BB%99%3Cdiv%3E%EF%BC%8C%E5%BE%85%3Cdiv%3E%E5%A4%84%E7%90%86%20%20%20%20%20%20%20%20%20%20%20%20%0A2.%20%E5%9B%A0%E4%B8%BA%3Cdiv%3E%E6%B2%A1%E6%9C%89%E7%9B%B4%E6%8E%A5%E7%BB%91%E5%AE%9Aclick%E4%BA%8B%E4%BB%B6%EF%BC%8C%E5%9B%A0%E6%AD%A4%E4%BA%8B%E4%BB%B6%E6%B2%BF%E7%9D%80DOM%E6%A0%91%E8%BF%9B%E8%A1%8C%E5%86%92%E6%B3%A1%E4%BC%A0%E9%80%92%20%20%20%20%20%20%20%20%20%20%0A3.%20%E4%BA%8B%E4%BB%B6%E5%86%92%E6%B3%A1%E4%BC%A0%E9%80%92%E7%9B%B4%E5%88%B0%E5%88%B0%E8%BE%BEDOM%E6%A0%91%E7%9A%84%E6%A0%B9%E8%8A%82%E7%82%B9%EF%BC%8C%E5%9C%A8%E6%A0%B9%E8%8A%82%E7%82%B9%E4%B8%8A%E7%BB%91%E5%AE%9A%E4%BA%86.live()%E6%8C%87%E5%AE%9A%E7%9A%84%E5%8E%9F%E5%A7%8B%E4%BA%8B%E4%BB%B6%E5%A4%84%E7%90%86%E5%87%BD%E6%95%B0%EF%BC%88%E5%9C%A81.4%E4%BB%A5%E5%90%8E%E7%9A%84%E7%89%88%E6%9C%AC%E4%B8%AD%EF%BC%8C.live()%E7%BB%91%E5%AE%9A%E4%BA%8B%E4%BB%B6%E5%88%B0%E4%B8%8A%E4%B8%8B%E6%96%87context%EF%BC%8C%E4%BB%A5%E6%8F%90%E5%8D%87%E6%80%A7%E8%83%BD%EF%BC%89%20%0A4.%20%E6%89%A7%E8%A1%8C.live()%E6%8C%87%E5%AE%9A%E7%9A%84%E4%BA%8B%E4%BB%B6%E5%A4%84%E7%90%86%E5%87%BD%E6%95%B0%20%0A5.%20%E5%8E%9F%E5%A7%8B%E4%BA%8B%E4%BB%B6%E5%A4%84%E7%90%86%E5%87%BD%E6%95%B0%E6%A3%80%E6%9F%A5event%E7%9A%84target%E5%B1%9E%E6%80%A7%E4%BB%A5%E7%A1%AE%E5%AE%9A%E6%98%AF%E5%90%A6%E7%BB%A7%E7%BB%AD%E6%89%A7%E8%A1%8C%EF%BC%8C%E6%A3%80%E6%9F%A5%E7%9A%84%E6%96%B9%E5%BC%8F%E6%98%AF%20%24(event.target).closes%0A6.%20%E5%A6%82%E6%9E%9C%E5%8C%B9%E9%85%8D%EF%BC%8C%E5%88%99%E5%8E%9F%E5%A7%8B%E4%BA%8B%E4%BB%B6%E5%A4%84%E7%90%86%E5%87%BD%E6%95%B0%E6%89%A7%E8%A1%8C%EF%BC%8C%E4%B8%8A%E4%B8%8B%E4%BD%8D%E8%A2%AB%E8%AE%BE%E7%BD%AE%E4%B8%BA%E6%89%BE%E5%88%B0%E7%9A%84%E5%85%83%E7%B4%A0%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0A%E5%9B%A0%E4%B8%BA%E7%AC%AC5%E6%AD%A5%E7%9A%84%E6%A3%80%E6%9F%A5%E6%98%AF%E5%9C%A8%E6%89%A7%E8%A1%8C%E5%8E%9F%E5%A7%8B%E4%BA%8B%E4%BB%B6%E5%A4%84%E7%90%86%E5%87%BD%E6%95%B0%E4%B9%8B%E5%89%8D%EF%BC%8C%E5%9B%A0%E6%AD%A4%E5%85%83%E7%B4%A0%E5%8F%AF%E4%BB%A5%E5%9C%A8%E4%BB%BB%E4%BD%95%E6%97%B6%E5%80%99%E6%B7%BB%E5%8A%A0%EF%BC%8C%E5%B9%B6%E4%B8%94%E4%BA%8B%E4%BB%B6%E5%8F%AF%E4%BB%A5%E7%94%9F%E6%95%88%0A%E8%B0%83%E7%94%A8%E8%BF%87%E7%A8%8B%EF%BC%9A%0A%24(&#39;div&#39;).live(%20&#39;click&#39;%2C%20function()%7B%20alert(1)%3B%20%7D%20)%0AjQuery.fn.live%20%E2%86%92%20jQuery.event.add%20%E2%86%92%20jQuery._data%20%E2%86%92%20jQuery.event.special.live.add%20%E2%86%92%20jQuery.event.add%0A%24(&#39;div&#39;).die(%20&#39;click&#39;%2C%20function()%7B%20alert(1)%3B%20%7D%20)%0AjQuery.fn.die%20%E2%86%92%20jQuery.fn.unbind%20%E2%86%92%20jQuery.event.remove%20jQuery._data%0A%E8%B0%83%E8%AF%95%E8%BF%87%E7%A8%8B%E4%B8%AD%E5%8F%91%E7%8E%B0%E4%B8%AA%E6%9C%89%E8%B6%A3%E7%9A%84%E7%8E%B0%E8%B1%A1%EF%BC%9A%E5%9C%A8%E7%88%B6%E8%8A%82%E7%82%B9%E4%B8%8A%E7%BB%91%E5%AE%9Alive%E4%BA%8B%E4%BB%B6%EF%BC%8C%E8%80%8C%E4%B8%8D%E6%98%AF%E5%85%B7%E4%BD%93%E7%9A%84%E6%97%B6%E9%97%B4%E7%B1%BB%E5%9E%8B%EF%BC%9F%0A%20%0A10.6.3%09%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90%0A%E7%9C%8B%E7%9C%8B.live()%2F.die()%E7%9A%84%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90%EF%BC%9A%0A%2F%2F%20%E4%BA%8B%E4%BB%B6%E7%B1%BB%E5%9E%8B%E4%BF%AE%E6%AD%A3%0Avar%20liveMap%20%3D%20%7B%0A%09focus%3A%20%22focusin%22%2C%0A%09blur%3A%20%22focusout%22%2C%0A%09mouseenter%3A%20%22mouseover%22%2C%0A%09mouseleave%3A%20%22mouseout%22%0A%7D%3B%0A%2F%2F%20die%20%E7%A7%BB%E9%99%A4%E7%94%A8live%E9%99%84%E5%8A%A0%E7%9A%84%E4%B8%80%E4%B8%AA%E6%88%96%E5%85%A8%E9%83%A8%E4%BA%8B%E4%BB%B6%E5%A4%84%E7%90%86%E5%87%BD%E6%95%B0%0A%2F%2F%20%E5%AF%B9%E5%BA%94%E5%85%B3%E7%B3%BB%EF%BC%9Abind-unbind%2C%20live-die%2C%20delegate-undelegate%0A%2F**%0A%20*%20live%20%E5%9C%A8%E5%8C%B9%E9%85%8D%E5%BD%93%E5%89%8D%E9%80%89%E6%8B%A9%E5%99%A8%E7%9A%84%E5%85%83%E7%B4%A0%E4%B8%8A%E7%BB%91%E5%AE%9A%E4%B8%80%E4%B8%AA%E4%BA%8B%E4%BB%B6%E5%A4%84%E7%90%86%E5%87%BD%E6%95%B0%EF%BC%8C%E5%8C%85%E6%8B%AC%E5%B7%B2%E7%BB%8F%E5%AD%98%E5%9C%A8%E7%9A%84%EF%BC%8C%E5%92%8C%E6%9C%AA%E6%9D%A5%E6%B7%BB%E5%8A%A0%E7%9A%84%EF%BC%8C%E5%8D%B3%E4%BB%BB%E4%BD%95%E6%B7%BB%E5%8A%A0%E7%9A%84%E5%85%83%E7%B4%A0%E5%8F%AA%E8%A6%81%E5%8C%B9%E9%85%8D%E5%BD%93%E5%89%8D%E9%80%89%E6%8B%A9%E5%99%A8%E5%B0%B1%E4%BC%9A%E8%A2%AB%E7%BB%91%E5%AE%9A%E4%BA%8B%E4%BB%B6%E5%A4%84%E7%90%86%E5%87%BD%E6%95%B0%0A%20*%20.live(%20eventType%2C%20handler%20)%20%E5%9C%A8%E5%8C%B9%E9%85%8D%E5%BD%93%E5%89%8D%E9%80%89%E6%8B%A9%E5%99%A8%E7%9A%84%E5%85%83%E7%B4%A0%E4%B8%8A%E7%BB%91%E5%AE%9A%E4%B8%80%E4%B8%AA%E6%8C%87%E5%AE%9A%E7%B1%BB%E5%9E%8B%E7%9A%84%E4%BA%8B%E4%BB%B6%E5%A4%84%E7%90%86%E5%87%BD%E6%95%B0%0A%20*%20.live(%20eventType%2C%20eventData%2C%20handler%20)%20eventData%E5%8F%AF%E4%BB%A5%E4%BC%A0%E9%80%92%E7%BB%99%E4%BA%8B%E4%BB%B6%E5%A4%84%E7%90%86%E5%87%BD%E6%95%B0%0A%20*%20.live(%20events%20)%20%E7%BB%91%E5%AE%9A%E5%A4%9A%E4%B8%AA%E4%BA%8B%E4%BB%B6%0A%20*%20%0A%20*%20%0A%20*%20%E5%8F%82%E8%80%83%E6%96%87%E6%A1%A3%EF%BC%9A%0A%20*%20http%3A%2F%2Fapi.jquery.com%2Flive%0A%20*%20http%3A%2F%2Fwww.codesky.net%2Farticle%2Fdoc%2F201004%2F20100417042278.htm%0A%20*%20http%3A%2F%2Fhi.baidu.com%2Fsilveringsea%2Fblog%2Fitem%2F55cd25016ecde30c1c958341.html%0A%20*%20%0A%20*%20%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8%0A%20*%20%E7%A4%BA%E4%BE%8B%0A%20*%20%E5%B1%80%E9%99%90%0A%20*%20%E4%BF%AE%E6%AD%A3%0A%20*%20%0A%20*%20live%E8%A2%AB%E7%BF%BB%E8%AF%91%E4%B8%BA%E9%B2%9C%E6%B4%BB%E7%BB%91%E5%AE%9A%E3%80%81%E5%BB%B6%E8%BF%9F%E7%BB%91%E5%AE%9A%EF%BC%88%E6%9B%B4%E5%87%86%E7%A1%AE%E4%BA%9B%EF%BC%89%0A%20*%20live%E9%80%9A%E8%BF%87%E5%A7%94%E6%B4%BE%EF%BC%8C%E8%80%8C%E4%B8%8D%E6%98%AF%E5%9C%A8%E5%8C%B9%E9%85%8D%E5%85%83%E7%B4%A0%E4%B8%8A%E7%9B%B4%E6%8E%A5%E7%BB%91%E5%AE%9A%E4%BA%8B%E4%BB%B6%E6%9D%A5%E5%AE%9E%E7%8E%B0%0A%20*%20%0A%20*%20%E5%AE%98%E6%96%B9%E6%96%87%E6%A1%A3%E7%BF%BB%E8%AF%91%EF%BC%9A%E4%BA%8B%E4%BB%B6%E4%BB%A3%E7%90%86%0A%20*%20.live()%E6%96%B9%E6%B3%95%E8%83%BD%E5%AF%B9%E5%B0%9A%E6%9C%AA%E6%B7%BB%E5%8A%A0%E5%88%B0DOM%E6%96%87%E6%A1%A3%E4%B8%AD%E7%9A%84%E5%85%83%E7%B4%A0%E7%94%9F%E6%95%88%E3%80%82%0A%20*%20.live()%E6%96%B9%E6%B3%95%E6%B0%B8%E8%BF%9C%E4%B8%8D%E4%BC%9A%E5%B0%86%E4%BA%8B%E4%BB%B6%E7%BB%91%E5%AE%9A%E5%88%B0%E5%8C%B9%E9%85%8D%E7%9A%84%E5%85%83%E7%B4%A0%E4%B8%8A%EF%BC%8C%E8%80%8C%E6%98%AF%E5%B0%86%E4%BA%8B%E4%BB%B6%E7%BB%91%E5%AE%9A%E5%88%B0%E7%A5%96%E5%85%88%E5%85%83%E7%B4%A0%EF%BC%88document%E6%88%96context%EF%BC%89%EF%BC%8C%E7%94%B1%E8%AF%A5%E7%A5%96%E5%85%88%E5%85%83%E7%B4%A0%E4%BB%A3%E7%90%86%E5%AD%90%E5%85%83%E7%B4%A0%E7%9A%84%E4%BA%8B%E4%BB%B6%E3%80%82%09%20*%20%0A%20*%20%E4%BB%A5%20%24(&#39;.clickme&#39;).live(&#39;click&#39;%2C%20function()%20%7B%20%E2%80%A6%20%7D%20)%20%E4%B8%BA%E4%BE%8B%EF%BC%8C%E5%BD%93%E5%9C%A8%E6%96%B0%E6%B7%BB%E5%8A%A0%E7%9A%84%E5%85%83%E7%B4%A0%E4%B8%8A%E7%82%B9%E5%87%BB%E6%97%B6%EF%BC%8C%E6%89%A7%E8%A1%8C%E8%BF%87%E7%A8%8B%E5%A6%82%E4%B8%8B%EF%BC%9A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0A%20*%201.%20click%E4%BA%8B%E4%BB%B6%E8%A2%AB%E7%94%9F%E6%88%90%EF%BC%8C%E5%B9%B6%E4%BC%A0%E9%80%92%E7%BB%99%3Cdiv%3E%EF%BC%8C%E5%BE%85%3Cdiv%3E%E5%A4%84%E7%90%86%0A%20*%202.%20%E5%9B%A0%E4%B8%BA%3Cdiv%3E%E6%B2%A1%E6%9C%89%E7%9B%B4%E6%8E%A5%E7%BB%91%E5%AE%9Aclick%E4%BA%8B%E4%BB%B6%EF%BC%8C%E5%9B%A0%E6%AD%A4%E4%BA%8B%E4%BB%B6%E6%B2%BF%E7%9D%80DOM%E6%A0%91%E8%BF%9B%E8%A1%8C%E5%86%92%E6%B3%A1%E4%BC%A0%E9%80%92%0A%20*%203.%20%E4%BA%8B%E4%BB%B6%E5%86%92%E6%B3%A1%E4%BC%A0%E9%80%92%E7%9B%B4%E5%88%B0%E5%88%B0%E8%BE%BEDOM%E6%A0%91%E7%9A%84%E6%A0%B9%E8%8A%82%E7%82%B9%EF%BC%8C%E5%9C%A8%E6%A0%B9%E8%8A%82%E7%82%B9%E4%B8%8A%E7%BB%91%E5%AE%9A%E4%BA%86.live()%E6%8C%87%E5%AE%9A%E7%9A%84%E5%8E%9F%E5%A7%8B%E4%BA%8B%E4%BB%B6%E5%A4%84%E7%90%86%E5%87%BD%E6%95%B0%EF%BC%88%E5%9C%A81.4%E4%BB%A5%E5%90%8E%E7%9A%84%E7%89%88%E6%9C%AC%E4%B8%AD%EF%BC%8C.live()%E7%BB%91%E5%AE%9A%E4%BA%8B%E4%BB%B6%E5%88%B0%E4%B8%8A%E4%B8%8B%E6%96%87context%EF%BC%8C%E4%BB%A5%E6%8F%90%E5%8D%87%E6%80%A7%E8%83%BD%EF%BC%89%0A%20*%204.%20%E6%89%A7%E8%A1%8C.live()%E6%8C%87%E5%AE%9A%E7%9A%84%E4%BA%8B%E4%BB%B6%E5%A4%84%E7%90%86%E5%87%BD%E6%95%B0%0A%20*%205.%20%E5%8E%9F%E5%A7%8B%E4%BA%8B%E4%BB%B6%E5%A4%84%E7%90%86%E5%87%BD%E6%95%B0%E6%A3%80%E6%9F%A5event%E7%9A%84target%E5%B1%9E%E6%80%A7%E4%BB%A5%E7%A1%AE%E5%AE%9A%E6%98%AF%E5%90%A6%E7%BB%A7%E7%BB%AD%E6%89%A7%E8%A1%8C%EF%BC%8C%E6%A3%80%E6%9F%A5%E7%9A%84%E6%96%B9%E5%BC%8F%E6%98%AF%20%24(event.target).closest(%22.clickme%22)%0A%20*%206.%20%E5%A6%82%E6%9E%9C%E5%8C%B9%E9%85%8D%EF%BC%8C%E5%88%99%E5%8E%9F%E5%A7%8B%E4%BA%8B%E4%BB%B6%E5%A4%84%E7%90%86%E5%87%BD%E6%95%B0%E6%89%A7%E8%A1%8C%EF%BC%8C%E4%B8%8A%E4%B8%8B%E4%BD%8D%E8%A2%AB%E8%AE%BE%E7%BD%AE%E4%B8%BA%E6%89%BE%E5%88%B0%E7%9A%84%E5%85%83%E7%B4%A0%0A%20*%20%0A%20*%20%E5%9B%A0%E4%B8%BA%E7%AC%AC5%E6%AD%A5%E7%9A%84%E6%A3%80%E6%9F%A5%E6%98%AF%E5%9C%A8%E6%89%A7%E8%A1%8C%E5%8E%9F%E5%A7%8B%E4%BA%8B%E4%BB%B6%E5%A4%84%E7%90%86%E5%87%BD%E6%95%B0%E4%B9%8B%E5%89%8D%EF%BC%8C%E5%9B%A0%E6%AD%A4%E5%85%83%E7%B4%A0%E5%8F%AF%E4%BB%A5%E5%9C%A8%E4%BB%BB%E4%BD%95%E6%97%B6%E5%80%99%E6%B7%BB%E5%8A%A0%EF%BC%8C%E5%B9%B6%E4%B8%94%E4%BA%8B%E4%BB%B6%E5%8F%AF%E4%BB%A5%E7%94%9F%E6%95%88%0A%20*%20%0A%20*%2F%0AjQuery.each(%5B%22live%22%2C%20%22die%22%5D%2C%20function(%20i%2C%20name%20)%20%7B%0A%09jQuery.fn%5B%20name%20%5D%20%3D%20function(%20types%2C%20data%2C%20fn%2C%20origSelector%20%2F*%20Internal%20Use%20Only%20*%2F%20)%20%7B%0A%09%09var%20type%2C%20i%20%3D%200%2C%20match%2C%20namespaces%2C%20preType%2C%0A%09%09%09selector%20%3D%20origSelector%20%7C%7C%20this.selector%2C%20%2F%2F%20%E9%80%89%E6%8B%A9%E5%99%A8%E8%A1%A8%E8%BE%BE%E5%BC%8F%0A%09%09%09%2F%2F%20%E5%BE%88%E5%B7%A7%E5%A6%99%EF%BC%8C%E5%A6%82%E6%9E%9C%E6%B2%A1%E6%9C%89origSelector%EF%BC%8C%E9%82%A3%E4%B9%88%E9%87%87%E7%94%A8%E5%BD%93%E5%89%8DjQuery%E5%AF%B9%E8%B1%A1%E7%9A%84%E9%80%89%E6%8B%A9%E5%99%A8%EF%BC%8C%E3%80%81%0A%09%09%09%2F%2F%20%E5%8F%AF%E6%98%AF%EF%BC%8C%E5%A6%82%E6%9E%9CorigSelector%E4%B8%BAtrue%EF%BC%8C%E5%90%8E%E8%BE%B9%E7%9A%84%E5%A4%84%E7%90%86%E5%AF%B9%E8%B1%A1%E5%B0%B1%E5%8F%98%E6%88%90%E4%BA%86%E4%BB%A5origSelector%E4%B8%BA%E9%80%89%E6%8B%A9%E5%99%A8%E7%9A%84jQuery%E5%AF%B9%E8%B1%A1%0A%09%09%09context%20%3D%20origSelector%20%3F%20this%20%3A%20jQuery(%20this.context%20)%3B%20%2F%2F%20%E4%B8%8A%E4%B8%8B%E6%96%87%2C%0A%09%09%09%2F%2F%20%E8%BF%99%E9%87%8C%E4%B9%9F%E6%98%AF%EF%BC%8C%E5%A6%82%E6%9E%9C%E6%B2%A1%E6%9C%89origSelector%EF%BC%8C%E9%82%A3%E4%B9%88%E4%B8%8A%E4%B8%8B%E6%96%87%E5%B0%B1%E5%8F%98%E6%88%90%E5%BD%93%E5%89%8DjQuery%E5%AF%B9%E8%B1%A1%E7%9A%84%E4%B8%8A%E4%B8%8B%E6%96%87%0A%09%09%09%2F%2F%20%E5%8F%AF%E6%98%AF%EF%BC%8C%E5%A6%82%E6%9E%9CorigSelector%E4%B8%BAtrue%EF%BC%88%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2%EF%BC%89%EF%BC%8C%E5%BD%93%E5%89%8DjQuery%E5%AF%B9%E8%B1%A1%E5%B0%B1%E5%8F%98%E6%88%90%E4%B8%8A%E4%B8%8B%E6%96%87%E4%BA%86%0A%09%09%09%2F%2F%20%E5%B0%B1%E6%98%AF%E5%9C%A8%E8%BF%99%E9%87%8C%EF%BC%8C%E9%80%9A%E8%BF%87%E4%B8%80%E4%B8%AA%E5%86%85%E9%83%A8%E5%8F%98%E9%87%8F%EF%BC%8C%E6%94%B9%E5%8F%98%E4%BA%86%E9%80%89%E6%8B%A9%E5%99%A8%E8%A1%A8%E8%BE%BE%E5%BC%8F%E5%92%8C%E4%B8%8A%E4%B8%8B%E5%88%86%EF%BC%8C%E5%8C%BA%E5%88%86%E5%BC%80%E4%BA%86live%2Fdie%E5%92%8Cdelegate%2Fundelegate%EF%BC%8C%E7%94%A8%E5%90%8C%E6%A0%B7%E7%9A%84%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0%E4%BA%86%E4%B8%A4%E7%A7%8D%E6%8E%A5%E5%8F%A3%0A%0A%09%09%2F%2F%20%E4%B8%80%E6%AC%A1%E7%BB%91%E5%AE%9A%E6%88%96%E5%88%A0%E9%99%A4%E5%A4%9A%E4%B8%AA%E4%BA%8B%E4%BB%B6%0A%09%09if%20(%20typeof%20types%20%3D%3D%3D%20%22object%22%20%26%26%20!types.preventDefault%20)%20%7B%20%2F%2F%20types%E4%B8%8D%E6%98%AFjQuery%E4%BA%8B%E4%BB%B6%E5%AF%B9%E8%B1%A1%0A%09%09%09for%20(%20var%20key%20in%20types%20)%20%7B%20%2F%2F%20%E8%BF%AD%E4%BB%A3%E5%A4%8D%E7%94%A8%0A%09%09%09%09context%5B%20name%20%5D(%20key%2C%20data%2C%20types%5Bkey%5D%2C%20selector%20)%3B%0A%09%09%09%7D%0A%0A%09%09%09return%20this%3B%0A%09%09%7D%0A%0A%09%09%2F%2F%20%E5%A6%82%E6%9E%9C%E6%98%AFdie%EF%BC%8C%E7%A7%BB%E9%99%A4origSelector%E5%8C%B9%E9%85%8D%E5%85%83%E7%B4%A0%E4%B8%8A%E7%9A%84%E6%89%80%E6%9C%89%E9%80%9A%E8%BF%87live%E7%BB%91%E5%AE%9A%E7%9A%84%E4%BA%8B%E4%BB%B6%0A%09%09%2F%2F%20%E6%B2%A1%E6%9C%89%E6%8C%87%E5%AE%9A%E4%BA%8B%E4%BB%B6%E7%B1%BB%E5%9E%8B%20%2B%20origSelector%20%2B%20origSelector%E6%98%AFCSS%E9%80%89%E6%8B%A9%E5%99%A8%20%0A%09%09if%20(%20name%20%3D%3D%3D%20%22die%22%20%26%26%20!types%20%26%26%0A%09%09%09%09%09origSelector%20%26%26%20origSelector.charAt(0)%20%3D%3D%3D%20%22.%22%20)%20%7B%0A%0A%09%09%09context.unbind(%20origSelector%20)%3B%20%2F%2F%20%E4%BA%8B%E5%AE%9E%E4%B8%8Abind%2Funbind%E6%98%AF%E5%9F%BA%E7%A1%80%EF%BC%8Cadd%2Fremove%2Ftigger%2Fhandle%E6%98%AF%E6%89%80%E6%9C%89%E4%BA%8B%E4%BB%B6%E7%9A%84%E5%9F%BA%E7%A1%80%0A%0A%09%09%09return%20this%3B%0A%09%09%7D%0A%09%09%0A%09%09%2F%2F%20%E4%BF%AE%E6%AD%A3%E5%8F%82%E6%95%B0%EF%BC%88%E5%A6%82%E6%9E%9Cdata%E4%B8%BAfalse%E6%88%96%E6%B2%A1%E6%9C%89%E4%BC%A0%E5%85%A5data%E5%8F%82%E6%95%B0%EF%BC%89%0A%09%09%2F%2F%20%E5%AE%8C%E6%95%B4%EF%BC%9Atypes%2C%20data%2C%20fn%2C%20origSelector%0A%09%09%2F%2F%20types%2C%20false%2C%20fn%2C%20origSelector%0A%09%09%2F%2F%20%E6%88%96%20types%2C%20fn%2C%20origSelector%0A%09%09if%20(%20data%20%3D%3D%3D%20false%20%7C%7C%20jQuery.isFunction(%20data%20)%20)%20%7B%0A%09%09%09fn%20%3D%20data%20%7C%7C%20returnFalse%3B%0A%09%09%09data%20%3D%20undefined%3B%0A%09%09%7D%0A%0A%09%09types%20%3D%20(types%20%7C%7C%20%22%22).split(%22%20%22)%3B%20%2F%2F%20%E5%A4%9A%E4%B8%AA%E4%BA%8B%E4%BB%B6%E7%94%A8%E7%A9%BA%E6%A0%BC%E9%9A%94%E5%BC%80%0A%0A%09%09while%20(%20(type%20%3D%20types%5B%20i%2B%2B%20%5D)%20!%3D%20null%20)%20%7B%20%2F%2F%20%E9%81%8D%E5%8E%86%E4%BA%8B%E4%BB%B6%E7%B1%BB%E5%9E%8B%E6%95%B0%E7%BB%84%0A%09%09%09match%20%3D%20rnamespaces.exec(%20type%20)%3B%20%2F%2F%20%E5%8F%96%E5%88%B0%E7%AC%AC%E4%B8%80%E4%B8%AA.%E5%90%8E%E7%9A%84%E5%91%BD%E5%90%8D%E7%A9%BA%E9%97%B4%20%0A%09%09%09namespaces%20%3D%20%22%22%3B%0A%0A%09%09%09if%20(%20match%20)%20%20%7B%20%2F%2F%20%E5%A6%82%E6%9E%9C%E6%9C%89%E5%91%BD%E5%90%8D%E7%A9%BA%E9%97%B4%EF%BC%8C%E5%8D%B3%E4%BA%8B%E4%BB%B6%E7%B1%BB%E5%9E%8B%E5%90%8E%E8%BF%98%E6%9C%89.%0A%09%09%09%09namespaces%20%3D%20match%5B0%5D%3B%20%2F%2F%20.%2B%E5%91%BD%E5%90%8D%E7%A9%BA%E9%97%B4%0A%09%09%09%09type%20%3D%20type.replace(%20rnamespaces%2C%20%22%22%20)%3B%20%2F%2F%20%E8%BF%87%E6%BB%A4.%2B%E5%91%BD%E5%90%8D%E7%A9%BA%E9%97%B4%EF%BC%8C%E5%88%9D%E5%AD%A6%E8%80%85%E4%BC%9A%E5%B0%9D%E8%AF%95%E7%94%A8indexOf%E6%9F%A5%E6%89%BE.%E7%9A%84%E4%BD%8D%E7%BD%AE%EF%BC%8C%E7%84%B6%E5%90%8E%E6%88%AA%E5%8F%96%0A%09%09%09%7D%0A%0A%09%09%09if%20(%20type%20%3D%3D%3D%20%22hover%22%20)%20%7B%20%2F%2F%20%E5%B0%86hover%E5%88%86%E8%A7%A3%E4%B8%BAmouseenter%20mouseleave%EF%BC%8C%E7%BB%A7%E7%BB%AD%E9%81%8D%E5%8E%86%0A%09%09%09%09types.push(%20%22mouseenter%22%20%2B%20namespaces%2C%20%22mouseleave%22%20%2B%20namespaces%20)%3B%0A%09%09%09%09continue%3B%0A%09%09%09%7D%0A%0A%09%09%09preType%20%3D%20type%3B%20%2F%2F%20%0A%0A%09%09%09if%20(%20liveMap%5B%20type%20%5D%20)%20%7B%20%2F%2F%20%E4%BF%AE%E6%AD%A3%E4%BA%8B%E4%BB%B6%E5%90%8D%E5%90%8D%EF%BC%8C%E4%BF%AE%E6%AD%A3%E5%85%B6%E5%AE%9E%E4%B8%8D%E5%87%86%E7%A1%AE%EF%BC%8C%E6%AF%94%E5%A6%82%E9%81%87%E5%88%B0focus%EF%BC%8C%E7%BB%91%E5%AE%9A%E4%BA%86%E4%B8%A4%E4%B8%AA%EF%BC%9Afocus%20focusin%EF%BC%8C%E4%B8%8D%E4%BC%9A%E9%80%A0%E6%88%90%E4%B8%A4%E6%AC%A1%E4%BA%8B%E4%BB%B6%E5%93%8D%E5%BA%94%E4%B9%88%EF%BC%9F%0A%09%09%09%09types.push(%20liveMap%5B%20type%20%5D%20%2B%20namespaces%20)%3B%20%2F%2F%20%E5%B0%86%E4%BF%AE%E6%AD%A3%E5%90%8E%E7%9A%84%E4%BA%8B%E4%BB%B6%E7%B1%BB%E5%9E%8B%E5%85%A5%E9%98%9F%EF%BC%8C%E5%9B%A0%E4%B8%BA%E7%94%A8%E4%BA%86while%E5%BE%AA%E7%8E%AF%EF%BC%8C%E6%89%80%E6%9C%89%E4%B8%8D%E5%BF%85%E6%8B%85%E5%BF%83%E9%81%8D%E5%8E%86%E5%8A%A8%E6%80%81%E6%95%B0%E7%BB%84%E7%9A%84%E9%97%AE%E9%A2%98%0A%09%09%09%09type%20%3D%20type%20%2B%20namespaces%3B%20%2F%2F%20%E5%86%8D%E6%81%A2%E5%A4%8Dtype%EF%BC%8C%E5%8C%85%E5%90%AB%E4%BA%86%E5%91%BD%E5%90%8D%E7%A9%BA%E9%97%B4%EF%BC%8C%E8%BF%99%E4%B8%8D%E6%98%AF%E8%9B%8B%E7%96%BC%E4%B9%88%EF%BC%8C%E6%8A%8A%E5%91%BD%E5%90%8D%E7%A9%BA%E9%97%B4%E5%8E%BB%E6%8E%89%E5%8F%AA%E4%B8%BA%E4%BA%86%E6%A3%80%E6%B5%8Bhover%E5%92%8C%E6%98%AF%E5%90%A6%E9%9C%80%E8%A6%81%E4%BF%AE%E6%AD%A3%EF%BC%9F%0A%0A%09%09%09%7D%20else%20%7B%0A%09%09%09%09type%20%3D%20(liveMap%5B%20type%20%5D%20%7C%7C%20type)%20%2B%20namespaces%3B%20%2F%2F%20%E4%BF%AE%E6%AD%A3%E4%BA%8B%E4%BB%B6%E5%90%8D%EF%BC%8C%E8%BF%99%E9%87%8C%E5%8F%AF%E4%BB%A5%E7%9B%B4%E6%8E%A5%E5%86%99%E6%88%90%EF%BC%9Atype%20%2B%20namespaces%0A%09%09%09%09%2F%2F%20%E8%BF%99%E8%A1%8C%E7%9A%84%E9%80%BB%E8%BE%91%E6%9C%89%E7%82%B9%E9%97%AE%E9%A2%98%EF%BC%8C%E5%B7%B2%E7%BB%8F%E7%9F%A5%E9%81%93liveMap%5B%20type%20%5D%E6%98%AFfalse%E4%BA%86%EF%BC%8C%E8%BF%99%E4%B8%AA%E5%9C%B0%E6%96%B9%E7%9A%84%E4%BB%A3%E7%A0%81%E6%9C%89%E4%BA%9B%E9%87%8D%E5%A4%8D%0A%09%09%09%7D%0A%09%09%09%2F**%0A%09%09%09%20*%20%E4%B8%8A%E8%BE%B9%E7%9A%84if-else%E6%94%B9%E5%86%99%E4%B8%BA%EF%BC%9A%0A%09%09%09%20*%20if%20(%20liveMap%5B%20type%20%5D%20)%20types.push(%20liveMap%5B%20type%20%5D%20%2B%20namespaces%20)%0A%09%09%09%20*%20type%20%3D%20type%20%2B%20namespaces%0A%09%09%09%20*%2F%0A%0A%09%09%09%2F%2F%20%E8%BF%99%E9%87%8C%E5%BC%80%E5%A7%8Blive%E7%9A%84%E7%89%B9%E6%AE%8A%E5%A4%84%E7%90%86%EF%BC%8C%E8%99%BD%E8%AF%B4live%2Fdie%E7%9A%84%E9%80%BB%E8%BE%91%E6%AF%94%E8%BE%83%E6%8E%A5%E8%BF%91%EF%BC%8C%E5%86%8D%E5%8A%A0%E4%B8%8Adelegate%2Fundelegate%EF%BC%8C%E5%A4%8D%E7%94%A8%E7%9A%84%E7%B2%92%E5%BA%A6%E5%B0%8F%E4%BD%86%E6%98%AF%E5%BE%88%E7%B2%BE%E9%AB%93%0A%09%09%09%2F%2F%20%E5%90%8C%E6%97%B6%E4%B8%BA%E4%BA%86%E5%87%8F%E5%B0%91%E6%8E%A5%E5%8F%A3%EF%BC%8C%E5%B9%B6%E6%B2%A1%E6%9C%89%E5%B0%86%E5%85%AC%E5%85%B1%E9%83%A8%E5%88%86%E6%8F%90%E5%8F%96%E5%87%BA%E6%9D%A5%EF%BC%8C%E6%80%BB%E7%9A%84%E6%9D%A5%E8%AF%B4%EF%BC%8Clive%2Fdie%E8%BF%99%E6%AE%B5%E4%BB%A3%E7%A0%81%E5%87%BA%E6%9D%A5%E7%9A%84%E8%BF%98%E6%98%AF%E5%88%9A%E5%88%9A%E5%A5%BD%0A%09%09%09if%20(%20name%20%3D%3D%3D%20%22live%22%20)%20%7B%0A%09%09%09%09%2F%2F%20bind%20live%20handler%0A%09%09%09%09for%20(%20var%20j%20%3D%200%2C%20l%20%3D%20context.length%3B%20j%20%3C%20l%3B%20j%2B%2B%20)%20%7B%0A%09%09%09%09%09%2F%2F%20%E7%BB%91%E5%AE%9A%E5%88%B0%E4%B8%8A%E4%B8%8B%E6%96%87%EF%BC%8C%E4%BA%8B%E4%BB%B6%E7%B1%BB%E5%9E%8B%E7%BB%8F%E8%BF%87liveConvert%E5%90%8E%E5%8F%98%E4%B8%BA%20live.type.selector%0A%09%09%09%09%09%2F%2F%20%E5%89%8D%E8%BE%B9%E5%81%9A%E4%BA%86%E9%82%A3%E4%B9%88%E5%A4%9A%E9%93%BA%E5%9E%AB%EF%BC%8C%E8%BF%99%E8%A1%8C%E6%89%8D%E6%98%AF%E5%85%B3%E9%94%AE%EF%BC%81%0A%09%09%09%09%09%2F%2F%20add%3A%20function(%20elem%2C%20types%2C%20handler%2C%20data%20)%20%7B%0A%09%09%09%09%09%2F%2F%20context%5Bj%5D%20%E5%A6%82%E6%9E%9C%E6%9C%89origSelector%E5%88%99%E6%98%AF%E5%BD%93%E5%89%8DjQuery%E5%AF%B9%E8%B1%A1%EF%BC%8C%E5%A6%82%E6%9E%9C%E6%B2%A1%E6%9C%89%E5%88%99%E6%98%AF%E5%BD%93%E5%89%8DjQuery%E5%AF%B9%E8%B1%A1%E7%9A%84%E4%B8%8A%E4%B8%8B%E6%96%87%0A%09%09%09%09%09%2F%2F%20live%E4%BA%8B%E4%BB%B6%E7%9A%84%E6%A0%BC%E5%BC%8F%E6%AF%94%E8%BE%83%E7%89%B9%E6%AE%8A%EF%BC%8C%E5%BA%94%E8%AF%A5trigger%E9%87%8C%E4%BC%9A%E6%9C%89live%E7%9A%84%E7%89%B9%E6%AE%8A%E5%A4%84%E7%90%86%EF%BC%8Clive%E7%9A%84%E5%A4%84%E7%90%86%E5%9C%A8%E7%89%B9%E4%BE%8Bspecial%E9%87%8C%0A%09%09%09%09%09jQuery.event.add(%20context%5Bj%5D%2C%20%22live.%22%20%2B%20liveConvert(%20type%2C%20selector%20)%2C%0A%09%09%09%09%09%09%7B%20data%3A%20data%2C%20selector%3A%20selector%2C%20handler%3A%20fn%2C%20origType%3A%20type%2C%20origHandler%3A%20fn%2C%20preType%3A%20preType%20%7D%20)%3B%0A%09%09%09%09%7D%0A%0A%09%09%09%7D%20else%20%7B%0A%09%09%09%09%2F%2F%20unbind%20live%20handler%0A%09%09%09%09%2F%2F%20%E5%88%A0%E9%99%A4live%E7%BB%91%E5%AE%9A%E7%9A%84%E4%BA%8B%E4%BB%B6%E5%8F%A5%E6%9F%84%0A%09%09%09%09context.unbind(%20%22live.%22%20%2B%20liveConvert(%20type%2C%20selector%20)%2C%20fn%20)%3B%0A%09%09%09%7D%0A%09%09%7D%0A%0A%09%09return%20this%3B%0A%09%7D%3B%0A%7D)%3B%0A%2F**%0A%20*%20live%E6%89%A7%E8%A1%8C%E5%8F%A5%E6%9F%84%EF%BC%8Clive%E7%BB%91%E5%AE%9A%E7%9A%84%E4%BA%8B%E4%BB%B6%E8%B0%83%E7%94%A8%E9%93%BE%EF%BC%9Aadd.eventHandle%20%E2%86%92%20handler%20function%20liveHandler%20%E2%86%92%20_data%20%E2%86%92%20handler%20%0A%20*%20%40param%20event%0A%20*%20%40return%0A%20*%2F%0Afunction%20liveHandler(%20event%20)%20%7B%0A%09var%20stop%2C%20maxLevel%2C%20related%2C%20match%2C%20handleObj%2C%20elem%2C%20j%2C%20i%2C%20l%2C%20data%2C%20close%2C%20namespace%2C%20ret%2C%0A%09%09elems%20%3D%20%5B%5D%2C%0A%09%09selectors%20%3D%20%5B%5D%2C%0A%09%09events%20%3D%20jQuery._data(%20this%2C%20%22events%22%20)%3B%0A%0A%09%2F%2F%20Make%20sure%20we%20avoid%20non-left-click%20bubbling%20in%20Firefox%20(%233861)%20and%20disabled%20elements%20in%20IE%20(%236911)%0A%09if%20(%20event.liveFired%20%3D%3D%3D%20this%20%7C%7C%20!events%20%7C%7C%20!events.live%20%7C%7C%20event.target.disabled%20%7C%7C%20event.button%20%26%26%20event.type%20%3D%3D%3D%20%22click%22%20)%20%7B%0A%09%09return%3B%0A%09%7D%0A%0A%09if%20(%20event.namespace%20)%20%7B%0A%09%09namespace%20%3D%20new%20RegExp(%22(%5E%7C%5C%5C.)%22%20%2B%20event.namespace.split(%22.%22).join(%22%5C%5C.(%3F%3A.*%5C%5C.)%3F%22)%20%2B%20%22(%5C%5C.%7C%24)%22)%3B%0A%09%7D%0A%0A%09event.liveFired%20%3D%20this%3B%0A%0A%09var%20live%20%3D%20events.live.slice(0)%3B%20%2F%2F%20%E8%BF%94%E5%9B%9E%E4%B8%80%E4%B8%AA%E6%96%B0%E7%9A%84%E6%95%B0%E7%BB%84%EF%BC%8C%E8%80%8C%E4%B8%8D%E6%94%B9%E5%8F%98%E5%8E%9F%E6%9D%A5%E7%9A%84%E6%95%B0%E7%BB%84%0A%0A%09for%20(%20j%20%3D%200%3B%20j%20%3C%20live.length%3B%20j%2B%2B%20)%20%7B%0A%09%09handleObj%20%3D%20live%5Bj%5D%3B%0A%0A%09%09if%20(%20handleObj.origType.replace(%20rnamespaces%2C%20%22%22%20)%20%3D%3D%3D%20event.type%20)%20%7B%0A%09%09%09selectors.push(%20handleObj.selector%20)%3B%0A%0A%09%09%7D%20else%20%7B%0A%09%09%09live.splice(%20j--%2C%201%20)%3B%0A%09%09%7D%0A%09%7D%0A%0A%09match%20%3D%20jQuery(%20event.target%20).closest(%20selectors%2C%20event.currentTarget%20)%3B%0A%0A%09for%20(%20i%20%3D%200%2C%20l%20%3D%20match.length%3B%20i%20%3C%20l%3B%20i%2B%2B%20)%20%7B%0A%09%09close%20%3D%20match%5Bi%5D%3B%0A%0A%09%09for%20(%20j%20%3D%200%3B%20j%20%3C%20live.length%3B%20j%2B%2B%20)%20%7B%0A%09%09%09handleObj%20%3D%20live%5Bj%5D%3B%0A%0A%09%09%09if%20(%20close.selector%20%3D%3D%3D%20handleObj.selector%20%26%26%20(!namespace%20%7C%7C%20namespace.test(%20handleObj.namespace%20))%20%26%26%20!close.elem.disabled%20)%20%7B%0A%09%09%09%09elem%20%3D%20close.elem%3B%0A%09%09%09%09related%20%3D%20null%3B%0A%0A%09%09%09%09%2F%2F%20Those%20two%20events%20require%20additional%20checking%0A%09%09%09%09if%20(%20handleObj.preType%20%3D%3D%3D%20%22mouseenter%22%20%7C%7C%20handleObj.preType%20%3D%3D%3D%20%22mouseleave%22%20)%20%7B%0A%09%09%09%09%09event.type%20%3D%20handleObj.preType%3B%0A%09%09%09%09%09related%20%3D%20jQuery(%20event.relatedTarget%20).closest(%20handleObj.selector%20)%5B0%5D%3B%0A%0A%09%09%09%09%09%2F%2F%20Make%20sure%20not%20to%20accidentally%20match%20a%20child%20element%20with%20the%20same%20selector%0A%09%09%09%09%09if%20(%20related%20%26%26%20jQuery.contains(%20elem%2C%20related%20)%20)%20%7B%0A%09%09%09%09%09%09related%20%3D%20elem%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%7D%0A%0A%09%09%09%09if%20(%20!related%20%7C%7C%20related%20!%3D%3D%20elem%20)%20%7B%0A%09%09%09%09%09elems.push(%7B%20elem%3A%20elem%2C%20handleObj%3A%20handleObj%2C%20level%3A%20close.level%20%7D)%3B%0A%09%09%09%09%7D%0A%09%09%09%7D%0A%09%09%7D%0A%09%7D%0A%0A%09for%20(%20i%20%3D%200%2C%20l%20%3D%20elems.length%3B%20i%20%3C%20l%3B%20i%2B%2B%20)%20%7B%0A%09%09match%20%3D%20elems%5Bi%5D%3B%0A%0A%09%09if%20(%20maxLevel%20%26%26%20match.level%20%3E%20maxLevel%20)%20%7B%0A%09%09%09break%3B%0A%09%09%7D%0A%0A%09%09event.currentTarget%20%3D%20match.elem%3B%0A%09%09event.data%20%3D%20match.handleObj.data%3B%0A%09%09event.handleObj%20%3D%20match.handleObj%3B%0A%0A%09%09ret%20%3D%20match.handleObj.origHandler.apply(%20match.elem%2C%20arguments%20)%3B%0A%0A%09%09if%20(%20ret%20%3D%3D%3D%20false%20%7C%7C%20event.isPropagationStopped()%20)%20%7B%0A%09%09%09maxLevel%20%3D%20match.level%3B%0A%0A%09%09%09if%20(%20ret%20%3D%3D%3D%20false%20)%20%7B%0A%09%09%09%09stop%20%3D%20false%3B%0A%09%09%09%7D%0A%09%09%09if%20(%20event.isImmediatePropagationStopped()%20)%20%7B%0A%09%09%09%09break%3B%0A%09%09%09%7D%0A%09%09%7D%0A%09%7D%0A%0A%09return%20stop%3B%0A%7D%0A%2F%2F%20%E5%9C%A8live%E4%BA%8B%E4%BB%B6%E7%B1%BB%E5%9E%8Btype%E5%90%8E%E5%A2%9E%E5%8A%A0%E4%B8%8Aselector%EF%BC%8C%E4%BD%9C%E4%B8%BA%E5%91%BD%E5%90%8D%E7%A9%BA%E9%97%B4%0Afunction%20liveConvert(%20type%2C%20selector%20)%20%7B%0A%09%2F%2F%20.%20%3E%20%60%0A%09%2F%2F%20%E7%A9%BA%E6%A0%BC%20%3E%20%26%0A%09%2F%2F%20%E5%9C%A8type%E5%90%8E%E5%A2%9E%E5%8A%A0%E4%B8%8Aselector%EF%BC%8C%E4%BD%9C%E4%B8%BA%E5%91%BD%E5%90%8D%E7%A9%BA%E9%97%B4%0A%09return%20(type%20%26%26%20type%20!%3D%3D%20%22*%22%20%3F%20type%20%2B%20%22.%22%20%3A%20%22%22)%20%2B%20selector.replace(rperiod%2C%20%22%60%22).replace(rspaces%2C%20%22%26%22)%3B%20%2F%2F%20%0A%7D%0A10.7%09.deletege()%20.undelegate()%0A10.7.1%09%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8%0A.delegate(%20selector%2C%20eventType%2C%20handler%20)%09%E5%9C%A8%E5%8C%B9%E9%85%8D%E9%80%89%E6%8B%A9%E5%99%A8%E8%A1%A8%E8%BE%BE%E5%BC%8Fselector%E7%9A%84%E5%85%83%E7%B4%A0%E4%B8%8A%EF%BC%8C%E5%B0%86%E4%B8%80%E4%B8%AA%E4%BA%8B%E4%BB%B6%E5%8F%A5handler%E6%9F%84%E7%BB%91%E5%AE%9A%E5%88%B0%E4%B8%80%E4%B8%AA%E6%88%96%E5%A4%9A%E4%B8%AA%E4%BA%8B%E4%BB%B6%E4%B8%8A%0A%E6%97%A0%E8%AE%BA%E6%98%AF%E7%8E%B0%E6%9C%89%E7%9A%84%E8%BF%98%E6%98%AF%E5%B0%86%E6%9D%A5%E6%B7%BB%E5%8A%A0%E7%9A%84%EF%BC%8C%E5%9F%BA%E4%BA%8E%E4%B8%80%E7%BB%84%E7%89%B9%E5%AE%9A%E7%9A%84%E6%A0%B9%E5%85%83%E7%B4%A0%EF%BC%88%E5%8D%B3%E4%B8%8A%E4%B8%8B%E6%96%87%EF%BC%89%0A.delegate(%20selector%2C%20eventType%2C%20eventData%2C%20handler%20)%09Map%E5%9E%8B%E5%AF%B9%E8%B1%A1eventData%E7%9A%84%E5%B1%9E%E6%80%A7%E5%B0%86%E8%A2%AB%E5%A4%8D%E5%88%B6%E5%88%B0%E4%BA%8B%E4%BB%B6%E5%8F%A5%E6%9F%84handler%0A.delegate(%20selector%2C%20events%20)%09%E7%BB%91%E5%AE%9A%E4%B8%80%E4%B8%AA%E6%88%96%E5%A4%9A%E4%B8%AA%E4%BA%8B%E4%BB%B6%E5%8F%A5%E6%9F%84%0A.undelegate()%09%E5%9C%A8%E5%BD%93%E5%89%8DjQuery%E5%AF%B9%E8%B1%A1%E4%B8%8A%EF%BC%8C%E7%A7%BB%E9%99%A4%E6%89%80%E6%9C%89live%E4%BA%8B%E4%BB%B6%E5%8F%A5%E6%9F%84%0A.undelegate(%20selector%2C%20eventType%2C%20handler%20)%09%E5%9C%A8%E5%BD%93%E5%89%8DjQuery%E5%AF%B9%E8%B1%A1%E4%B8%8A%EF%BC%8C%E7%A7%BB%E9%99%A4live.%20eventType.selector%E4%BA%8B%E4%BB%B6%E5%8F%A5%E6%9F%84%0A%E4%B8%BA%E5%BD%93%E5%89%8D%E9%80%89%E6%8B%A9%E6%89%80%E5%8C%B9%E9%85%8D%E7%9A%84%E6%89%80%E6%9C%89%E5%85%83%E7%B4%A0%E7%A7%BB%E9%99%A4%E4%B8%80%E4%B8%AA%E4%BA%8B%E4%BB%B6%E5%A4%84%E7%90%86%E7%A8%8B%E5%BA%8F%EF%BC%8C%E7%8E%B0%E5%9C%A8%E6%88%96%E5%B0%86%E6%9D%A5%EF%BC%8C%E5%9F%BA%E4%BA%8E%E4%B8%80%E7%BB%84%E7%89%B9%E5%AE%9A%E7%9A%84%E6%A0%B9%E5%85%83%E7%B4%A0%E3%80%82%0A.undelegate(%20selector%2C%20events%20)%09%E5%9C%A8%E5%BD%93%E5%89%8DjQuery%E5%AF%B9%E8%B1%A1%E4%B8%8A%EF%BC%8C%E7%A7%BB%E9%99%A4%E5%A4%9A%E4%B8%AAlive%E4%BA%8B%E4%BB%B6%E5%8F%A5%E6%9F%84%EF%BC%8Cevents%E6%98%AFMap%E5%9E%8B%E5%AF%B9%E8%B1%A1%EF%BC%8Ckey%0A.undelegate(%20namespace%20)%09%E5%9C%A8%E5%BD%93%E5%89%8DjQuery%E5%AF%B9%E8%B1%A1%E4%B8%8A%EF%BC%8C%E7%A7%BB%E9%99%A4%E5%91%BD%E5%90%8D%E7%A9%BA%E9%97%B4%E5%8C%B9%E9%85%8D%E7%9A%84live%E4%BA%8B%E4%BB%B6%E5%8F%A5%E6%9F%84%0A%E4%BB%8E%E6%8E%A5%E5%8F%A3%E7%9A%84%E5%90%AB%E4%B9%89%E7%9C%8B%EF%BC%8C.deletege()%2F.undelegate()%E4%B8%8E.live()%2F.die()%E7%9A%84%E5%8C%BA%E5%88%AB%E5%9C%A8%E4%BA%8E%E7%BB%91%E5%AE%9A%E4%BA%8B%E4%BB%B6%E6%97%B6%E7%9A%84%E4%B8%8A%E4%B8%8B%E6%96%87%E4%B8%8D%E5%90%8C%EF%BC%8C%E4%B8%8A%E4%B8%8B%E6%96%87%E5%8D%B3%E4%BA%8B%E4%BB%B6%E7%BB%91%E5%AE%9A%E5%88%B0%E7%9A%84%E5%85%83%E7%B4%A0%EF%BC%9A%0A.deletege()%2F.undelegate()%09%E5%BD%93%E5%89%8DjQuery%E5%AF%B9%E8%B1%A1%0A.live()%2F.die()%09%E5%BD%93%E5%89%8DjQuery%E5%AF%B9%E8%B1%A1%E7%9A%84%E4%B8%8A%E4%B8%8B%E6%96%87%EF%BC%8C%E7%BB%8F%E5%B8%B8%E6%98%AFdocument%EF%BC%8C%E4%B9%9F%E5%8F%AF%E4%BB%A5%E6%98%AF%E6%9E%84%E9%80%A0jQuery%E5%AF%B9%E8%B1%A1%E6%97%B6%E6%8C%87%E5%AE%9A%E7%9A%84%E4%B8%8A%E4%B8%8B%E6%96%87%0A%0A10.7.2%09%E8%B0%83%E7%94%A8%E8%BF%87%E7%A8%8B%0AjQuery.fn.delegate%20%E2%86%92%20jQuery.fn.live%20%E2%86%92%20jQuery.event.add%0AjQuery.fn.undelegate%20%E2%86%92%20jQuery.fn.unbind%2Fdie%0A10.7.3%09%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90%0A%2F%2F%20%E4%BA%8B%E4%BB%B6%E4%BB%A3%E7%90%86%EF%BC%8C%E8%B0%83%E7%94%A8live%E6%96%B9%E6%B3%95%E5%AE%9E%E7%8E%B0%0Adelegate%3A%20function(%20selector%2C%20types%2C%20data%2C%20fn%20)%20%7B%0A%09%2F%2F%20%E5%9B%A0%E4%B8%BA%E4%BC%A0%E9%80%92%E4%BA%86%E5%8F%82%E6%95%B0selector%EF%BC%8Clive%E6%97%B6%E7%9A%84%E4%B8%8A%E4%B8%8B%E6%96%87%E5%8F%98%E4%B8%BAthis%EF%BC%8C%E8%80%8C%E4%B8%8D%E6%98%AFthis.context%0A%09return%20this.live(%20types%2C%20data%2C%20fn%2C%20selector%20)%3B%0A%7D%2C%0A%2F%2F%20%E5%88%A0%E9%99%A4%E4%BA%8B%E4%BB%B6%E4%BB%A3%E7%90%86%EF%BC%8C%E8%B0%83%E7%94%A8unbind%E6%88%96die%E5%AE%9E%E7%8E%B0%0Aundelegate%3A%20function(%20selector%2C%20types%2C%20fn%20)%20%7B%0A%09if%20(%20arguments.length%20%3D%3D%3D%200%20)%20%7B%0A%09%09return%20this.unbind(%20%22live%22%20)%3B%20%2F%2F%20%E5%9C%A8%E5%BD%93%E5%89%8DjQuery%E5%AF%B9%E8%B1%A1%E4%B8%8A%E7%9B%B4%E6%8E%A5unbind%EF%BC%8C%E4%B8%8D%E9%9C%80%E8%A6%81%E5%9C%A8%E5%8E%BB%E6%9F%A5%E6%89%BE%E4%B8%8A%E4%B8%8B%E6%96%87%0A%0A%09%7D%20else%20%7B%0A%09%09%2F%2F%20jQuery.fn%5B%20die%20%5D%20%3D%20function(%20types%2C%20data%2C%20fn%2C%20origSelector%20%2F*%20Internal%20Use%20Only%20*%2F%20)%20%7B%0A%09%09return%20this.die(%20types%2C%20null%2C%20fn%2C%20selector%20)%3B%20%2F%2F%E3%80%80%E5%B8%A6%E6%9C%89%E9%80%89%E6%8B%A9%E5%99%A8%E5%AD%97%E7%AC%A6%E4%B8%B2%EF%BC%8C%E6%94%B9%E5%8F%98%E4%BA%86die%E9%87%8C%E7%9A%84%E4%B8%8A%E4%B8%8B%E6%96%87context%E5%8F%98%E9%87%8F%0A%09%7D%0A%7D%2C%0A%E6%9C%AC%E8%8A%82%E5%B0%8F%E8%8A%82%EF%BC%9A%0A1.%09.bind()%2F.unbind()%E9%AB%98%E7%BA%A7%E6%8E%A5%E5%8F%A3%E7%9A%84%E5%9F%BA%E7%A1%80%EF%BC%8Cadd%2Fremove%2Ftigger%2Fhandle%E6%98%AF%E6%89%80%E6%9C%89%E7%9A%84%E5%9F%BA%E7%A1%80%EF%BC%8C%E6%9C%80%E5%90%8E%E6%89%8D%E6%98%AF%E8%B0%83%E7%94%A8%E6%B5%8F%E8%A7%88%E5%99%A8%E5%8E%9F%E7%94%9F%E6%8E%A5%E5%8F%A3%0A2.%09.deletege()%2F.undelegate()%E4%B8%8E.live()%2F.die()%E7%9A%84%E5%8C%BA%E5%88%AB%E5%9C%A8%E4%BA%8E%E7%BB%91%E5%AE%9A%E4%BA%8B%E4%BB%B6%E6%97%B6%E7%9A%84%E7%88%B6%E8%8A%82%E7%82%B9%E4%B8%8D%E5%90%8C%0A%E5%90%8E%E6%96%87%E9%A2%84%E5%91%8A%EF%BC%9A%E5%B0%81%E8%A3%85%E4%BA%8B%E4%BB%B6%E5%AF%B9%E8%B1%A1%20%E4%BE%BF%E6%8D%B7%E6%8E%A5%E5%8F%A3%E8%A7%A3%E6%9E%90%20ready%E4%B8%93%E9%A2%98%0A" quality="high" allowscriptaccess="always" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer">&nbsp;<a href="javascript:void()" title="收藏这段代码" onclick="code_favorites_do_favorite(this);return false;"><img class="star" src="./[原创] jQuery源码分析-10事件处理-Event-事件绑定与删除-bind unbind+live die+delegat undelegate - nuysoft - ITeye技术网站_files/icon_star.png" alt="收藏代码"><img class="spinner" src="./[原创] jQuery源码分析-10事件处理-Event-事件绑定与删除-bind unbind+live die+delegat undelegate - nuysoft - ITeye技术网站_files/spinner.gif" style="display:none"></a></div></div><ol start="1" class="dp-c"><li><span><span>10.4&nbsp;&nbsp;&nbsp;&nbsp;.bind()&nbsp;.one()&nbsp;&nbsp;</span></span></li><li><span>10.4.1&nbsp;&nbsp;如何使用&nbsp;&nbsp;</span></li><li><span>.bind(&nbsp;eventType,&nbsp;[eventData],&nbsp;handler(eventObject)&nbsp;)&nbsp;&nbsp;&nbsp;在匹配的元素上绑定指定类型的事件处理函数&nbsp;&nbsp;</span></li><li><span>.bind(&nbsp;eventType,&nbsp;[eventData],&nbsp;preventBubble&nbsp;)&nbsp;&nbsp;第三个参数为<span class="keyword">false</span><span>，则阻止浏览器默认行为并停止事件冒泡，默认</span><span class="keyword">true</span><span>&nbsp;&nbsp;</span></span></li><li><span>.bind(&nbsp;events&nbsp;)&nbsp;绑定多个事件，events的键为事件类型，值为对应的事件处理函数&nbsp;&nbsp;</span></li><li><span>.one(&nbsp;eventType,&nbsp;[eventData],&nbsp;handler(eventObject)&nbsp;)&nbsp;&nbsp;&nbsp;&nbsp;在匹配的元素上绑定指定类型的事件处理函数，这个函数最多执行一次&nbsp;&nbsp;</span></li><li><span>其实是改写了事件处理函数，函数执行时先解绑定，再执行&nbsp;&nbsp;</span></li><li><span>10.4.2&nbsp;&nbsp;调用过程&nbsp;&nbsp;&nbsp;</span></li><li><span>jQuery.fn.bind&nbsp;→&nbsp;jQuery.event.add&nbsp;&nbsp;</span></li><li><span>jQuery.fn.one&nbsp;→&nbsp;jQuery.event.add&nbsp;&nbsp;</span></li><li><span>10.4.3&nbsp;&nbsp;源码分析&nbsp;&nbsp;</span></li><li><span><span class="comment">/**</span>&nbsp;</span></li><li><span><span class="comment">&nbsp;*&nbsp;bind:</span>&nbsp;</span></li><li><span><span class="comment">&nbsp;*&nbsp;.bind(&nbsp;eventType,&nbsp;[eventData],&nbsp;handler(eventObject)&nbsp;)&nbsp;在匹配的元素上绑定指定类型的事件处理函数</span>&nbsp;</span></li><li><span><span class="comment">&nbsp;*&nbsp;.bind(&nbsp;eventType,&nbsp;[eventData],&nbsp;preventBubble&nbsp;)&nbsp;第三个参数为false，则阻止浏览器默认行为并停止事件冒泡，默认true</span>&nbsp;</span></li><li><span><span class="comment">&nbsp;*&nbsp;.bind(&nbsp;events&nbsp;)&nbsp;绑定多个事件，events的键为事件类型，值为对应的事件处理函数</span>&nbsp;</span></li><li><span><span class="comment">&nbsp;*&nbsp;</span>&nbsp;</span></li><li><span><span class="comment">&nbsp;*&nbsp;one:</span>&nbsp;</span></li><li><span><span class="comment">&nbsp;*&nbsp;.one(&nbsp;eventType,&nbsp;[eventData],&nbsp;handler(eventObject)&nbsp;)&nbsp;在匹配的元素上绑定指定类型的事件处理函数，这个函数最多执行一次</span>&nbsp;</span></li><li><span><span class="comment">&nbsp;*&nbsp;其实是改写了事件处理函数，函数执行时先解绑定，再执行</span>&nbsp;</span></li><li><span><span class="comment">&nbsp;*/</span><span>&nbsp;&nbsp;</span></span></li><li><span>jQuery.each([<span class="string">"bind"</span><span>,&nbsp;</span><span class="string">"one"</span><span>],&nbsp;</span><span class="keyword">function</span><span>(&nbsp;i,&nbsp;name&nbsp;)&nbsp;{&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;为jQuery对象扩展bind、one方法</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;jQuery.fn[&nbsp;name&nbsp;]&nbsp;=&nbsp;<span class="keyword">function</span><span>(&nbsp;type,&nbsp;data,&nbsp;fn&nbsp;)&nbsp;{&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">var</span><span>&nbsp;handler;&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;Handle&nbsp;object&nbsp;literals</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;绑定多个事件，key为事件类型，type[key]是事件处理函数</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">if</span><span>&nbsp;(&nbsp;</span><span class="keyword">typeof</span><span>&nbsp;type&nbsp;===&nbsp;</span><span class="string">"object"</span><span>&nbsp;)&nbsp;{&nbsp;</span><span class="comment">//</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">for</span><span>&nbsp;(&nbsp;</span><span class="keyword">var</span><span>&nbsp;key&nbsp;</span><span class="keyword">in</span><span>&nbsp;type&nbsp;)&nbsp;{&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">this</span><span>[&nbsp;name&nbsp;](key,&nbsp;data,&nbsp;type[key],&nbsp;fn);&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">return</span><span>&nbsp;</span><span class="keyword">this</span><span>;&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;修正参数：如果没有传入data，或data为false，（jQuery的这种写法很巧妙，但是可读性太差）</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;如果有两个参数，则认为忽略了data：type,&nbsp;fn，结果是：type,&nbsp;undefined,&nbsp;fn</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;如果data是false，则认为是type,&nbsp;false,&nbsp;fn，结果是：type,&nbsp;undefined,&nbsp;false</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">if</span><span>&nbsp;(&nbsp;arguments.length&nbsp;===&nbsp;2&nbsp;||&nbsp;data&nbsp;===&nbsp;</span><span class="keyword">false</span><span>&nbsp;)&nbsp;{&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fn&nbsp;=&nbsp;data;&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data&nbsp;=&nbsp;undefined;&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">if</span><span>&nbsp;(&nbsp;name&nbsp;===&nbsp;</span><span class="string">"one"</span><span>&nbsp;)&nbsp;{&nbsp;</span><span class="comment">//&nbsp;只执行一次</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;handler&nbsp;=&nbsp;<span class="keyword">function</span><span>(&nbsp;event&nbsp;)&nbsp;{&nbsp;</span><span class="comment">//&nbsp;创建一个新的事件处理函数句柄</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;jQuery(&nbsp;<span class="keyword">this</span><span>&nbsp;).unbind(&nbsp;event,&nbsp;handler&nbsp;);&nbsp;</span><span class="comment">//&nbsp;先删除事件</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">return</span><span>&nbsp;fn.apply(&nbsp;</span><span class="keyword">this</span><span>,&nbsp;arguments&nbsp;);&nbsp;</span><span class="comment">//&nbsp;再执行传入的事件处理函数fn，这里this是DOM元素</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;handler.guid&nbsp;=&nbsp;fn.guid&nbsp;||&nbsp;jQuery.guid++;&nbsp;<span class="comment">//&nbsp;同步guid，重新包装后的函数与原始函数的guid统一</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<span class="keyword">else</span><span>&nbsp;{&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;handler&nbsp;=&nbsp;fn;&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">if</span><span>&nbsp;(&nbsp;type&nbsp;===&nbsp;</span><span class="string">"unload"</span><span>&nbsp;&amp;&amp;&nbsp;name&nbsp;!==&nbsp;</span><span class="string">"one"</span><span>&nbsp;)&nbsp;{&nbsp;</span><span class="comment">//&nbsp;如果是unload事件，则只执行一次</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">this</span><span>.one(&nbsp;type,&nbsp;data,&nbsp;fn&nbsp;);&nbsp;</span><span class="comment">//&nbsp;迭代调用，没有清晰的结构很危险</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<span class="keyword">else</span><span>&nbsp;{&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">for</span><span>&nbsp;(&nbsp;</span><span class="keyword">var</span><span>&nbsp;i&nbsp;=&nbsp;0,&nbsp;l&nbsp;=&nbsp;</span><span class="keyword">this</span><span>.length;&nbsp;i&nbsp;&lt;&nbsp;l;&nbsp;i++&nbsp;)&nbsp;{&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;jQuery.event.add(&nbsp;<span class="keyword">this</span><span>[i],&nbsp;type,&nbsp;handler,&nbsp;data&nbsp;);&nbsp;</span><span class="comment">//&nbsp;遍历匹配的元素，并绑定事件处理函数</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;返回jQuery对象，使得可以继续链式调用</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">return</span><span>&nbsp;</span><span class="keyword">this</span><span>;&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;};&nbsp;&nbsp;</span></li><li><span>});&nbsp;&nbsp;</span></li><li><span>10.4.4&nbsp;&nbsp;jQuery.event.add&nbsp;&nbsp;</span></li><li><span>.bind()和.one()都调用了jQuery.event.add来实现，为元素elem添加类型types的句柄handler，事实上所有的事件绑定最后都通过jQuery.event.add来实现。其执行过程大致如下：&nbsp;&nbsp;</span></li><li><span>1.&nbsp;&nbsp;先调用jQuery._data从$.cache中取出已有的事件缓存（私有数据，Cache的解析详见数据缓存）&nbsp;&nbsp;</span></li><li><span>2.&nbsp;&nbsp;如果是第一次在DOM元素上绑定该类型事件句柄，在DOM元素上绑定jQuery.event.handle，作为统一的事件响应入口&nbsp;&nbsp;</span></li><li><span>3.&nbsp;&nbsp;将封装后的事件句柄放入缓存中&nbsp;&nbsp;</span></li><li><span>传入的事件句柄，会被封装到对象handleObj的handle属性上，此外handleObj还会填充guid、type、namespace、data属性；DOM事件句柄elemData.handle指向jQuery.event.handle，即jQuery在DOM元素上绑定事件时总是绑定同样的DOM事件句柄jQuery.event.handle。&nbsp;&nbsp;</span></li><li><span>事件句柄在缓存$.cache中的数据结构如下，事件类型和事件句柄都存储在属性events中，属性handle存放的执行这些事件句柄的DOM事件句柄：&nbsp;&nbsp;</span></li><li><span>elemData&nbsp;=&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;events:&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string">'click'</span><span>&nbsp;:&nbsp;[&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;guid:&nbsp;5,&nbsp;type:&nbsp;<span class="string">'click'</span><span>,&nbsp;namespace:&nbsp;</span><span class="string">''</span><span>,&nbsp;data:&nbsp;undefined,&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;handle:&nbsp;{&nbsp;guid:&nbsp;5,&nbsp;prototype:&nbsp;{}&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;...&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;],&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string">'keypress'</span><span>&nbsp;:&nbsp;[&nbsp;...&nbsp;]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;},&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;handle:&nbsp;{&nbsp;<span class="comment">//&nbsp;DOM事件句柄&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elem:&nbsp;elem,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;prototype:&nbsp;{}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li><span>}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li><span>看看jQuery.event.add的源码解析：&nbsp;&nbsp;</span></li><li><span>jQuery.event&nbsp;=&nbsp;{&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;Bind&nbsp;an&nbsp;event&nbsp;to&nbsp;an&nbsp;element</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;Original&nbsp;by&nbsp;Dean&nbsp;Edwards</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;为元素elem添加类型types的句柄handler</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;add:&nbsp;<span class="keyword">function</span><span>(&nbsp;elem,&nbsp;types,&nbsp;handler,&nbsp;data&nbsp;)&nbsp;{&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;忽略&nbsp;Text&nbsp;Comment</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">if</span><span>&nbsp;(&nbsp;elem.nodeType&nbsp;===&nbsp;3&nbsp;||&nbsp;elem.nodeType&nbsp;===&nbsp;8&nbsp;)&nbsp;{&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">return</span><span>;&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">if</span><span>&nbsp;(&nbsp;handler&nbsp;===&nbsp;</span><span class="keyword">false</span><span>&nbsp;)&nbsp;{&nbsp;</span><span class="comment">//&nbsp;如果事件处理函数是false，则用returnFalse代替false</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;handler&nbsp;=&nbsp;returnFalse;&nbsp;<span class="comment">//&nbsp;returnFalse会取消事件的默认行为</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<span class="keyword">else</span><span>&nbsp;</span><span class="keyword">if</span><span>&nbsp;(&nbsp;!handler&nbsp;)&nbsp;{&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;Fixes&nbsp;bug&nbsp;#7229.&nbsp;Fix&nbsp;recommended&nbsp;by&nbsp;jdalton</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">return</span><span>;&nbsp;</span><span class="comment">//&nbsp;如果handler是undefined&nbsp;null&nbsp;''，则直接返回，不执行后边的代码</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">var</span><span>&nbsp;handleObjIn,&nbsp;handleObj;&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">if</span><span>&nbsp;(&nbsp;handler.handler&nbsp;)&nbsp;{&nbsp;</span><span class="comment">//&nbsp;如果已经是封装过的jQuery事件对象（JS真是愁人啊，弱类型，只能通过特性、属性判断对象的类型）</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;handleObjIn&nbsp;=&nbsp;handler;&nbsp;<span class="comment">//&nbsp;handleObj是DOM事件句柄对象（丰富后的jQuery.event.handle）</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;handler&nbsp;=&nbsp;handleObjIn.handler;&nbsp;<span class="comment">//&nbsp;handler始终是个函数</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;Make&nbsp;sure&nbsp;that&nbsp;the&nbsp;function&nbsp;being&nbsp;executed&nbsp;has&nbsp;a&nbsp;unique&nbsp;ID</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">if</span><span>&nbsp;(&nbsp;!handler.guid&nbsp;)&nbsp;{&nbsp;</span><span class="comment">//&nbsp;如果没有分配唯一id，则分配一个</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;handler.guid&nbsp;=&nbsp;jQuery.guid++;&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;Init&nbsp;the&nbsp;element's&nbsp;event&nbsp;structure</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;内部数据存储在内部对象上，因此elemData不应该为空，除非elem不支持jQuery缓存（embed、object、applet）</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">var</span><span>&nbsp;elemData&nbsp;=&nbsp;jQuery._data(&nbsp;elem&nbsp;);&nbsp;</span><span class="comment">//&nbsp;仅仅调用_data接口一次，后续直接在返回的对象上操作</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;If&nbsp;no&nbsp;elemData&nbsp;is&nbsp;found&nbsp;then&nbsp;we&nbsp;must&nbsp;be&nbsp;trying&nbsp;to&nbsp;bind&nbsp;to&nbsp;one&nbsp;of&nbsp;the</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;banned&nbsp;noData&nbsp;elements</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;如果elemData不存在，说明是一个不支持缓存的元素上绑定事件，直接返回</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">if</span><span>&nbsp;(&nbsp;!elemData&nbsp;)&nbsp;{&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">return</span><span>;&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">var</span><span>&nbsp;events&nbsp;=&nbsp;elemData.events,&nbsp;</span><span class="comment">//&nbsp;事件类型和事件句柄都存储在属性events中</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;eventHandle&nbsp;=&nbsp;elemData.handle;&nbsp;<span class="comment">//&nbsp;属性handle存放的执行这些事件句柄的DOM事件句柄</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">if</span><span>&nbsp;(&nbsp;!events&nbsp;)&nbsp;{&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elemData.events&nbsp;=&nbsp;events&nbsp;=&nbsp;{};&nbsp;<span class="comment">//&nbsp;初始化一个存放事件的对象，事件名为key，事件函数为value</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">if</span><span>&nbsp;(&nbsp;!eventHandle&nbsp;)&nbsp;{&nbsp;</span><span class="comment">//&nbsp;初始化一个执行事件函数的函数</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elemData.handle&nbsp;=&nbsp;eventHandle&nbsp;=&nbsp;<span class="keyword">function</span><span>(&nbsp;e&nbsp;)&nbsp;{&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;Discard&nbsp;the&nbsp;second&nbsp;event&nbsp;of&nbsp;a&nbsp;jQuery.event.trigger()&nbsp;and</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;when&nbsp;an&nbsp;event&nbsp;is&nbsp;called&nbsp;after&nbsp;a&nbsp;page&nbsp;has&nbsp;unloaded</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;调用jQuery.event.handler</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;jQuery.event.handler是什么意思？</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">return</span><span>&nbsp;</span><span class="keyword">typeof</span><span>&nbsp;jQuery&nbsp;!==&nbsp;</span><span class="string">"undefined"</span><span>&nbsp;&amp;&amp;&nbsp;(!e&nbsp;||&nbsp;jQuery.event.triggered&nbsp;!==&nbsp;e.type)&nbsp;?&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;jQuery.event.handle.apply(&nbsp;eventHandle.elem,&nbsp;arguments&nbsp;)&nbsp;:&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;undefined;&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;Add&nbsp;elem&nbsp;as&nbsp;a&nbsp;property&nbsp;of&nbsp;the&nbsp;handle&nbsp;function</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;This&nbsp;is&nbsp;to&nbsp;prevent&nbsp;a&nbsp;memory&nbsp;leak&nbsp;with&nbsp;non-native&nbsp;events&nbsp;in&nbsp;IE.</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;内存泄漏？</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;将elem作为eventHandle的属性存储，用来避免IE中非本地事件的内存泄漏</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;eventHandle.elem&nbsp;=&nbsp;elem;&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;Handle&nbsp;multiple&nbsp;events&nbsp;separated&nbsp;by&nbsp;a&nbsp;space</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;jQuery(...).bind("mouseover&nbsp;mouseout",&nbsp;fn);</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;types&nbsp;=&nbsp;types.split(<span class="string">"&nbsp;"</span><span>);&nbsp;</span><span class="comment">//&nbsp;同时绑定的多个事件可以用空格隔开</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;为什么有的地方用字符串直接量，有的地方要用正则呢？因为正则可以进行全局匹配g</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">var</span><span>&nbsp;type,&nbsp;i&nbsp;=&nbsp;0,&nbsp;namespaces;&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">while</span><span>&nbsp;(&nbsp;(type&nbsp;=&nbsp;types[&nbsp;i++&nbsp;])&nbsp;)&nbsp;{&nbsp;</span><span class="comment">//&nbsp;又一种遍历数组的方法，故意秀技巧么？</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;handleObj&nbsp;=&nbsp;handleObjIn&nbsp;?&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;jQuery.extend({},&nbsp;handleObjIn)&nbsp;:&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;handler:&nbsp;handler,&nbsp;data:&nbsp;data&nbsp;};&nbsp;<span class="comment">//&nbsp;创建事件句柄对象，后边还会添加属性：guid&nbsp;anmespace&nbsp;type</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;Namespaced&nbsp;event&nbsp;handlers</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;如果事件字符串中有句号.，则说明有命名空间</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">if</span><span>&nbsp;(&nbsp;type.indexOf(</span><span class="string">"."</span><span>)&nbsp;&gt;&nbsp;-1&nbsp;)&nbsp;{&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;namespaces&nbsp;=&nbsp;type.split(<span class="string">"."</span><span>);&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type&nbsp;=&nbsp;namespaces.shift();&nbsp;<span class="comment">//&nbsp;取出第一个元素</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;handleObj.namespace&nbsp;=&nbsp;namespaces.slice(0).sort().join(<span class="string">"."</span><span>);&nbsp;</span><span class="comment">//&nbsp;将于下部分作为命名空间，存储到属性namespace中</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<span class="keyword">else</span><span>&nbsp;{&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;namespaces&nbsp;=&nbsp;[];&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;handleObj.namespace&nbsp;=&nbsp;<span class="string">""</span><span>;&nbsp;</span><span class="comment">//&nbsp;没有命名空间</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;handleObj.type&nbsp;=&nbsp;type;&nbsp;<span class="comment">//&nbsp;事件类型</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">if</span><span>&nbsp;(&nbsp;!handleObj.guid&nbsp;)&nbsp;{&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;handleObj.guid&nbsp;=&nbsp;handler.guid;&nbsp;<span class="comment">//&nbsp;事件对象唯一id</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;Get&nbsp;the&nbsp;current&nbsp;list&nbsp;of&nbsp;functions&nbsp;bound&nbsp;to&nbsp;this&nbsp;event</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">var</span><span>&nbsp;handlers&nbsp;=&nbsp;events[&nbsp;type&nbsp;],&nbsp;</span><span class="comment">//&nbsp;事件句柄队列，取出已经存在函数数组</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;special&nbsp;=&nbsp;jQuery.event.special[&nbsp;type&nbsp;]&nbsp;||&nbsp;{};&nbsp;<span class="comment">//&nbsp;特殊处理的事件</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;Init&nbsp;the&nbsp;event&nbsp;handler&nbsp;queue</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">if</span><span>&nbsp;(&nbsp;!handlers&nbsp;)&nbsp;{&nbsp;</span><span class="comment">//&nbsp;如果没有绑定事件，则初始化为一个空数组</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;handlers&nbsp;=&nbsp;events[&nbsp;type&nbsp;]&nbsp;=&nbsp;[];&nbsp;<span class="comment">//&nbsp;</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;Check&nbsp;for&nbsp;a&nbsp;special&nbsp;event&nbsp;handler</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;Only&nbsp;use&nbsp;addEventListener/attachEvent&nbsp;if&nbsp;the&nbsp;special</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;events&nbsp;handler&nbsp;returns&nbsp;false</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;如果特殊事件没有setup属性&nbsp;或&nbsp;setup返回false，则用浏览器原生的绑定事件接口addEventListener/addEventListener，例如live事件</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">if</span><span>&nbsp;(&nbsp;!special.setup&nbsp;||&nbsp;special.setup.call(&nbsp;elem,&nbsp;data,&nbsp;namespaces,&nbsp;eventHandle&nbsp;)&nbsp;===&nbsp;</span><span class="keyword">false</span><span>&nbsp;)&nbsp;{&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;Bind&nbsp;the&nbsp;global&nbsp;event&nbsp;handler&nbsp;to&nbsp;the&nbsp;element</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;绑定事件句柄</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">if</span><span>&nbsp;(&nbsp;elem.addEventListener&nbsp;)&nbsp;{&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elem.addEventListener(&nbsp;type,&nbsp;eventHandle,&nbsp;<span class="keyword">false</span><span>&nbsp;);&nbsp;</span><span class="comment">//&nbsp;jQuery绑定的事件默认都是起泡阶段捕获</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<span class="keyword">else</span><span>&nbsp;</span><span class="keyword">if</span><span>&nbsp;(&nbsp;elem.attachEvent&nbsp;)&nbsp;{&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elem.attachEvent(&nbsp;<span class="string">"on"</span><span>&nbsp;+&nbsp;type,&nbsp;eventHandle&nbsp;);&nbsp;</span><span class="comment">//&nbsp;IE事件模型中没有2级DOM事件模型具有的事件捕捉的概念，只有起泡阶段</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">if</span><span>&nbsp;(&nbsp;special.add&nbsp;)&nbsp;{&nbsp;</span><span class="comment">//&nbsp;如果有add方法，就调用</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;special.add.call(&nbsp;elem,&nbsp;handleObj&nbsp;);&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">if</span><span>&nbsp;(&nbsp;!handleObj.handler.guid&nbsp;)&nbsp;{&nbsp;</span><span class="comment">//&nbsp;始终保证事件句柄有唯一的id</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;handleObj.handler.guid&nbsp;=&nbsp;handler.guid;&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;Add&nbsp;the&nbsp;function&nbsp;to&nbsp;the&nbsp;element's&nbsp;handler&nbsp;list</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;将句柄对象handleObj，加入到句柄数组handler中，</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;handleObj包含以下属性：data&nbsp;唯一guid&nbsp;命名空间namespace&nbsp;事件类型type&nbsp;handler函数</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;handlers.push(&nbsp;handleObj&nbsp;);&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;Keep&nbsp;track&nbsp;of&nbsp;which&nbsp;events&nbsp;have&nbsp;been&nbsp;used,&nbsp;for&nbsp;event&nbsp;optimization</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;记录已经使用的事件，用于事件优化？怎么个优化？</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;jQuery.event.global[&nbsp;type&nbsp;]&nbsp;=&nbsp;<span class="keyword">true</span><span>;&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;Nullify&nbsp;elem&nbsp;to&nbsp;prevent&nbsp;memory&nbsp;leaks&nbsp;in&nbsp;IE</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;将elem置为null，避免IE中的内存泄漏（这行代码真是坑爹啊，没有无数次的测试确认，怎么可能想到这行代码呢）</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elem&nbsp;=&nbsp;<span class="keyword">null</span><span>;&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;},&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;...</span><span>&nbsp;&nbsp;</span></span></li><li><span>};&nbsp;&nbsp;</span></li><li><span>10.5&nbsp;&nbsp;&nbsp;&nbsp;.unbind()&nbsp;&nbsp;</span></li><li><span>10.5.1&nbsp;&nbsp;如何使用&nbsp;&nbsp;</span></li><li><span>.unbind(&nbsp;[eventType]&nbsp;[,&nbsp;handler(eventObject)]&nbsp;)&nbsp;从匹配的元素上删除一个之前绑定的事件句柄&nbsp;&nbsp;</span></li><li><span>如果没有参数，删除所有事件句柄&nbsp;&nbsp;</span></li><li><span>.unbind(&nbsp;eventType,&nbsp;<span class="keyword">false</span><span>&nbsp;)&nbsp;删除通过.bind(&nbsp;eventType,&nbsp;</span><span class="keyword">false</span><span>&nbsp;)绑定的事件句柄&nbsp;&nbsp;</span></span></li><li><span>.unbind(&nbsp;event&nbsp;)&nbsp;&nbsp;&nbsp;&nbsp;看不懂。。。&nbsp;&nbsp;</span></li><li><span>10.5.2&nbsp;&nbsp;调用过程&nbsp;&nbsp;</span></li><li><span>jQuery.fn.unbind&nbsp;→&nbsp;jQuery.event.remove&nbsp;&nbsp;</span></li><li><span>10.5.3&nbsp;&nbsp;源码分析&nbsp;&nbsp;</span></li><li><span>jQuery.fn.extend({&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;删除句柄：删除一个或多个之前附加的事件句柄，jQuery事件只在起泡阶段捕获，不需要再定义控制捕获阶段的参数</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;unbind:&nbsp;<span class="keyword">function</span><span>(&nbsp;type,&nbsp;fn&nbsp;)&nbsp;{&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;Handle&nbsp;object&nbsp;literals</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;一次删除多个事件句柄，key是事件类型，type[key]是事件句柄（这里是迭代复用）</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;!type.preventDefault&nbsp;表明这不是一个就jQuery事件对象</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">if</span><span>&nbsp;(&nbsp;</span><span class="keyword">typeof</span><span>&nbsp;type&nbsp;===&nbsp;</span><span class="string">"object"</span><span>&nbsp;&amp;&amp;&nbsp;!type.preventDefault&nbsp;)&nbsp;{&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">for</span><span>&nbsp;(&nbsp;</span><span class="keyword">var</span><span>&nbsp;key&nbsp;</span><span class="keyword">in</span><span>&nbsp;type&nbsp;)&nbsp;{&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">this</span><span>.unbind(key,&nbsp;type[key]);&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;到这里，type可能是字符串，也可能是jQuery事件对象</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<span class="keyword">else</span><span>&nbsp;{&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">for</span><span>&nbsp;(&nbsp;</span><span class="keyword">var</span><span>&nbsp;i&nbsp;=&nbsp;0,&nbsp;l&nbsp;=&nbsp;</span><span class="keyword">this</span><span>.length;&nbsp;i&nbsp;&lt;&nbsp;l;&nbsp;i++&nbsp;)&nbsp;{&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;jQuery.event.remove(&nbsp;<span class="keyword">this</span><span>[i],&nbsp;type,&nbsp;fn&nbsp;);&nbsp;</span><span class="comment">//&nbsp;调用remove删除句柄</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">return</span><span>&nbsp;</span><span class="keyword">this</span><span>;&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;},&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;...</span><span>&nbsp;&nbsp;</span></span></li><li><span>};&nbsp;&nbsp;</span></li><li><span>10.5.4&nbsp;&nbsp;jQuery.event.remove&nbsp;&nbsp;</span></li><li><span>.unbind()通过调用jQuery.event.remove，删除之前绑定的一个或多个事件句柄，事实上所有的句柄删除最后都通过jQuery.event.remove实现，其执行过程大致如下：&nbsp;&nbsp;</span></li><li><span>1.&nbsp;现调用jQuery._data从缓存$.cache中取出elem对应的所有数组（内部数据，与调用jQuery.data存储的数据稍有不同&nbsp;&nbsp;&nbsp;</span></li><li><span>2.&nbsp;如果未传入types则移除所有事件句柄，如果types是命名空间，则移除所有与命名空间匹配的事件句柄&nbsp;&nbsp;</span></li><li><span>3.&nbsp;如果是多个事件，则分割后遍历&nbsp;&nbsp;</span></li><li><span>4.&nbsp;如果未指定删除哪个事件句柄，则删除事件类型对应的全部句柄，或者与命名空间匹配的全部句柄&nbsp;&nbsp;&nbsp;</span></li><li><span>5.&nbsp;如果指定了删除某个事件句柄，则删除指定的事件句柄&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li><span>6.&nbsp;所有的事件句柄删除，都直接在事件句柄数组jQuery._data(&nbsp;elem&nbsp;).events[&nbsp;type&nbsp;]上调用splice操作&nbsp;&nbsp;&nbsp;</span></li><li><span>7.&nbsp;最后检查事件句柄数组的长度，如果为0，或为1但要删除，则移除绑定在elem上DOM事件&nbsp;&nbsp;&nbsp;</span></li><li><span>8.&nbsp;最后的最后，如果elem对应的所有事件句柄events都已删除，则从缓存中移走elem的内部数据&nbsp;&nbsp;</span></li><li><span>9.&nbsp;在以上的各个过程，都要检查是否有特例需要处理&nbsp;&nbsp;&nbsp;</span></li><li><span>看看它的源码分析：&nbsp;&nbsp;</span></li><li><span>jQuery.event&nbsp;=&nbsp;{&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;...</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">/**</span>&nbsp;</span></li><li><span><span class="comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;移除元素elem上的一个或多个或一组事件</span>&nbsp;</span></li><li><span><span class="comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;pos&nbsp;指要移除的是第几个types事件，可以减少遍历次数</span>&nbsp;</span></li><li><span><span class="comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;handler的属性guid唯一标识某个事件对象，移除时通过比较guid是否相等</span>&nbsp;</span></li><li><span><span class="comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span><span>&nbsp;&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;remove:&nbsp;<span class="keyword">function</span><span>(&nbsp;elem,&nbsp;types,&nbsp;handler,&nbsp;pos&nbsp;)&nbsp;{&nbsp;</span><span class="comment">//&nbsp;add/remove都是作为jQuery内部接口使用</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;don't&nbsp;do&nbsp;events&nbsp;on&nbsp;text&nbsp;and&nbsp;comment&nbsp;nodes</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;忽略文本元素Text和注释元素Comment</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">if</span><span>&nbsp;(&nbsp;elem.nodeType&nbsp;===&nbsp;3&nbsp;||&nbsp;elem.nodeType&nbsp;===&nbsp;8&nbsp;)&nbsp;{&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">return</span><span>;&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">if</span><span>&nbsp;(&nbsp;handler&nbsp;===&nbsp;</span><span class="keyword">false</span><span>&nbsp;)&nbsp;{&nbsp;</span><span class="comment">//&nbsp;替换布尔型handler为函数，保证handler始终是一个函数，使得remove接口的使用更加便捷</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;handler&nbsp;=&nbsp;returnFalse;&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">var</span><span>&nbsp;ret,&nbsp;type,&nbsp;fn,&nbsp;j,&nbsp;i&nbsp;=&nbsp;0,&nbsp;all,&nbsp;namespaces,&nbsp;namespace,&nbsp;special,&nbsp;eventType,&nbsp;handleObj,&nbsp;origType,&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elemData&nbsp;=&nbsp;jQuery.hasData(&nbsp;elem&nbsp;)&nbsp;&amp;&amp;&nbsp;jQuery._data(&nbsp;elem&nbsp;),&nbsp;<span class="comment">//&nbsp;如果在缓存cache中有数据，则取出，否则elemData为undefine</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;因为jQuery._data总是返回一个对象，因此要先判断缓存cache中是否有数组</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;events&nbsp;=&nbsp;elemData&nbsp;&amp;&amp;&nbsp;elemData.events;&nbsp;<span class="comment">//&nbsp;取出事件句柄数组，用正则表达式可以将多行代码合并为一行，这里可以用if-else或三元表达式代替</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">if</span><span>&nbsp;(&nbsp;!elemData&nbsp;||&nbsp;!events&nbsp;)&nbsp;{&nbsp;</span><span class="comment">//&nbsp;如果未绑定，则忽略本次调用，直接返回</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">return</span><span>;&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;types&nbsp;is&nbsp;actually&nbsp;an&nbsp;event&nbsp;object&nbsp;here</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;如果types是一个jQuery&nbsp;Event对象，则。。。</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">if</span><span>&nbsp;(&nbsp;types&nbsp;&amp;&amp;&nbsp;types.type&nbsp;)&nbsp;{&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;handler&nbsp;=&nbsp;types.handler;&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;types&nbsp;=&nbsp;types.type;&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;Unbind&nbsp;all&nbsp;events&nbsp;for&nbsp;the&nbsp;element</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;如果types为false（强制转换类型），则移除所有事件</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;如果types是字符串，并且以句号开头，则移除types命名空间下的指定事件（type+types）</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">if</span><span>&nbsp;(&nbsp;!types&nbsp;||&nbsp;</span><span class="keyword">typeof</span><span>&nbsp;types&nbsp;===&nbsp;</span><span class="string">"string"</span><span>&nbsp;&amp;&amp;&nbsp;types.charAt(0)&nbsp;===&nbsp;</span><span class="string">"."</span><span>&nbsp;)&nbsp;{&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;types&nbsp;=&nbsp;types&nbsp;||&nbsp;<span class="string">""</span><span>;&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">for</span><span>&nbsp;(&nbsp;type&nbsp;</span><span class="keyword">in</span><span>&nbsp;events&nbsp;)&nbsp;{&nbsp;</span><span class="comment">//&nbsp;遍历events，移除所有已绑定的事件，这里是迭代调用，jQuery的源码很精致，能复用的代码会尽量复用</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;jQuery.event.remove(&nbsp;elem,&nbsp;type&nbsp;+&nbsp;types&nbsp;);&nbsp;<span class="comment">//&nbsp;全部事件，或某一命名空间下的全部事件</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">return</span><span>;&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;Handle&nbsp;multiple&nbsp;events&nbsp;separated&nbsp;by&nbsp;a&nbsp;space</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;jQuery(...).unbind("mouseover&nbsp;mouseout",&nbsp;fn);</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;同时移除多个事件，事件之间用空格隔开，使得remove接口很灵活</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;types&nbsp;=&nbsp;types.split(<span class="string">"&nbsp;"</span><span>);&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;个人觉的变量i的定义与使用离得那么远，不是好习惯，像这种局部使用的变量，应该哪里用就在哪里定义</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;可能作者觉得集中定义显得代码不凌乱吧</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">while</span><span>&nbsp;(&nbsp;(type&nbsp;=&nbsp;types[&nbsp;i++&nbsp;])&nbsp;)&nbsp;{&nbsp;</span><span class="comment">//&nbsp;有一种循环方式</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;origType&nbsp;=&nbsp;type;&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;handleObj&nbsp;=&nbsp;<span class="keyword">null</span><span>;&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;all&nbsp;=&nbsp;type.indexOf(<span class="string">"."</span><span>)&nbsp;&lt;&nbsp;0;&nbsp;</span><span class="comment">//&nbsp;all在这里表示移除的是type命名空间下的全部事件对象，小于0表示不是以.开头</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;all为true表示是事件，false表示命名空间</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;namespaces&nbsp;=&nbsp;[];&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">if</span><span>&nbsp;(&nbsp;!all&nbsp;)&nbsp;{&nbsp;</span><span class="comment">//&nbsp;如果以.开头，即type是命名空间，构建命名空间正则表达式</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;Namespaced&nbsp;event&nbsp;handlers</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;namespaces&nbsp;=&nbsp;type.split(<span class="string">"."</span><span>);&nbsp;</span><span class="comment">//&nbsp;全部命名空间</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type&nbsp;=&nbsp;namespaces.shift();&nbsp;<span class="comment">//&nbsp;取出第一个作为事件类型，其余的为命名空间</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;namespace&nbsp;=&nbsp;<span class="keyword">new</span><span>&nbsp;RegExp(</span><span class="string">"(^|\\.)"</span><span>&nbsp;+&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;jQuery.map(&nbsp;namespaces.slice(0).sort(),&nbsp;fcleanup&nbsp;).join(<span class="string">"\\.(?:.*\\.)?"</span><span>)&nbsp;+&nbsp;</span><span class="string">"(\\.|$)"</span><span>);&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;这里要动态创建正则，因此用了&nbsp;new&nbsp;RegExp&nbsp;的方式</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;eventType&nbsp;=&nbsp;events[&nbsp;type&nbsp;];&nbsp;<span class="comment">//&nbsp;取出type对应的事件对象数组</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">if</span><span>&nbsp;(&nbsp;!eventType&nbsp;)&nbsp;{&nbsp;</span><span class="comment">//&nbsp;如果type对应的事件对象数组不存在，则跳过本次循环（既然不存在就不必移除了）</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">continue</span><span>;&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">if</span><span>&nbsp;(&nbsp;!handler&nbsp;)&nbsp;{&nbsp;</span><span class="comment">//&nbsp;没有指定移除哪个事件对象，handler其实是一个带有guid属性的函数，因为通过guid可以找到对应的事件对象，因此这里依然称handler为事件对象</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">for</span><span>&nbsp;(&nbsp;j&nbsp;=&nbsp;0;&nbsp;j&nbsp;&lt;&nbsp;eventType.length;&nbsp;j++&nbsp;)&nbsp;{&nbsp;</span><span class="comment">//&nbsp;遍历事件对象数组，这里因为是遍历一个动态的数组，所以没有定义eventType.length变量</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;handleObj&nbsp;=&nbsp;eventType[&nbsp;j&nbsp;];&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">if</span><span>&nbsp;(&nbsp;all&nbsp;||&nbsp;namespace.test(&nbsp;handleObj.namespace&nbsp;)&nbsp;)&nbsp;{&nbsp;</span><span class="comment">//&nbsp;如果是事件或命名空间匹配</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;jQuery.event.remove(&nbsp;elem,&nbsp;origType,&nbsp;handleObj.handler,&nbsp;j&nbsp;);&nbsp;<span class="comment">//&nbsp;取出事件对象，迭代调用remove接口</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;handleObj.handler有guid属性，因此迭代调用remove依然可以匹配到对应handleObj，事实上这里也可以改写为传入handleObj</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;注意最后一个参数j，remove的pos不为null，就不会在其他地方被splice删除，所以下一行才会splice（这个问题的处理太乱了）</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;eventType.splice(&nbsp;j--,&nbsp;1&nbsp;);&nbsp;<span class="comment">//&nbsp;如果循环遍历的是一个变化的数组，则可以用这种方式：j++之前先执行j--，保证不会因为数组下标的错误导致某些数组元素遍历不到，秀！</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;如果未指定删除哪个事件句柄，则删除事件类型对应的全部句柄，或者与命名空间匹配的全部句柄</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;这里对$.cache的操作，是通过对&nbsp;eventType&nbsp;=&nbsp;jQuery._data(&nbsp;elem&nbsp;).events[&nbsp;type&nbsp;]的直接操作进行维护，直接操作事件句柄数组</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;如果是我，可能会再开发一个接口供客户端进行这种微操，其实没必要。</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">continue</span><span>;&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;到这里，说明指定事件句柄handler</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;special&nbsp;=&nbsp;jQuery.event.special[&nbsp;type&nbsp;]&nbsp;||&nbsp;{};&nbsp;<span class="comment">//&nbsp;特例</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;如果没有指定pos，则默认从0开始遍历，这里的pos可以减少遍历次数，提高性能，多么精致的代码</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;本人喜欢这种极致的代码，更喜欢优雅的代码，更注重代码的可读性，稍微的性能下降可以接受</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">for</span><span>&nbsp;(&nbsp;j&nbsp;=&nbsp;pos&nbsp;||&nbsp;0;&nbsp;j&nbsp;&lt;&nbsp;eventType.length;&nbsp;j++&nbsp;)&nbsp;{&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;handleObj&nbsp;=&nbsp;eventType[&nbsp;j&nbsp;];&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">if</span><span>&nbsp;(&nbsp;handler.guid&nbsp;===&nbsp;handleObj.guid&nbsp;)&nbsp;{&nbsp;</span><span class="comment">//&nbsp;比较事件函数的guid和时间对象的guid，===可以避免类型转换，稍微提高性能</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;remove&nbsp;the&nbsp;given&nbsp;handler&nbsp;for&nbsp;the&nbsp;given&nbsp;type</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">if</span><span>&nbsp;(&nbsp;all&nbsp;||&nbsp;namespace.test(&nbsp;handleObj.namespace&nbsp;)&nbsp;)&nbsp;{&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">if</span><span>&nbsp;(&nbsp;pos&nbsp;==&nbsp;</span><span class="keyword">null</span><span>&nbsp;)&nbsp;{&nbsp;</span><span class="comment">//&nbsp;如果没有指定pos，匹配到后就删除</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;eventType.splice(&nbsp;j--,&nbsp;1&nbsp;);&nbsp;<span class="comment">//&nbsp;j++之前先j--，避免数组变化导致遍历错误</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">if</span><span>&nbsp;(&nbsp;special.remove&nbsp;)&nbsp;{&nbsp;</span><span class="comment">//&nbsp;如果有自定义的remove方法，则调用（似乎只有live有add&nbsp;remove方法）</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;special.remove.call(&nbsp;elem,&nbsp;handleObj&nbsp;);&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;因为guid是全局唯一的，所以匹配到guid对应的事件就可以退出了</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">if</span><span>&nbsp;(&nbsp;pos&nbsp;!=&nbsp;</span><span class="keyword">null</span><span>&nbsp;)&nbsp;{&nbsp;</span><span class="comment">//&nbsp;如果pos不为null，说明是要删除指定的事件对象，任务完成，退出</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">break</span><span>;&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;remove&nbsp;generic&nbsp;event&nbsp;handler&nbsp;if&nbsp;no&nbsp;more&nbsp;handlers&nbsp;exist</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;如果type对应的事件对象数组为空，或者发现只剩一个，则移除绑定在elem上浏览器原生事件</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">if</span><span>&nbsp;(&nbsp;eventType.length&nbsp;===&nbsp;0&nbsp;||&nbsp;pos&nbsp;!=&nbsp;</span><span class="keyword">null</span><span>&nbsp;&amp;&amp;&nbsp;eventType.length&nbsp;===&nbsp;1&nbsp;)&nbsp;{&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;检查special是否有自定义的teardown，优先调用</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;这一行的巧妙支出在于：</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;1.&nbsp;special不会为null或undefined，如果没有找到会被赋值为{}，是空设置模式的应用</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;2.&nbsp;首先巧妙的判断special.teardown是否存在，如果不存在则认为是普通事件，如果存在则可以调用teardown</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;3.&nbsp;在jQuery源码中你看到过没有返回值的函数码？似乎没有，teardown返回false表示失败，还得用普通方式删除</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">if</span><span>&nbsp;(&nbsp;!special.teardown&nbsp;||&nbsp;special.teardown.call(&nbsp;elem,&nbsp;namespaces&nbsp;)&nbsp;===&nbsp;</span><span class="keyword">false</span><span>&nbsp;)&nbsp;{&nbsp;&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;jQuery.removeEvent(&nbsp;elem,&nbsp;type,&nbsp;elemData.handle&nbsp;);&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ret&nbsp;=&nbsp;<span class="keyword">null</span><span>;&nbsp;</span><span class="comment">//&nbsp;这个变量搞笑了，自从定义之后就从来就没用过，明显多余，可以遗留代码里的变量吧</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">delete</span><span>&nbsp;events[&nbsp;type&nbsp;];&nbsp;</span><span class="comment">//&nbsp;删除类型属性，还是直接对数组句柄数组操作，根本没有什么缓存微操接口</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;Remove&nbsp;the&nbsp;expando&nbsp;if&nbsp;it's&nbsp;no&nbsp;longer&nbsp;used</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;从jQuery.cache中移除elem的数据，最后检查elemData.events</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">if</span><span>&nbsp;(&nbsp;jQuery.isEmptyObject(&nbsp;events&nbsp;)&nbsp;)&nbsp;{&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">var</span><span>&nbsp;handle&nbsp;=&nbsp;elemData.handle;&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">if</span><span>&nbsp;(&nbsp;handle&nbsp;)&nbsp;{&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;handle.elem&nbsp;=&nbsp;<span class="keyword">null</span><span>;&nbsp;</span><span class="comment">//&nbsp;置空，删除对HTML元素的引用，避免因垃圾回收机制不起作用导致的浏览器内存泄漏</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;这是一个非常好的技巧，我们在JavaScript中引用完HTML元素后一定要置空。</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">delete</span><span>&nbsp;elemData.events;&nbsp;</span><span class="comment">//&nbsp;删除存储事件句柄的对象</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">delete</span><span>&nbsp;elemData.handle;&nbsp;</span><span class="comment">//&nbsp;删除DOM事件句柄</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">if</span><span>&nbsp;(&nbsp;jQuery.isEmptyObject(&nbsp;elemData&nbsp;)&nbsp;)&nbsp;{&nbsp;</span><span class="comment">//&nbsp;都删了难道还不是isEmptyObject？有点多余，除非某些浏览器不支持delete，可问题是不支持也得移除数据，还是多余！</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;jQuery.removeData(&nbsp;elem,&nbsp;undefined,&nbsp;<span class="keyword">true</span><span>&nbsp;);&nbsp;</span><span class="comment">//&nbsp;彻底的从缓存中移走elem的内部数据（存储在属性expando上）</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;},&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;...</span><span>&nbsp;&nbsp;</span></span></li><li><span>};&nbsp;&nbsp;</span></li><li><span>10.6&nbsp;&nbsp;&nbsp;&nbsp;.live()&nbsp;.die()&nbsp;&nbsp;</span></li><li><span>10.6.1&nbsp;&nbsp;如何使用&nbsp;&nbsp;</span></li><li><span>live&nbsp;在匹配当前选择器的元素上绑定一个事件处理函数，包括已经存在的和未来添加的，即任何添加的元素只要匹配当前选择器，就会被绑定事件处理函数&nbsp;&nbsp;</span></li><li><span>.live(&nbsp;eventType,&nbsp;handler&nbsp;)&nbsp;在匹配当前选择器的元素上绑定一个指定类型的事件处理函数&nbsp;&nbsp;</span></li><li><span>.live(&nbsp;eventType,&nbsp;eventData,&nbsp;handler&nbsp;)&nbsp;&nbsp;eventData可以传递数据给事件处理函数&nbsp;&nbsp;</span></li><li><span>.live(&nbsp;events&nbsp;)&nbsp;绑定多个事件&nbsp;&nbsp;</span></li><li><span>.die()&nbsp;&nbsp;删除之前通过.live()绑定的全部事件句柄&nbsp;&nbsp;</span></li><li><span>.die(&nbsp;eventType&nbsp;[,&nbsp;handler]&nbsp;)&nbsp;&nbsp;&nbsp;eventType是字符串事件类型，删除一个或一类之前通过.live()绑定的事件句柄&nbsp;&nbsp;</span></li><li><span>.die(&nbsp;eventTypes&nbsp;)&nbsp;&nbsp;eventTypes是Map对象，删除多类事件句柄&nbsp;&nbsp;</span></li><li><span>10.6.2&nbsp;&nbsp;调用过程&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;</span></li><li><span>.live()方法永远不会将事件绑定到匹配的元素上，而是将事件绑定到祖先元素（document或context），由该祖先元素代理子元素的事件。&nbsp;&nbsp;</span></li><li><span>以&nbsp;$(<span class="string">'.clickme'</span><span>).live(</span><span class="string">'click'</span><span>,&nbsp;</span><span class="keyword">function</span><span>()&nbsp;{&nbsp;…&nbsp;}&nbsp;)&nbsp;为例，当在新添加的元素上点击时，执行过程如下：&nbsp;&nbsp;</span></span></li><li><span>1.&nbsp;click事件被生成，并传递给&lt;div&gt;，待&lt;div&gt;处理&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li><span>2.&nbsp;因为&lt;div&gt;没有直接绑定click事件，因此事件沿着DOM树进行冒泡传递&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li><span>3.&nbsp;事件冒泡传递直到到达DOM树的根节点，在根节点上绑定了.live()指定的原始事件处理函数（在1.4以后的版本中，.live()绑定事件到上下文context，以提升性能）&nbsp;&nbsp;&nbsp;</span></li><li><span>4.&nbsp;执行.live()指定的事件处理函数&nbsp;&nbsp;&nbsp;</span></li><li><span>5.&nbsp;原始事件处理函数检查event的target属性以确定是否继续执行，检查的方式是&nbsp;$(event.target).closes&nbsp;&nbsp;</span></li><li><span>6.&nbsp;如果匹配，则原始事件处理函数执行，上下位被设置为找到的元素&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li><span>因为第5步的检查是在执行原始事件处理函数之前，因此元素可以在任何时候添加，并且事件可以生效&nbsp;&nbsp;</span></li><li><span>调用过程：&nbsp;&nbsp;</span></li><li><span>$(<span class="string">'div'</span><span>).live(&nbsp;</span><span class="string">'click'</span><span>,&nbsp;</span><span class="keyword">function</span><span>(){&nbsp;alert(1);&nbsp;}&nbsp;)&nbsp;&nbsp;</span></span></li><li><span>jQuery.fn.live&nbsp;→&nbsp;jQuery.event.add&nbsp;→&nbsp;jQuery._data&nbsp;→&nbsp;jQuery.event.special.live.add&nbsp;→&nbsp;jQuery.event.add&nbsp;&nbsp;</span></li><li><span>$(<span class="string">'div'</span><span>).die(&nbsp;</span><span class="string">'click'</span><span>,&nbsp;</span><span class="keyword">function</span><span>(){&nbsp;alert(1);&nbsp;}&nbsp;)&nbsp;&nbsp;</span></span></li><li><span>jQuery.fn.die&nbsp;→&nbsp;jQuery.fn.unbind&nbsp;→&nbsp;jQuery.event.remove&nbsp;jQuery._data&nbsp;&nbsp;</span></li><li><span>调试过程中发现个有趣的现象：在父节点上绑定live事件，而不是具体的时间类型？&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;</span></li><li><span>10.6.3&nbsp;&nbsp;源码分析&nbsp;&nbsp;</span></li><li><span>看看.live()/.die()的源码分析：&nbsp;&nbsp;</span></li><li><span><span class="comment">//&nbsp;事件类型修正</span><span>&nbsp;&nbsp;</span></span></li><li><span><span class="keyword">var</span><span>&nbsp;liveMap&nbsp;=&nbsp;{&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;focus:&nbsp;<span class="string">"focusin"</span><span>,&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;blur:&nbsp;<span class="string">"focusout"</span><span>,&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;mouseenter:&nbsp;<span class="string">"mouseover"</span><span>,&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;mouseleave:&nbsp;<span class="string">"mouseout"</span><span>&nbsp;&nbsp;</span></span></li><li><span>};&nbsp;&nbsp;</span></li><li><span><span class="comment">//&nbsp;die&nbsp;移除用live附加的一个或全部事件处理函数</span><span>&nbsp;&nbsp;</span></span></li><li><span><span class="comment">//&nbsp;对应关系：bind-unbind,&nbsp;live-die,&nbsp;delegate-undelegate</span><span>&nbsp;&nbsp;</span></span></li><li><span><span class="comment">/**</span>&nbsp;</span></li><li><span><span class="comment">&nbsp;*&nbsp;live&nbsp;在匹配当前选择器的元素上绑定一个事件处理函数，包括已经存在的，和未来添加的，即任何添加的元素只要匹配当前选择器就会被绑定事件处理函数</span>&nbsp;</span></li><li><span><span class="comment">&nbsp;*&nbsp;.live(&nbsp;eventType,&nbsp;handler&nbsp;)&nbsp;在匹配当前选择器的元素上绑定一个指定类型的事件处理函数</span>&nbsp;</span></li><li><span><span class="comment">&nbsp;*&nbsp;.live(&nbsp;eventType,&nbsp;eventData,&nbsp;handler&nbsp;)&nbsp;eventData可以传递给事件处理函数</span>&nbsp;</span></li><li><span><span class="comment">&nbsp;*&nbsp;.live(&nbsp;events&nbsp;)&nbsp;绑定多个事件</span>&nbsp;</span></li><li><span><span class="comment">&nbsp;*&nbsp;</span>&nbsp;</span></li><li><span><span class="comment">&nbsp;*&nbsp;</span>&nbsp;</span></li><li><span><span class="comment">&nbsp;*&nbsp;参考文档：</span>&nbsp;</span></li><li><span><span class="comment">&nbsp;*&nbsp;http://api.jquery.com/live</span>&nbsp;</span></li><li><span><span class="comment">&nbsp;*&nbsp;http://www.codesky.net/article/doc/201004/20100417042278.htm</span>&nbsp;</span></li><li><span><span class="comment">&nbsp;*&nbsp;http://hi.baidu.com/silveringsea/blog/item/55cd25016ecde30c1c958341.html</span>&nbsp;</span></li><li><span><span class="comment">&nbsp;*&nbsp;</span>&nbsp;</span></li><li><span><span class="comment">&nbsp;*&nbsp;如何使用</span>&nbsp;</span></li><li><span><span class="comment">&nbsp;*&nbsp;示例</span>&nbsp;</span></li><li><span><span class="comment">&nbsp;*&nbsp;局限</span>&nbsp;</span></li><li><span><span class="comment">&nbsp;*&nbsp;修正</span>&nbsp;</span></li><li><span><span class="comment">&nbsp;*&nbsp;</span>&nbsp;</span></li><li><span><span class="comment">&nbsp;*&nbsp;live被翻译为鲜活绑定、延迟绑定（更准确些）</span>&nbsp;</span></li><li><span><span class="comment">&nbsp;*&nbsp;live通过委派，而不是在匹配元素上直接绑定事件来实现</span>&nbsp;</span></li><li><span><span class="comment">&nbsp;*&nbsp;</span>&nbsp;</span></li><li><span><span class="comment">&nbsp;*&nbsp;官方文档翻译：事件代理</span>&nbsp;</span></li><li><span><span class="comment">&nbsp;*&nbsp;.live()方法能对尚未添加到DOM文档中的元素生效。</span>&nbsp;</span></li><li><span><span class="comment">&nbsp;*&nbsp;.live()方法永远不会将事件绑定到匹配的元素上，而是将事件绑定到祖先元素（document或context），由该祖先元素代理子元素的事件。&nbsp;&nbsp;*&nbsp;</span>&nbsp;</span></li><li><span><span class="comment">&nbsp;*&nbsp;以&nbsp;$('.clickme').live('click',&nbsp;function()&nbsp;{&nbsp;…&nbsp;}&nbsp;)&nbsp;为例，当在新添加的元素上点击时，执行过程如下：&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;</span></li><li><span><span class="comment">&nbsp;*&nbsp;1.&nbsp;click事件被生成，并传递给&lt;div&gt;，待&lt;div&gt;处理</span>&nbsp;</span></li><li><span><span class="comment">&nbsp;*&nbsp;2.&nbsp;因为&lt;div&gt;没有直接绑定click事件，因此事件沿着DOM树进行冒泡传递</span>&nbsp;</span></li><li><span><span class="comment">&nbsp;*&nbsp;3.&nbsp;事件冒泡传递直到到达DOM树的根节点，在根节点上绑定了.live()指定的原始事件处理函数（在1.4以后的版本中，.live()绑定事件到上下文context，以提升性能）</span>&nbsp;</span></li><li><span><span class="comment">&nbsp;*&nbsp;4.&nbsp;执行.live()指定的事件处理函数</span>&nbsp;</span></li><li><span><span class="comment">&nbsp;*&nbsp;5.&nbsp;原始事件处理函数检查event的target属性以确定是否继续执行，检查的方式是&nbsp;$(event.target).closest(".clickme")</span>&nbsp;</span></li><li><span><span class="comment">&nbsp;*&nbsp;6.&nbsp;如果匹配，则原始事件处理函数执行，上下位被设置为找到的元素</span>&nbsp;</span></li><li><span><span class="comment">&nbsp;*&nbsp;</span>&nbsp;</span></li><li><span><span class="comment">&nbsp;*&nbsp;因为第5步的检查是在执行原始事件处理函数之前，因此元素可以在任何时候添加，并且事件可以生效</span>&nbsp;</span></li><li><span><span class="comment">&nbsp;*&nbsp;</span>&nbsp;</span></li><li><span><span class="comment">&nbsp;*/</span><span>&nbsp;&nbsp;</span></span></li><li><span>jQuery.each([<span class="string">"live"</span><span>,&nbsp;</span><span class="string">"die"</span><span>],&nbsp;</span><span class="keyword">function</span><span>(&nbsp;i,&nbsp;name&nbsp;)&nbsp;{&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;jQuery.fn[&nbsp;name&nbsp;]&nbsp;=&nbsp;<span class="keyword">function</span><span>(&nbsp;types,&nbsp;data,&nbsp;fn,&nbsp;origSelector&nbsp;</span><span class="comment">/*&nbsp;Internal&nbsp;Use&nbsp;Only&nbsp;*/</span><span>&nbsp;)&nbsp;{&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">var</span><span>&nbsp;type,&nbsp;i&nbsp;=&nbsp;0,&nbsp;match,&nbsp;namespaces,&nbsp;preType,&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;selector&nbsp;=&nbsp;origSelector&nbsp;||&nbsp;<span class="keyword">this</span><span>.selector,&nbsp;</span><span class="comment">//&nbsp;选择器表达式</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;很巧妙，如果没有origSelector，那么采用当前jQuery对象的选择器，、</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;可是，如果origSelector为true，后边的处理对象就变成了以origSelector为选择器的jQuery对象</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context&nbsp;=&nbsp;origSelector&nbsp;?&nbsp;<span class="keyword">this</span><span>&nbsp;:&nbsp;jQuery(&nbsp;</span><span class="keyword">this</span><span>.context&nbsp;);&nbsp;</span><span class="comment">//&nbsp;上下文,</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;这里也是，如果没有origSelector，那么上下文就变成当前jQuery对象的上下文</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;可是，如果origSelector为true（类型转换），当前jQuery对象就变成上下文了</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;就是在这里，通过一个内部变量，改变了选择器表达式和上下分，区分开了live/die和delegate/undelegate，用同样的代码实现了两种接口</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;一次绑定或删除多个事件</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">if</span><span>&nbsp;(&nbsp;</span><span class="keyword">typeof</span><span>&nbsp;types&nbsp;===&nbsp;</span><span class="string">"object"</span><span>&nbsp;&amp;&amp;&nbsp;!types.preventDefault&nbsp;)&nbsp;{&nbsp;</span><span class="comment">//&nbsp;types不是jQuery事件对象</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">for</span><span>&nbsp;(&nbsp;</span><span class="keyword">var</span><span>&nbsp;key&nbsp;</span><span class="keyword">in</span><span>&nbsp;types&nbsp;)&nbsp;{&nbsp;</span><span class="comment">//&nbsp;迭代复用</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context[&nbsp;name&nbsp;](&nbsp;key,&nbsp;data,&nbsp;types[key],&nbsp;selector&nbsp;);&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">return</span><span>&nbsp;</span><span class="keyword">this</span><span>;&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;如果是die，移除origSelector匹配元素上的所有通过live绑定的事件</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;没有指定事件类型&nbsp;+&nbsp;origSelector&nbsp;+&nbsp;origSelector是CSS选择器&nbsp;</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">if</span><span>&nbsp;(&nbsp;name&nbsp;===&nbsp;</span><span class="string">"die"</span><span>&nbsp;&amp;&amp;&nbsp;!types&nbsp;&amp;&amp;&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;origSelector&nbsp;&amp;&amp;&nbsp;origSelector.charAt(0)&nbsp;===&nbsp;<span class="string">"."</span><span>&nbsp;)&nbsp;{&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context.unbind(&nbsp;origSelector&nbsp;);&nbsp;<span class="comment">//&nbsp;事实上bind/unbind是基础，add/remove/tigger/handle是所有事件的基础</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">return</span><span>&nbsp;</span><span class="keyword">this</span><span>;&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;修正参数（如果data为false或没有传入data参数）</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;完整：types,&nbsp;data,&nbsp;fn,&nbsp;origSelector</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;types,&nbsp;false,&nbsp;fn,&nbsp;origSelector</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;或&nbsp;types,&nbsp;fn,&nbsp;origSelector</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">if</span><span>&nbsp;(&nbsp;data&nbsp;===&nbsp;</span><span class="keyword">false</span><span>&nbsp;||&nbsp;jQuery.isFunction(&nbsp;data&nbsp;)&nbsp;)&nbsp;{&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fn&nbsp;=&nbsp;data&nbsp;||&nbsp;returnFalse;&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data&nbsp;=&nbsp;undefined;&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;types&nbsp;=&nbsp;(types&nbsp;||&nbsp;<span class="string">""</span><span>).split(</span><span class="string">"&nbsp;"</span><span>);&nbsp;</span><span class="comment">//&nbsp;多个事件用空格隔开</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">while</span><span>&nbsp;(&nbsp;(type&nbsp;=&nbsp;types[&nbsp;i++&nbsp;])&nbsp;!=&nbsp;</span><span class="keyword">null</span><span>&nbsp;)&nbsp;{&nbsp;</span><span class="comment">//&nbsp;遍历事件类型数组</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;match&nbsp;=&nbsp;rnamespaces.exec(&nbsp;type&nbsp;);&nbsp;<span class="comment">//&nbsp;取到第一个.后的命名空间&nbsp;</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;namespaces&nbsp;=&nbsp;<span class="string">""</span><span>;&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">if</span><span>&nbsp;(&nbsp;match&nbsp;)&nbsp;&nbsp;{&nbsp;</span><span class="comment">//&nbsp;如果有命名空间，即事件类型后还有.</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;namespaces&nbsp;=&nbsp;match[0];&nbsp;<span class="comment">//&nbsp;.+命名空间</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type&nbsp;=&nbsp;type.replace(&nbsp;rnamespaces,&nbsp;<span class="string">""</span><span>&nbsp;);&nbsp;</span><span class="comment">//&nbsp;过滤.+命名空间，初学者会尝试用indexOf查找.的位置，然后截取</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">if</span><span>&nbsp;(&nbsp;type&nbsp;===&nbsp;</span><span class="string">"hover"</span><span>&nbsp;)&nbsp;{&nbsp;</span><span class="comment">//&nbsp;将hover分解为mouseenter&nbsp;mouseleave，继续遍历</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;types.push(&nbsp;<span class="string">"mouseenter"</span><span>&nbsp;+&nbsp;namespaces,&nbsp;</span><span class="string">"mouseleave"</span><span>&nbsp;+&nbsp;namespaces&nbsp;);&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">continue</span><span>;&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;preType&nbsp;=&nbsp;type;&nbsp;<span class="comment">//&nbsp;</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">if</span><span>&nbsp;(&nbsp;liveMap[&nbsp;type&nbsp;]&nbsp;)&nbsp;{&nbsp;</span><span class="comment">//&nbsp;修正事件名名，修正其实不准确，比如遇到focus，绑定了两个：focus&nbsp;focusin，不会造成两次事件响应么？</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;types.push(&nbsp;liveMap[&nbsp;type&nbsp;]&nbsp;+&nbsp;namespaces&nbsp;);&nbsp;<span class="comment">//&nbsp;将修正后的事件类型入队，因为用了while循环，所有不必担心遍历动态数组的问题</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type&nbsp;=&nbsp;type&nbsp;+&nbsp;namespaces;&nbsp;<span class="comment">//&nbsp;再恢复type，包含了命名空间，这不是蛋疼么，把命名空间去掉只为了检测hover和是否需要修正？</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<span class="keyword">else</span><span>&nbsp;{&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type&nbsp;=&nbsp;(liveMap[&nbsp;type&nbsp;]&nbsp;||&nbsp;type)&nbsp;+&nbsp;namespaces;&nbsp;<span class="comment">//&nbsp;修正事件名，这里可以直接写成：type&nbsp;+&nbsp;namespaces</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;这行的逻辑有点问题，已经知道liveMap[&nbsp;type&nbsp;]是false了，这个地方的代码有些重复</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">/**</span>&nbsp;</span></li><li><span><span class="comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;上边的if-else改写为：</span>&nbsp;</span></li><li><span><span class="comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;if&nbsp;(&nbsp;liveMap[&nbsp;type&nbsp;]&nbsp;)&nbsp;types.push(&nbsp;liveMap[&nbsp;type&nbsp;]&nbsp;+&nbsp;namespaces&nbsp;)</span>&nbsp;</span></li><li><span><span class="comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;type&nbsp;=&nbsp;type&nbsp;+&nbsp;namespaces</span>&nbsp;</span></li><li><span><span class="comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;这里开始live的特殊处理，虽说live/die的逻辑比较接近，再加上delegate/undelegate，复用的粒度小但是很精髓</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;同时为了减少接口，并没有将公共部分提取出来，总的来说，live/die这段代码出来的还是刚刚好</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">if</span><span>&nbsp;(&nbsp;name&nbsp;===&nbsp;</span><span class="string">"live"</span><span>&nbsp;)&nbsp;{&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;bind&nbsp;live&nbsp;handler</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">for</span><span>&nbsp;(&nbsp;</span><span class="keyword">var</span><span>&nbsp;j&nbsp;=&nbsp;0,&nbsp;l&nbsp;=&nbsp;context.length;&nbsp;j&nbsp;&lt;&nbsp;l;&nbsp;j++&nbsp;)&nbsp;{&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;绑定到上下文，事件类型经过liveConvert后变为&nbsp;live.type.selector</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;前边做了那么多铺垫，这行才是关键！</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;add:&nbsp;function(&nbsp;elem,&nbsp;types,&nbsp;handler,&nbsp;data&nbsp;)&nbsp;{</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;context[j]&nbsp;如果有origSelector则是当前jQuery对象，如果没有则是当前jQuery对象的上下文</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;live事件的格式比较特殊，应该trigger里会有live的特殊处理，live的处理在特例special里</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;jQuery.event.add(&nbsp;context[j],&nbsp;<span class="string">"live."</span><span>&nbsp;+&nbsp;liveConvert(&nbsp;type,&nbsp;selector&nbsp;),&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;data:&nbsp;data,&nbsp;selector:&nbsp;selector,&nbsp;handler:&nbsp;fn,&nbsp;origType:&nbsp;type,&nbsp;origHandler:&nbsp;fn,&nbsp;preType:&nbsp;preType&nbsp;}&nbsp;);&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<span class="keyword">else</span><span>&nbsp;{&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;unbind&nbsp;live&nbsp;handler</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;删除live绑定的事件句柄</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context.unbind(&nbsp;<span class="string">"live."</span><span>&nbsp;+&nbsp;liveConvert(&nbsp;type,&nbsp;selector&nbsp;),&nbsp;fn&nbsp;);&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">return</span><span>&nbsp;</span><span class="keyword">this</span><span>;&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;};&nbsp;&nbsp;</span></li><li><span>});&nbsp;&nbsp;</span></li><li><span><span class="comment">/**</span>&nbsp;</span></li><li><span><span class="comment">&nbsp;*&nbsp;live执行句柄，live绑定的事件调用链：add.eventHandle&nbsp;→&nbsp;handler&nbsp;function&nbsp;liveHandler&nbsp;→&nbsp;_data&nbsp;→&nbsp;handler&nbsp;</span>&nbsp;</span></li><li><span><span class="comment">&nbsp;*&nbsp;@param&nbsp;event</span>&nbsp;</span></li><li><span><span class="comment">&nbsp;*&nbsp;@return</span>&nbsp;</span></li><li><span><span class="comment">&nbsp;*/</span><span>&nbsp;&nbsp;</span></span></li><li><span><span class="keyword">function</span><span>&nbsp;liveHandler(&nbsp;event&nbsp;)&nbsp;{&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">var</span><span>&nbsp;stop,&nbsp;maxLevel,&nbsp;related,&nbsp;match,&nbsp;handleObj,&nbsp;elem,&nbsp;j,&nbsp;i,&nbsp;l,&nbsp;data,&nbsp;close,&nbsp;namespace,&nbsp;ret,&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elems&nbsp;=&nbsp;[],&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;selectors&nbsp;=&nbsp;[],&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;events&nbsp;=&nbsp;jQuery._data(&nbsp;<span class="keyword">this</span><span>,&nbsp;</span><span class="string">"events"</span><span>&nbsp;);&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;Make&nbsp;sure&nbsp;we&nbsp;avoid&nbsp;non-left-click&nbsp;bubbling&nbsp;in&nbsp;Firefox&nbsp;(#3861)&nbsp;and&nbsp;disabled&nbsp;elements&nbsp;in&nbsp;IE&nbsp;(#6911)</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">if</span><span>&nbsp;(&nbsp;event.liveFired&nbsp;===&nbsp;</span><span class="keyword">this</span><span>&nbsp;||&nbsp;!events&nbsp;||&nbsp;!events.live&nbsp;||&nbsp;event.target.disabled&nbsp;||&nbsp;event.button&nbsp;&amp;&amp;&nbsp;event.type&nbsp;===&nbsp;</span><span class="string">"click"</span><span>&nbsp;)&nbsp;{&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">return</span><span>;&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">if</span><span>&nbsp;(&nbsp;event.namespace&nbsp;)&nbsp;{&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;namespace&nbsp;=&nbsp;<span class="keyword">new</span><span>&nbsp;RegExp(</span><span class="string">"(^|\\.)"</span><span>&nbsp;+&nbsp;event.namespace.split(</span><span class="string">"."</span><span>).join(</span><span class="string">"\\.(?:.*\\.)?"</span><span>)&nbsp;+&nbsp;</span><span class="string">"(\\.|$)"</span><span>);&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;event.liveFired&nbsp;=&nbsp;<span class="keyword">this</span><span>;&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">var</span><span>&nbsp;live&nbsp;=&nbsp;events.live.slice(0);&nbsp;</span><span class="comment">//&nbsp;返回一个新的数组，而不改变原来的数组</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">for</span><span>&nbsp;(&nbsp;j&nbsp;=&nbsp;0;&nbsp;j&nbsp;&lt;&nbsp;live.length;&nbsp;j++&nbsp;)&nbsp;{&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;handleObj&nbsp;=&nbsp;live[j];&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">if</span><span>&nbsp;(&nbsp;handleObj.origType.replace(&nbsp;rnamespaces,&nbsp;</span><span class="string">""</span><span>&nbsp;)&nbsp;===&nbsp;event.type&nbsp;)&nbsp;{&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;selectors.push(&nbsp;handleObj.selector&nbsp;);&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<span class="keyword">else</span><span>&nbsp;{&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;live.splice(&nbsp;j--,&nbsp;1&nbsp;);&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;match&nbsp;=&nbsp;jQuery(&nbsp;event.target&nbsp;).closest(&nbsp;selectors,&nbsp;event.currentTarget&nbsp;);&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">for</span><span>&nbsp;(&nbsp;i&nbsp;=&nbsp;0,&nbsp;l&nbsp;=&nbsp;match.length;&nbsp;i&nbsp;&lt;&nbsp;l;&nbsp;i++&nbsp;)&nbsp;{&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;close&nbsp;=&nbsp;match[i];&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">for</span><span>&nbsp;(&nbsp;j&nbsp;=&nbsp;0;&nbsp;j&nbsp;&lt;&nbsp;live.length;&nbsp;j++&nbsp;)&nbsp;{&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;handleObj&nbsp;=&nbsp;live[j];&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">if</span><span>&nbsp;(&nbsp;close.selector&nbsp;===&nbsp;handleObj.selector&nbsp;&amp;&amp;&nbsp;(!namespace&nbsp;||&nbsp;namespace.test(&nbsp;handleObj.namespace&nbsp;))&nbsp;&amp;&amp;&nbsp;!close.elem.disabled&nbsp;)&nbsp;{&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elem&nbsp;=&nbsp;close.elem;&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;related&nbsp;=&nbsp;<span class="keyword">null</span><span>;&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;Those&nbsp;two&nbsp;events&nbsp;require&nbsp;additional&nbsp;checking</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">if</span><span>&nbsp;(&nbsp;handleObj.preType&nbsp;===&nbsp;</span><span class="string">"mouseenter"</span><span>&nbsp;||&nbsp;handleObj.preType&nbsp;===&nbsp;</span><span class="string">"mouseleave"</span><span>&nbsp;)&nbsp;{&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;event.type&nbsp;=&nbsp;handleObj.preType;&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;related&nbsp;=&nbsp;jQuery(&nbsp;event.relatedTarget&nbsp;).closest(&nbsp;handleObj.selector&nbsp;)[0];&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;Make&nbsp;sure&nbsp;not&nbsp;to&nbsp;accidentally&nbsp;match&nbsp;a&nbsp;child&nbsp;element&nbsp;with&nbsp;the&nbsp;same&nbsp;selector</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">if</span><span>&nbsp;(&nbsp;related&nbsp;&amp;&amp;&nbsp;jQuery.contains(&nbsp;elem,&nbsp;related&nbsp;)&nbsp;)&nbsp;{&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;related&nbsp;=&nbsp;elem;&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">if</span><span>&nbsp;(&nbsp;!related&nbsp;||&nbsp;related&nbsp;!==&nbsp;elem&nbsp;)&nbsp;{&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elems.push({&nbsp;elem:&nbsp;elem,&nbsp;handleObj:&nbsp;handleObj,&nbsp;level:&nbsp;close.level&nbsp;});&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">for</span><span>&nbsp;(&nbsp;i&nbsp;=&nbsp;0,&nbsp;l&nbsp;=&nbsp;elems.length;&nbsp;i&nbsp;&lt;&nbsp;l;&nbsp;i++&nbsp;)&nbsp;{&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;match&nbsp;=&nbsp;elems[i];&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">if</span><span>&nbsp;(&nbsp;maxLevel&nbsp;&amp;&amp;&nbsp;match.level&nbsp;&gt;&nbsp;maxLevel&nbsp;)&nbsp;{&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">break</span><span>;&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;event.currentTarget&nbsp;=&nbsp;match.elem;&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;event.data&nbsp;=&nbsp;match.handleObj.data;&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;event.handleObj&nbsp;=&nbsp;match.handleObj;&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ret&nbsp;=&nbsp;match.handleObj.origHandler.apply(&nbsp;match.elem,&nbsp;arguments&nbsp;);&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">if</span><span>&nbsp;(&nbsp;ret&nbsp;===&nbsp;</span><span class="keyword">false</span><span>&nbsp;||&nbsp;event.isPropagationStopped()&nbsp;)&nbsp;{&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;maxLevel&nbsp;=&nbsp;match.level;&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">if</span><span>&nbsp;(&nbsp;ret&nbsp;===&nbsp;</span><span class="keyword">false</span><span>&nbsp;)&nbsp;{&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;stop&nbsp;=&nbsp;<span class="keyword">false</span><span>;&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">if</span><span>&nbsp;(&nbsp;event.isImmediatePropagationStopped()&nbsp;)&nbsp;{&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">break</span><span>;&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">return</span><span>&nbsp;stop;&nbsp;&nbsp;</span></span></li><li><span>}&nbsp;&nbsp;</span></li><li><span><span class="comment">//&nbsp;在live事件类型type后增加上selector，作为命名空间</span><span>&nbsp;&nbsp;</span></span></li><li><span><span class="keyword">function</span><span>&nbsp;liveConvert(&nbsp;type,&nbsp;selector&nbsp;)&nbsp;{&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;.&nbsp;&gt;&nbsp;`</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;空格&nbsp;&gt;&nbsp;&amp;</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;在type后增加上selector，作为命名空间</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">return</span><span>&nbsp;(type&nbsp;&amp;&amp;&nbsp;type&nbsp;!==&nbsp;</span><span class="string">"*"</span><span>&nbsp;?&nbsp;type&nbsp;+&nbsp;</span><span class="string">"."</span><span>&nbsp;:&nbsp;</span><span class="string">""</span><span>)&nbsp;+&nbsp;selector.replace(rperiod,&nbsp;</span><span class="string">"`"</span><span>).replace(rspaces,&nbsp;</span><span class="string">"&amp;"</span><span>);&nbsp;</span><span class="comment">//&nbsp;</span><span>&nbsp;&nbsp;</span></span></li><li><span>}&nbsp;&nbsp;</span></li><li><span>10.7&nbsp;&nbsp;&nbsp;&nbsp;.deletege()&nbsp;.undelegate()&nbsp;&nbsp;</span></li><li><span>10.7.1&nbsp;&nbsp;如何使用&nbsp;&nbsp;</span></li><li><span>.delegate(&nbsp;selector,&nbsp;eventType,&nbsp;handler&nbsp;)&nbsp;&nbsp;&nbsp;在匹配选择器表达式selector的元素上，将一个事件句handler柄绑定到一个或多个事件上&nbsp;&nbsp;</span></li><li><span>无论是现有的还是将来添加的，基于一组特定的根元素（即上下文）&nbsp;&nbsp;</span></li><li><span>.delegate(&nbsp;selector,&nbsp;eventType,&nbsp;eventData,&nbsp;handler&nbsp;)&nbsp;&nbsp;&nbsp;&nbsp;Map型对象eventData的属性将被复制到事件句柄handler&nbsp;&nbsp;</span></li><li><span>.delegate(&nbsp;selector,&nbsp;events&nbsp;)&nbsp;&nbsp;&nbsp;绑定一个或多个事件句柄&nbsp;&nbsp;</span></li><li><span>.undelegate()&nbsp;&nbsp;&nbsp;在当前jQuery对象上，移除所有live事件句柄&nbsp;&nbsp;</span></li><li><span>.undelegate(&nbsp;selector,&nbsp;eventType,&nbsp;handler&nbsp;)&nbsp;在当前jQuery对象上，移除live.&nbsp;eventType.selector事件句柄&nbsp;&nbsp;</span></li><li><span>为当前选择所匹配的所有元素移除一个事件处理程序，现在或将来，基于一组特定的根元素。&nbsp;&nbsp;</span></li><li><span>.undelegate(&nbsp;selector,&nbsp;events&nbsp;)&nbsp;在当前jQuery对象上，移除多个live事件句柄，events是Map型对象，key&nbsp;&nbsp;</span></li><li><span>.undelegate(&nbsp;namespace&nbsp;)&nbsp;&nbsp;&nbsp;&nbsp;在当前jQuery对象上，移除命名空间匹配的live事件句柄&nbsp;&nbsp;</span></li><li><span>从接口的含义看，.deletege()/.undelegate()与.live()/.die()的区别在于绑定事件时的上下文不同，上下文即事件绑定到的元素：&nbsp;&nbsp;</span></li><li><span>.deletege()/.undelegate()&nbsp;&nbsp;&nbsp;当前jQuery对象&nbsp;&nbsp;</span></li><li><span>.live()/.die()&nbsp;&nbsp;当前jQuery对象的上下文，经常是document，也可以是构造jQuery对象时指定的上下文&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;</span></li><li><span>10.7.2&nbsp;&nbsp;调用过程&nbsp;&nbsp;</span></li><li><span>jQuery.fn.delegate&nbsp;→&nbsp;jQuery.fn.live&nbsp;→&nbsp;jQuery.event.add&nbsp;&nbsp;</span></li><li><span>jQuery.fn.undelegate&nbsp;→&nbsp;jQuery.fn.unbind/die&nbsp;&nbsp;</span></li><li><span>10.7.3&nbsp;&nbsp;源码分析&nbsp;&nbsp;</span></li><li><span><span class="comment">//&nbsp;事件代理，调用live方法实现</span><span>&nbsp;&nbsp;</span></span></li><li><span>delegate:&nbsp;<span class="keyword">function</span><span>(&nbsp;selector,&nbsp;types,&nbsp;data,&nbsp;fn&nbsp;)&nbsp;{&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;因为传递了参数selector，live时的上下文变为this，而不是this.context</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">return</span><span>&nbsp;</span><span class="keyword">this</span><span>.live(&nbsp;types,&nbsp;data,&nbsp;fn,&nbsp;selector&nbsp;);&nbsp;&nbsp;</span></span></li><li><span>},&nbsp;&nbsp;</span></li><li><span><span class="comment">//&nbsp;删除事件代理，调用unbind或die实现</span><span>&nbsp;&nbsp;</span></span></li><li><span>undelegate:&nbsp;<span class="keyword">function</span><span>(&nbsp;selector,&nbsp;types,&nbsp;fn&nbsp;)&nbsp;{&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">if</span><span>&nbsp;(&nbsp;arguments.length&nbsp;===&nbsp;0&nbsp;)&nbsp;{&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">return</span><span>&nbsp;</span><span class="keyword">this</span><span>.unbind(&nbsp;</span><span class="string">"live"</span><span>&nbsp;);&nbsp;</span><span class="comment">//&nbsp;在当前jQuery对象上直接unbind，不需要在去查找上下文</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<span class="keyword">else</span><span>&nbsp;{&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;jQuery.fn[&nbsp;die&nbsp;]&nbsp;=&nbsp;function(&nbsp;types,&nbsp;data,&nbsp;fn,&nbsp;origSelector&nbsp;/*&nbsp;Internal&nbsp;Use&nbsp;Only&nbsp;*/&nbsp;)&nbsp;{</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">return</span><span>&nbsp;</span><span class="keyword">this</span><span>.die(&nbsp;types,&nbsp;</span><span class="keyword">null</span><span>,&nbsp;fn,&nbsp;selector&nbsp;);&nbsp;</span><span class="comment">//　带有选择器字符串，改变了die里的上下文context变量</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>},&nbsp;&nbsp;</span></li><li><span>本节小节：&nbsp;&nbsp;</span></li><li><span>1.&nbsp;&nbsp;.bind()/.unbind()高级接口的基础，add/remove/tigger/handle是所有的基础，最后才是调用浏览器原生接口&nbsp;&nbsp;</span></li><li><span>2.&nbsp;&nbsp;.deletege()/.undelegate()与.live()/.die()的区别在于绑定事件时的父节点不同&nbsp;&nbsp;</span></li><li><span>后文预告：封装事件对象&nbsp;便捷接口解析&nbsp;ready专题&nbsp;&nbsp;</span></li></ol></div><pre class="js" name="code" codeable_id="1199674" codeable_type="Blog" source_url="http://nuysoft.iteye.com/blog/1199674" pre_index="1" title="[原创] jQuery源码分析-10事件处理-Event-事件绑定与删除-bind/unbind+live/die+delegat/undelegate" style="display: none;">10.4	.bind() .one()
10.4.1	如何使用
.bind( eventType, [eventData], handler(eventObject) )	在匹配的元素上绑定指定类型的事件处理函数
.bind( eventType, [eventData], preventBubble )	第三个参数为false，则阻止浏览器默认行为并停止事件冒泡，默认true
.bind( events )	绑定多个事件，events的键为事件类型，值为对应的事件处理函数
.one( eventType, [eventData], handler(eventObject) )	在匹配的元素上绑定指定类型的事件处理函数，这个函数最多执行一次
其实是改写了事件处理函数，函数执行时先解绑定，再执行
10.4.2	调用过程 
jQuery.fn.bind → jQuery.event.add
jQuery.fn.one → jQuery.event.add
10.4.3	源码分析
/**
 * bind:
 * .bind( eventType, [eventData], handler(eventObject) ) 在匹配的元素上绑定指定类型的事件处理函数
 * .bind( eventType, [eventData], preventBubble ) 第三个参数为false，则阻止浏览器默认行为并停止事件冒泡，默认true
 * .bind( events ) 绑定多个事件，events的键为事件类型，值为对应的事件处理函数
 * 
 * one:
 * .one( eventType, [eventData], handler(eventObject) ) 在匹配的元素上绑定指定类型的事件处理函数，这个函数最多执行一次
 * 其实是改写了事件处理函数，函数执行时先解绑定，再执行
 */
jQuery.each(["bind", "one"], function( i, name ) {
	// 为jQuery对象扩展bind、one方法
	jQuery.fn[ name ] = function( type, data, fn ) {
		var handler;

		// Handle object literals
		// 绑定多个事件，key为事件类型，type[key]是事件处理函数
		if ( typeof type === "object" ) { //
			for ( var key in type ) {
				this[ name ](key, data, type[key], fn);
			}
			return this;
		}
		// 修正参数：如果没有传入data，或data为false，（jQuery的这种写法很巧妙，但是可读性太差）
		// 如果有两个参数，则认为忽略了data：type, fn，结果是：type, undefined, fn
		// 如果data是false，则认为是type, false, fn，结果是：type, undefined, false
		if ( arguments.length === 2 || data === false ) {
			fn = data;
			data = undefined;
		}

		if ( name === "one" ) { // 只执行一次
			handler = function( event ) { // 创建一个新的事件处理函数句柄
				jQuery( this ).unbind( event, handler ); // 先删除事件
				return fn.apply( this, arguments ); // 再执行传入的事件处理函数fn，这里this是DOM元素
			};
			handler.guid = fn.guid || jQuery.guid++; // 同步guid，重新包装后的函数与原始函数的guid统一
		} else {
			handler = fn;
		}

		if ( type === "unload" &amp;&amp; name !== "one" ) { // 如果是unload事件，则只执行一次
			this.one( type, data, fn ); // 迭代调用，没有清晰的结构很危险
		} else {
			for ( var i = 0, l = this.length; i &lt; l; i++ ) {
				jQuery.event.add( this[i], type, handler, data ); // 遍历匹配的元素，并绑定事件处理函数
			}
		}
		// 返回jQuery对象，使得可以继续链式调用
		return this;
	};
});
10.4.4	jQuery.event.add
.bind()和.one()都调用了jQuery.event.add来实现，为元素elem添加类型types的句柄handler，事实上所有的事件绑定最后都通过jQuery.event.add来实现。其执行过程大致如下：
1.	先调用jQuery._data从$.cache中取出已有的事件缓存（私有数据，Cache的解析详见数据缓存）
2.	如果是第一次在DOM元素上绑定该类型事件句柄，在DOM元素上绑定jQuery.event.handle，作为统一的事件响应入口
3.	将封装后的事件句柄放入缓存中
传入的事件句柄，会被封装到对象handleObj的handle属性上，此外handleObj还会填充guid、type、namespace、data属性；DOM事件句柄elemData.handle指向jQuery.event.handle，即jQuery在DOM元素上绑定事件时总是绑定同样的DOM事件句柄jQuery.event.handle。
事件句柄在缓存$.cache中的数据结构如下，事件类型和事件句柄都存储在属性events中，属性handle存放的执行这些事件句柄的DOM事件句柄：
elemData = {                                                         
    events: {                                                        
        'click' : [                                                  
            { guid: 5, type: 'click', namespace: '', data: undefined,
                handle: { guid: 5, prototype: {} }                   
            },                                                       
            { ... }                                                  
        ],                                                           
        'keypress' : [ ... ]                                         
    },                                                               
    handle: { // DOM事件句柄                                             
        elem: elem,                                                  
        prototype: {}                                                
    }                                                                
}                                                                    
看看jQuery.event.add的源码解析：
jQuery.event = {
	// Bind an event to an element
	// Original by Dean Edwards
	// 为元素elem添加类型types的句柄handler
	add: function( elem, types, handler, data ) {
		// 忽略 Text Comment
		if ( elem.nodeType === 3 || elem.nodeType === 8 ) {
			return;
		}

		if ( handler === false ) { // 如果事件处理函数是false，则用returnFalse代替false
			handler = returnFalse; // returnFalse会取消事件的默认行为
		} else if ( !handler ) {
			// Fixes bug #7229. Fix recommended by jdalton
			return; // 如果handler是undefined null ''，则直接返回，不执行后边的代码
		}

		var handleObjIn, handleObj;

		if ( handler.handler ) { // 如果已经是封装过的jQuery事件对象（JS真是愁人啊，弱类型，只能通过特性、属性判断对象的类型）
			handleObjIn = handler; // handleObj是DOM事件句柄对象（丰富后的jQuery.event.handle）
			handler = handleObjIn.handler; // handler始终是个函数
		}

		// Make sure that the function being executed has a unique ID
		if ( !handler.guid ) { // 如果没有分配唯一id，则分配一个
			handler.guid = jQuery.guid++;
		}

		// Init the element's event structure
		// 内部数据存储在内部对象上，因此elemData不应该为空，除非elem不支持jQuery缓存（embed、object、applet）
		var elemData = jQuery._data( elem ); // 仅仅调用_data接口一次，后续直接在返回的对象上操作

		// If no elemData is found then we must be trying to bind to one of the
		// banned noData elements
		// 如果elemData不存在，说明是一个不支持缓存的元素上绑定事件，直接返回
		if ( !elemData ) {
			return;
		}

		var events = elemData.events, // 事件类型和事件句柄都存储在属性events中
			eventHandle = elemData.handle; // 属性handle存放的执行这些事件句柄的DOM事件句柄

		if ( !events ) {
			elemData.events = events = {}; // 初始化一个存放事件的对象，事件名为key，事件函数为value
		}

		if ( !eventHandle ) { // 初始化一个执行事件函数的函数
			elemData.handle = eventHandle = function( e ) {
				// Discard the second event of a jQuery.event.trigger() and
				// when an event is called after a page has unloaded
				// 调用jQuery.event.handler
				// jQuery.event.handler是什么意思？
				return typeof jQuery !== "undefined" &amp;&amp; (!e || jQuery.event.triggered !== e.type) ?
					jQuery.event.handle.apply( eventHandle.elem, arguments ) :
					undefined;
			};
		}

		// Add elem as a property of the handle function
		// This is to prevent a memory leak with non-native events in IE.
		// 内存泄漏？
		// 将elem作为eventHandle的属性存储，用来避免IE中非本地事件的内存泄漏
		eventHandle.elem = elem;

		// Handle multiple events separated by a space
		// jQuery(...).bind("mouseover mouseout", fn);
		types = types.split(" "); // 同时绑定的多个事件可以用空格隔开
		// 为什么有的地方用字符串直接量，有的地方要用正则呢？因为正则可以进行全局匹配g

		var type, i = 0, namespaces;

		while ( (type = types[ i++ ]) ) { // 又一种遍历数组的方法，故意秀技巧么？
			handleObj = handleObjIn ?
				jQuery.extend({}, handleObjIn) :
				{ handler: handler, data: data }; // 创建事件句柄对象，后边还会添加属性：guid anmespace type

			// Namespaced event handlers
			// 如果事件字符串中有句号.，则说明有命名空间
			if ( type.indexOf(".") &gt; -1 ) {
				namespaces = type.split(".");
				type = namespaces.shift(); // 取出第一个元素
				handleObj.namespace = namespaces.slice(0).sort().join("."); // 将于下部分作为命名空间，存储到属性namespace中

			} else {
				namespaces = [];
				handleObj.namespace = ""; // 没有命名空间
			}

			handleObj.type = type; // 事件类型
			if ( !handleObj.guid ) {
				handleObj.guid = handler.guid; // 事件对象唯一id
			}

			// Get the current list of functions bound to this event
			var handlers = events[ type ], // 事件句柄队列，取出已经存在函数数组
				special = jQuery.event.special[ type ] || {}; // 特殊处理的事件

			// Init the event handler queue
			if ( !handlers ) { // 如果没有绑定事件，则初始化为一个空数组
				handlers = events[ type ] = []; // 

				// Check for a special event handler
				// Only use addEventListener/attachEvent if the special
				// events handler returns false
				// 如果特殊事件没有setup属性 或 setup返回false，则用浏览器原生的绑定事件接口addEventListener/addEventListener，例如live事件
				if ( !special.setup || special.setup.call( elem, data, namespaces, eventHandle ) === false ) {
					// Bind the global event handler to the element
					// 绑定事件句柄
					if ( elem.addEventListener ) {
						elem.addEventListener( type, eventHandle, false ); // jQuery绑定的事件默认都是起泡阶段捕获

					} else if ( elem.attachEvent ) {
						elem.attachEvent( "on" + type, eventHandle ); // IE事件模型中没有2级DOM事件模型具有的事件捕捉的概念，只有起泡阶段
					}
				}
			}

			if ( special.add ) { // 如果有add方法，就调用
				special.add.call( elem, handleObj );

				if ( !handleObj.handler.guid ) { // 始终保证事件句柄有唯一的id
					handleObj.handler.guid = handler.guid;
				}
			}

			// Add the function to the element's handler list
			// 将句柄对象handleObj，加入到句柄数组handler中，
			// handleObj包含以下属性：data 唯一guid 命名空间namespace 事件类型type handler函数
			handlers.push( handleObj );

			// Keep track of which events have been used, for event optimization
			// 记录已经使用的事件，用于事件优化？怎么个优化？
			jQuery.event.global[ type ] = true;
		}

		// Nullify elem to prevent memory leaks in IE
		// 将elem置为null，避免IE中的内存泄漏（这行代码真是坑爹啊，没有无数次的测试确认，怎么可能想到这行代码呢）
		elem = null;
	},
	// ...
};
10.5	.unbind()
10.5.1	如何使用
.unbind( [eventType] [, handler(eventObject)] )	从匹配的元素上删除一个之前绑定的事件句柄
如果没有参数，删除所有事件句柄
.unbind( eventType, false )	删除通过.bind( eventType, false )绑定的事件句柄
.unbind( event )	看不懂。。。
10.5.2	调用过程
jQuery.fn.unbind → jQuery.event.remove
10.5.3	源码分析
jQuery.fn.extend({
	// 删除句柄：删除一个或多个之前附加的事件句柄，jQuery事件只在起泡阶段捕获，不需要再定义控制捕获阶段的参数
	unbind: function( type, fn ) {
		// Handle object literals
		// 一次删除多个事件句柄，key是事件类型，type[key]是事件句柄（这里是迭代复用）
		// !type.preventDefault 表明这不是一个就jQuery事件对象
		if ( typeof type === "object" &amp;&amp; !type.preventDefault ) {
			for ( var key in type ) {
				this.unbind(key, type[key]);
			}
		// 到这里，type可能是字符串，也可能是jQuery事件对象
		} else {
			for ( var i = 0, l = this.length; i &lt; l; i++ ) {
				jQuery.event.remove( this[i], type, fn ); // 调用remove删除句柄
			}
		}

		return this;
	},
	// ...
};
10.5.4	jQuery.event.remove
.unbind()通过调用jQuery.event.remove，删除之前绑定的一个或多个事件句柄，事实上所有的句柄删除最后都通过jQuery.event.remove实现，其执行过程大致如下：
1. 现调用jQuery._data从缓存$.cache中取出elem对应的所有数组（内部数据，与调用jQuery.data存储的数据稍有不同 
2. 如果未传入types则移除所有事件句柄，如果types是命名空间，则移除所有与命名空间匹配的事件句柄
3. 如果是多个事件，则分割后遍历
4. 如果未指定删除哪个事件句柄，则删除事件类型对应的全部句柄，或者与命名空间匹配的全部句柄 
5. 如果指定了删除某个事件句柄，则删除指定的事件句柄    
6. 所有的事件句柄删除，都直接在事件句柄数组jQuery._data( elem ).events[ type ]上调用splice操作 
7. 最后检查事件句柄数组的长度，如果为0，或为1但要删除，则移除绑定在elem上DOM事件 
8. 最后的最后，如果elem对应的所有事件句柄events都已删除，则从缓存中移走elem的内部数据
9. 在以上的各个过程，都要检查是否有特例需要处理 
看看它的源码分析：
jQuery.event = {
	// ...
	/**
	 * 移除元素elem上的一个或多个或一组事件
	 * pos 指要移除的是第几个types事件，可以减少遍历次数
	 * handler的属性guid唯一标识某个事件对象，移除时通过比较guid是否相等
	 */ 
	remove: function( elem, types, handler, pos ) { // add/remove都是作为jQuery内部接口使用
		// don't do events on text and comment nodes
		// 忽略文本元素Text和注释元素Comment
		if ( elem.nodeType === 3 || elem.nodeType === 8 ) {
			return;
		}

		if ( handler === false ) { // 替换布尔型handler为函数，保证handler始终是一个函数，使得remove接口的使用更加便捷
			handler = returnFalse;
		}

		var ret, type, fn, j, i = 0, all, namespaces, namespace, special, eventType, handleObj, origType,
			elemData = jQuery.hasData( elem ) &amp;&amp; jQuery._data( elem ), // 如果在缓存cache中有数据，则取出，否则elemData为undefine
			// 因为jQuery._data总是返回一个对象，因此要先判断缓存cache中是否有数组
			events = elemData &amp;&amp; elemData.events; // 取出事件句柄数组，用正则表达式可以将多行代码合并为一行，这里可以用if-else或三元表达式代替

		if ( !elemData || !events ) { // 如果未绑定，则忽略本次调用，直接返回
			return;
		}

		// types is actually an event object here
		// 如果types是一个jQuery Event对象，则。。。
		if ( types &amp;&amp; types.type ) {
			handler = types.handler;
			types = types.type;
		}

		// Unbind all events for the element
		// 如果types为false（强制转换类型），则移除所有事件
		// 如果types是字符串，并且以句号开头，则移除types命名空间下的指定事件（type+types）
		if ( !types || typeof types === "string" &amp;&amp; types.charAt(0) === "." ) {
			types = types || "";

			for ( type in events ) { // 遍历events，移除所有已绑定的事件，这里是迭代调用，jQuery的源码很精致，能复用的代码会尽量复用
				jQuery.event.remove( elem, type + types ); // 全部事件，或某一命名空间下的全部事件
			}

			return;
		}

		// Handle multiple events separated by a space
		// jQuery(...).unbind("mouseover mouseout", fn);
		// 同时移除多个事件，事件之间用空格隔开，使得remove接口很灵活
		types = types.split(" ");

		// 个人觉的变量i的定义与使用离得那么远，不是好习惯，像这种局部使用的变量，应该哪里用就在哪里定义
		// 可能作者觉得集中定义显得代码不凌乱吧
		while ( (type = types[ i++ ]) ) { // 有一种循环方式
			origType = type;
			handleObj = null;
			all = type.indexOf(".") &lt; 0; // all在这里表示移除的是type命名空间下的全部事件对象，小于0表示不是以.开头
			// all为true表示是事件，false表示命名空间
			namespaces = [];

			if ( !all ) { // 如果以.开头，即type是命名空间，构建命名空间正则表达式
				// Namespaced event handlers
				namespaces = type.split("."); // 全部命名空间
				type = namespaces.shift(); // 取出第一个作为事件类型，其余的为命名空间

				namespace = new RegExp("(^|\\.)" +
					jQuery.map( namespaces.slice(0).sort(), fcleanup ).join("\\.(?:.*\\.)?") + "(\\.|$)");
				// 这里要动态创建正则，因此用了 new RegExp 的方式
			}

			eventType = events[ type ]; // 取出type对应的事件对象数组

			if ( !eventType ) { // 如果type对应的事件对象数组不存在，则跳过本次循环（既然不存在就不必移除了）
				continue;
			}

			if ( !handler ) { // 没有指定移除哪个事件对象，handler其实是一个带有guid属性的函数，因为通过guid可以找到对应的事件对象，因此这里依然称handler为事件对象
				for ( j = 0; j &lt; eventType.length; j++ ) { // 遍历事件对象数组，这里因为是遍历一个动态的数组，所以没有定义eventType.length变量
					handleObj = eventType[ j ];

					if ( all || namespace.test( handleObj.namespace ) ) { // 如果是事件或命名空间匹配
						jQuery.event.remove( elem, origType, handleObj.handler, j ); // 取出事件对象，迭代调用remove接口
						// handleObj.handler有guid属性，因此迭代调用remove依然可以匹配到对应handleObj，事实上这里也可以改写为传入handleObj
						// 注意最后一个参数j，remove的pos不为null，就不会在其他地方被splice删除，所以下一行才会splice（这个问题的处理太乱了）
						eventType.splice( j--, 1 ); // 如果循环遍历的是一个变化的数组，则可以用这种方式：j++之前先执行j--，保证不会因为数组下标的错误导致某些数组元素遍历不到，秀！
					}
				}
				// 如果未指定删除哪个事件句柄，则删除事件类型对应的全部句柄，或者与命名空间匹配的全部句柄
				// 这里对$.cache的操作，是通过对 eventType = jQuery._data( elem ).events[ type ]的直接操作进行维护，直接操作事件句柄数组
				// 如果是我，可能会再开发一个接口供客户端进行这种微操，其实没必要。
				continue;
			}

			// 到这里，说明指定事件句柄handler
			
			special = jQuery.event.special[ type ] || {}; // 特例

			// 如果没有指定pos，则默认从0开始遍历，这里的pos可以减少遍历次数，提高性能，多么精致的代码
			// 本人喜欢这种极致的代码，更喜欢优雅的代码，更注重代码的可读性，稍微的性能下降可以接受
			for ( j = pos || 0; j &lt; eventType.length; j++ ) {
				handleObj = eventType[ j ];

				if ( handler.guid === handleObj.guid ) { // 比较事件函数的guid和时间对象的guid，===可以避免类型转换，稍微提高性能
					// remove the given handler for the given type
					if ( all || namespace.test( handleObj.namespace ) ) {
						if ( pos == null ) { // 如果没有指定pos，匹配到后就删除
							eventType.splice( j--, 1 ); // j++之前先j--，避免数组变化导致遍历错误
						}

						if ( special.remove ) { // 如果有自定义的remove方法，则调用（似乎只有live有add remove方法）
							special.remove.call( elem, handleObj );
						}
					}
					// 因为guid是全局唯一的，所以匹配到guid对应的事件就可以退出了
					if ( pos != null ) { // 如果pos不为null，说明是要删除指定的事件对象，任务完成，退出
						break;
					}
				}
			}

			// remove generic event handler if no more handlers exist
			// 如果type对应的事件对象数组为空，或者发现只剩一个，则移除绑定在elem上浏览器原生事件
			if ( eventType.length === 0 || pos != null &amp;&amp; eventType.length === 1 ) {
				// 检查special是否有自定义的teardown，优先调用
				// 这一行的巧妙支出在于：
				// 1. special不会为null或undefined，如果没有找到会被赋值为{}，是空设置模式的应用
				// 2. 首先巧妙的判断special.teardown是否存在，如果不存在则认为是普通事件，如果存在则可以调用teardown
				// 3. 在jQuery源码中你看到过没有返回值的函数码？似乎没有，teardown返回false表示失败，还得用普通方式删除
				if ( !special.teardown || special.teardown.call( elem, namespaces ) === false ) { 
					jQuery.removeEvent( elem, type, elemData.handle );
				}

				ret = null; // 这个变量搞笑了，自从定义之后就从来就没用过，明显多余，可以遗留代码里的变量吧
				delete events[ type ]; // 删除类型属性，还是直接对数组句柄数组操作，根本没有什么缓存微操接口
			}
		}

		// Remove the expando if it's no longer used
		// 从jQuery.cache中移除elem的数据，最后检查elemData.events
		if ( jQuery.isEmptyObject( events ) ) {
			var handle = elemData.handle;
			if ( handle ) {
				handle.elem = null; // 置空，删除对HTML元素的引用，避免因垃圾回收机制不起作用导致的浏览器内存泄漏
				// 这是一个非常好的技巧，我们在JavaScript中引用完HTML元素后一定要置空。
			}

			delete elemData.events; // 删除存储事件句柄的对象
			delete elemData.handle; // 删除DOM事件句柄

			if ( jQuery.isEmptyObject( elemData ) ) { // 都删了难道还不是isEmptyObject？有点多余，除非某些浏览器不支持delete，可问题是不支持也得移除数据，还是多余！
				jQuery.removeData( elem, undefined, true ); // 彻底的从缓存中移走elem的内部数据（存储在属性expando上）
			}
		}
	},

	// ...
};
10.6	.live() .die()
10.6.1	如何使用
live 在匹配当前选择器的元素上绑定一个事件处理函数，包括已经存在的和未来添加的，即任何添加的元素只要匹配当前选择器，就会被绑定事件处理函数
.live( eventType, handler )	在匹配当前选择器的元素上绑定一个指定类型的事件处理函数
.live( eventType, eventData, handler )	eventData可以传递数据给事件处理函数
.live( events )	绑定多个事件
.die()	删除之前通过.live()绑定的全部事件句柄
.die( eventType [, handler] )	eventType是字符串事件类型，删除一个或一类之前通过.live()绑定的事件句柄
.die( eventTypes )	eventTypes是Map对象，删除多类事件句柄
10.6.2	调用过程

.live()方法永远不会将事件绑定到匹配的元素上，而是将事件绑定到祖先元素（document或context），由该祖先元素代理子元素的事件。
以 $('.clickme').live('click', function() { … } ) 为例，当在新添加的元素上点击时，执行过程如下：
1. click事件被生成，并传递给&lt;div&gt;，待&lt;div&gt;处理            
2. 因为&lt;div&gt;没有直接绑定click事件，因此事件沿着DOM树进行冒泡传递          
3. 事件冒泡传递直到到达DOM树的根节点，在根节点上绑定了.live()指定的原始事件处理函数（在1.4以后的版本中，.live()绑定事件到上下文context，以提升性能） 
4. 执行.live()指定的事件处理函数 
5. 原始事件处理函数检查event的target属性以确定是否继续执行，检查的方式是 $(event.target).closes
6. 如果匹配，则原始事件处理函数执行，上下位被设置为找到的元素                                                                  
因为第5步的检查是在执行原始事件处理函数之前，因此元素可以在任何时候添加，并且事件可以生效
调用过程：
$('div').live( 'click', function(){ alert(1); } )
jQuery.fn.live → jQuery.event.add → jQuery._data → jQuery.event.special.live.add → jQuery.event.add
$('div').die( 'click', function(){ alert(1); } )
jQuery.fn.die → jQuery.fn.unbind → jQuery.event.remove jQuery._data
调试过程中发现个有趣的现象：在父节点上绑定live事件，而不是具体的时间类型？
 
10.6.3	源码分析
看看.live()/.die()的源码分析：
// 事件类型修正
var liveMap = {
	focus: "focusin",
	blur: "focusout",
	mouseenter: "mouseover",
	mouseleave: "mouseout"
};
// die 移除用live附加的一个或全部事件处理函数
// 对应关系：bind-unbind, live-die, delegate-undelegate
/**
 * live 在匹配当前选择器的元素上绑定一个事件处理函数，包括已经存在的，和未来添加的，即任何添加的元素只要匹配当前选择器就会被绑定事件处理函数
 * .live( eventType, handler ) 在匹配当前选择器的元素上绑定一个指定类型的事件处理函数
 * .live( eventType, eventData, handler ) eventData可以传递给事件处理函数
 * .live( events ) 绑定多个事件
 * 
 * 
 * 参考文档：
 * http://api.jquery.com/live
 * http://www.codesky.net/article/doc/201004/20100417042278.htm
 * http://hi.baidu.com/silveringsea/blog/item/55cd25016ecde30c1c958341.html
 * 
 * 如何使用
 * 示例
 * 局限
 * 修正
 * 
 * live被翻译为鲜活绑定、延迟绑定（更准确些）
 * live通过委派，而不是在匹配元素上直接绑定事件来实现
 * 
 * 官方文档翻译：事件代理
 * .live()方法能对尚未添加到DOM文档中的元素生效。
 * .live()方法永远不会将事件绑定到匹配的元素上，而是将事件绑定到祖先元素（document或context），由该祖先元素代理子元素的事件。	 * 
 * 以 $('.clickme').live('click', function() { … } ) 为例，当在新添加的元素上点击时，执行过程如下：                    
 * 1. click事件被生成，并传递给&lt;div&gt;，待&lt;div&gt;处理
 * 2. 因为&lt;div&gt;没有直接绑定click事件，因此事件沿着DOM树进行冒泡传递
 * 3. 事件冒泡传递直到到达DOM树的根节点，在根节点上绑定了.live()指定的原始事件处理函数（在1.4以后的版本中，.live()绑定事件到上下文context，以提升性能）
 * 4. 执行.live()指定的事件处理函数
 * 5. 原始事件处理函数检查event的target属性以确定是否继续执行，检查的方式是 $(event.target).closest(".clickme")
 * 6. 如果匹配，则原始事件处理函数执行，上下位被设置为找到的元素
 * 
 * 因为第5步的检查是在执行原始事件处理函数之前，因此元素可以在任何时候添加，并且事件可以生效
 * 
 */
jQuery.each(["live", "die"], function( i, name ) {
	jQuery.fn[ name ] = function( types, data, fn, origSelector /* Internal Use Only */ ) {
		var type, i = 0, match, namespaces, preType,
			selector = origSelector || this.selector, // 选择器表达式
			// 很巧妙，如果没有origSelector，那么采用当前jQuery对象的选择器，、
			// 可是，如果origSelector为true，后边的处理对象就变成了以origSelector为选择器的jQuery对象
			context = origSelector ? this : jQuery( this.context ); // 上下文,
			// 这里也是，如果没有origSelector，那么上下文就变成当前jQuery对象的上下文
			// 可是，如果origSelector为true（类型转换），当前jQuery对象就变成上下文了
			// 就是在这里，通过一个内部变量，改变了选择器表达式和上下分，区分开了live/die和delegate/undelegate，用同样的代码实现了两种接口

		// 一次绑定或删除多个事件
		if ( typeof types === "object" &amp;&amp; !types.preventDefault ) { // types不是jQuery事件对象
			for ( var key in types ) { // 迭代复用
				context[ name ]( key, data, types[key], selector );
			}

			return this;
		}

		// 如果是die，移除origSelector匹配元素上的所有通过live绑定的事件
		// 没有指定事件类型 + origSelector + origSelector是CSS选择器 
		if ( name === "die" &amp;&amp; !types &amp;&amp;
					origSelector &amp;&amp; origSelector.charAt(0) === "." ) {

			context.unbind( origSelector ); // 事实上bind/unbind是基础，add/remove/tigger/handle是所有事件的基础

			return this;
		}
		
		// 修正参数（如果data为false或没有传入data参数）
		// 完整：types, data, fn, origSelector
		// types, false, fn, origSelector
		// 或 types, fn, origSelector
		if ( data === false || jQuery.isFunction( data ) ) {
			fn = data || returnFalse;
			data = undefined;
		}

		types = (types || "").split(" "); // 多个事件用空格隔开

		while ( (type = types[ i++ ]) != null ) { // 遍历事件类型数组
			match = rnamespaces.exec( type ); // 取到第一个.后的命名空间 
			namespaces = "";

			if ( match )  { // 如果有命名空间，即事件类型后还有.
				namespaces = match[0]; // .+命名空间
				type = type.replace( rnamespaces, "" ); // 过滤.+命名空间，初学者会尝试用indexOf查找.的位置，然后截取
			}

			if ( type === "hover" ) { // 将hover分解为mouseenter mouseleave，继续遍历
				types.push( "mouseenter" + namespaces, "mouseleave" + namespaces );
				continue;
			}

			preType = type; // 

			if ( liveMap[ type ] ) { // 修正事件名名，修正其实不准确，比如遇到focus，绑定了两个：focus focusin，不会造成两次事件响应么？
				types.push( liveMap[ type ] + namespaces ); // 将修正后的事件类型入队，因为用了while循环，所有不必担心遍历动态数组的问题
				type = type + namespaces; // 再恢复type，包含了命名空间，这不是蛋疼么，把命名空间去掉只为了检测hover和是否需要修正？

			} else {
				type = (liveMap[ type ] || type) + namespaces; // 修正事件名，这里可以直接写成：type + namespaces
				// 这行的逻辑有点问题，已经知道liveMap[ type ]是false了，这个地方的代码有些重复
			}
			/**
			 * 上边的if-else改写为：
			 * if ( liveMap[ type ] ) types.push( liveMap[ type ] + namespaces )
			 * type = type + namespaces
			 */

			// 这里开始live的特殊处理，虽说live/die的逻辑比较接近，再加上delegate/undelegate，复用的粒度小但是很精髓
			// 同时为了减少接口，并没有将公共部分提取出来，总的来说，live/die这段代码出来的还是刚刚好
			if ( name === "live" ) {
				// bind live handler
				for ( var j = 0, l = context.length; j &lt; l; j++ ) {
					// 绑定到上下文，事件类型经过liveConvert后变为 live.type.selector
					// 前边做了那么多铺垫，这行才是关键！
					// add: function( elem, types, handler, data ) {
					// context[j] 如果有origSelector则是当前jQuery对象，如果没有则是当前jQuery对象的上下文
					// live事件的格式比较特殊，应该trigger里会有live的特殊处理，live的处理在特例special里
					jQuery.event.add( context[j], "live." + liveConvert( type, selector ),
						{ data: data, selector: selector, handler: fn, origType: type, origHandler: fn, preType: preType } );
				}

			} else {
				// unbind live handler
				// 删除live绑定的事件句柄
				context.unbind( "live." + liveConvert( type, selector ), fn );
			}
		}

		return this;
	};
});
/**
 * live执行句柄，live绑定的事件调用链：add.eventHandle → handler function liveHandler → _data → handler 
 * @param event
 * @return
 */
function liveHandler( event ) {
	var stop, maxLevel, related, match, handleObj, elem, j, i, l, data, close, namespace, ret,
		elems = [],
		selectors = [],
		events = jQuery._data( this, "events" );

	// Make sure we avoid non-left-click bubbling in Firefox (#3861) and disabled elements in IE (#6911)
	if ( event.liveFired === this || !events || !events.live || event.target.disabled || event.button &amp;&amp; event.type === "click" ) {
		return;
	}

	if ( event.namespace ) {
		namespace = new RegExp("(^|\\.)" + event.namespace.split(".").join("\\.(?:.*\\.)?") + "(\\.|$)");
	}

	event.liveFired = this;

	var live = events.live.slice(0); // 返回一个新的数组，而不改变原来的数组

	for ( j = 0; j &lt; live.length; j++ ) {
		handleObj = live[j];

		if ( handleObj.origType.replace( rnamespaces, "" ) === event.type ) {
			selectors.push( handleObj.selector );

		} else {
			live.splice( j--, 1 );
		}
	}

	match = jQuery( event.target ).closest( selectors, event.currentTarget );

	for ( i = 0, l = match.length; i &lt; l; i++ ) {
		close = match[i];

		for ( j = 0; j &lt; live.length; j++ ) {
			handleObj = live[j];

			if ( close.selector === handleObj.selector &amp;&amp; (!namespace || namespace.test( handleObj.namespace )) &amp;&amp; !close.elem.disabled ) {
				elem = close.elem;
				related = null;

				// Those two events require additional checking
				if ( handleObj.preType === "mouseenter" || handleObj.preType === "mouseleave" ) {
					event.type = handleObj.preType;
					related = jQuery( event.relatedTarget ).closest( handleObj.selector )[0];

					// Make sure not to accidentally match a child element with the same selector
					if ( related &amp;&amp; jQuery.contains( elem, related ) ) {
						related = elem;
					}
				}

				if ( !related || related !== elem ) {
					elems.push({ elem: elem, handleObj: handleObj, level: close.level });
				}
			}
		}
	}

	for ( i = 0, l = elems.length; i &lt; l; i++ ) {
		match = elems[i];

		if ( maxLevel &amp;&amp; match.level &gt; maxLevel ) {
			break;
		}

		event.currentTarget = match.elem;
		event.data = match.handleObj.data;
		event.handleObj = match.handleObj;

		ret = match.handleObj.origHandler.apply( match.elem, arguments );

		if ( ret === false || event.isPropagationStopped() ) {
			maxLevel = match.level;

			if ( ret === false ) {
				stop = false;
			}
			if ( event.isImmediatePropagationStopped() ) {
				break;
			}
		}
	}

	return stop;
}
// 在live事件类型type后增加上selector，作为命名空间
function liveConvert( type, selector ) {
	// . &gt; `
	// 空格 &gt; &amp;
	// 在type后增加上selector，作为命名空间
	return (type &amp;&amp; type !== "*" ? type + "." : "") + selector.replace(rperiod, "`").replace(rspaces, "&amp;"); // 
}
10.7	.deletege() .undelegate()
10.7.1	如何使用
.delegate( selector, eventType, handler )	在匹配选择器表达式selector的元素上，将一个事件句handler柄绑定到一个或多个事件上
无论是现有的还是将来添加的，基于一组特定的根元素（即上下文）
.delegate( selector, eventType, eventData, handler )	Map型对象eventData的属性将被复制到事件句柄handler
.delegate( selector, events )	绑定一个或多个事件句柄
.undelegate()	在当前jQuery对象上，移除所有live事件句柄
.undelegate( selector, eventType, handler )	在当前jQuery对象上，移除live. eventType.selector事件句柄
为当前选择所匹配的所有元素移除一个事件处理程序，现在或将来，基于一组特定的根元素。
.undelegate( selector, events )	在当前jQuery对象上，移除多个live事件句柄，events是Map型对象，key
.undelegate( namespace )	在当前jQuery对象上，移除命名空间匹配的live事件句柄
从接口的含义看，.deletege()/.undelegate()与.live()/.die()的区别在于绑定事件时的上下文不同，上下文即事件绑定到的元素：
.deletege()/.undelegate()	当前jQuery对象
.live()/.die()	当前jQuery对象的上下文，经常是document，也可以是构造jQuery对象时指定的上下文

10.7.2	调用过程
jQuery.fn.delegate → jQuery.fn.live → jQuery.event.add
jQuery.fn.undelegate → jQuery.fn.unbind/die
10.7.3	源码分析
// 事件代理，调用live方法实现
delegate: function( selector, types, data, fn ) {
	// 因为传递了参数selector，live时的上下文变为this，而不是this.context
	return this.live( types, data, fn, selector );
},
// 删除事件代理，调用unbind或die实现
undelegate: function( selector, types, fn ) {
	if ( arguments.length === 0 ) {
		return this.unbind( "live" ); // 在当前jQuery对象上直接unbind，不需要在去查找上下文

	} else {
		// jQuery.fn[ die ] = function( types, data, fn, origSelector /* Internal Use Only */ ) {
		return this.die( types, null, fn, selector ); //　带有选择器字符串，改变了die里的上下文context变量
	}
},
本节小节：
1.	.bind()/.unbind()高级接口的基础，add/remove/tigger/handle是所有的基础，最后才是调用浏览器原生接口
2.	.deletege()/.undelegate()与.live()/.die()的区别在于绑定事件时的父节点不同
后文预告：封装事件对象 便捷接口解析 ready专题
</pre>
&nbsp;
<p>&nbsp;</p>
  </div>

  

  
  
  <iframe src="./[原创] jQuery源码分析-10事件处理-Event-事件绑定与删除-bind unbind+live die+delegat undelegate - nuysoft - ITeye技术网站_files/187.html" scrolling="no" width="468" height="60" frameborder="0"></iframe>
  
  <div id="bottoms" class="clearfix">
    <div id="digg_bottom" class="clearfix"><a href="http://nuysoft.iteye.com/blog/1199674#" onclick="digg(&quot;blogs&quot;, 1199674, false);return false;"><div><strong>3</strong> <br>顶</div></a><a href="http://nuysoft.iteye.com/blog/1199674#" onclick="digg(&quot;blogs&quot;, 1199674, true);return false;"><div><strong>0</strong> <br>踩</div></a></div>
    <div id="share_weibo">分享到：
      <a data-type="sina" href="javascript:;" title="分享到新浪微博"><img src="./[原创] jQuery源码分析-10事件处理-Event-事件绑定与删除-bind unbind+live die+delegat undelegate - nuysoft - ITeye技术网站_files/sina.jpg"></a>
      <a data-type="qq" href="javascript:;" title="分享到腾讯微博"><img src="./[原创] jQuery源码分析-10事件处理-Event-事件绑定与删除-bind unbind+live die+delegat undelegate - nuysoft - ITeye技术网站_files/tec.jpg"></a>
    </div>
  </div>

  <div class="blog_nav">
    <div class="pre_next">
      <a href="http://nuysoft.iteye.com/blog/1199719" class="next" title="[原创] jQuery源码分析-Java工程师应该向jQuery学习的8点建议">[原创] jQuery源码分析-Java工程师应该向 ...</a>
      |
      <a href="http://nuysoft.iteye.com/blog/1198058" class="pre" title="[原创] jQuery源码分析-10事件处理-Event-源码结构">[原创] jQuery源码分析-10事件处理-Event ...</a>
    </div>
  </div>
  <div class="blog_bottom">
    <ul>
      <li>2011-10-18 22:31</li>
      <li>浏览 10950</li>
      <li><a href="http://nuysoft.iteye.com/blog/1199674#comments">评论(6)</a></li>
      
      
        <li><a href="http://nuysoft.iteye.com/admin/link?user_favorite%5Btitle%5D=%5B%E5%8E%9F%E5%88%9B%5D+jQuery%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90-10%E4%BA%8B%E4%BB%B6%E5%A4%84%E7%90%86-Event-%E4%BA%8B%E4%BB%B6%E7%BB%91%E5%AE%9A%E4%B8%8E%E5%88%A0%E9%99%A4-bind%2Funbind%2Blive%2Fdie%2Bdelegat%2Fundelegate&user_favorite%5Burl%5D=http%3A%2F%2Fnuysoft.iteye.com%2Fblog%2F1199674" target="_blank" class="favorite" onclick="$$(&#39;.favorite_form_spinner&#39;)[0].show();new Ajax.Request(&#39;/admin/link/new_xhr?user_favorite%5Btitle%5D=%5B%E5%8E%9F%E5%88%9B%5D+jQuery%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90-10%E4%BA%8B%E4%BB%B6%E5%A4%84%E7%90%86-Event-%E4%BA%8B%E4%BB%B6%E7%BB%91%E5%AE%9A%E4%B8%8E%E5%88%A0%E9%99%A4-bind%2Funbind%2Blive%2Fdie%2Bdelegat%2Fundelegate&amp;user_favorite%5Burl%5D=http%3A%2F%2Fnuysoft.iteye.com%2Fblog%2F1199674&#39;, {method: &#39;get&#39;, onSuccess: function(response){$(document.getElementsByTagName(&#39;body&#39;)[0]).insert({bottom:response.responseText});$$(&#39;.favorite_form_spinner&#39;)[0].hide();}});return false;">收藏</a><img alt="Spinner" class="favorite_form_spinner" src="./[原创] jQuery源码分析-10事件处理-Event-事件绑定与删除-bind unbind+live die+delegat undelegate - nuysoft - ITeye技术网站_files/spinner(1).gif" style="vertical-align:bottom;margin-left:7px;display:none;"></li>
      
      <li>分类:<a href="http://www.iteye.com/blogs/category/web">Web前端</a></li>      
      <li class="last"><a href="http://www.iteye.com/wiki/blog/1199674" target="_blank" class="more">相关推荐</a></li>
    </ul>
  </div>

  <div class="blog_comment">
    <h5>评论</h5>
    <a id="comments" name="comments"></a>
    <div id="bc2235048">
  <div class="comment_title">
    6 楼
    <a href="http://nuysoft.iteye.com/" target="_blank" title="nuysoft">nuysoft</a>
    2011-12-12&nbsp;&nbsp;
    <a href="http://nuysoft.iteye.com/blog/1199674#" onclick="quote_comment(2235048);return false;">引用</a>
    
  </div>
  <div class="comment_content"><div class="quote_title">mvpierce34 写道</div><div class="quote_div">仔细看过楼主之前写的关于jQuery Cache 的内容，思路清晰，注释很清楚，可是看完event，感觉有点乱，尤其是关于jQuery event对象中方法的解释和其中的数据绑定内容。可能是我太浅了。但是我觉得好像有几处写得不是那么严谨....比如elemData中的events和handler对象的描述是否有误.....</div><br>看的很仔细啊，最近有点小忙，稍后会自己检查下你说问题，thx</div>
</div>

<div id="bc2235011">
  <div class="comment_title">
    5 楼
    <a href="http://mvpierce34.iteye.com/" target="_blank" title="mvpierce34">mvpierce34</a>
    2011-12-12&nbsp;&nbsp;
    <a href="http://nuysoft.iteye.com/blog/1199674#" onclick="quote_comment(2235011);return false;">引用</a>
    
  </div>
  <div class="comment_content">仔细看过楼主之前写的关于jQuery Cache 的内容，思路清晰，注释很清楚，可是看完event，感觉有点乱，尤其是关于jQuery event对象中方法的解释和其中的数据绑定内容。可能是我太浅了。但是我觉得好像有几处写得不是那么严谨....比如elemData中的events和handler对象的描述是否有误.....</div>
</div>

<div id="bc2230554">
  <div class="comment_title">
    4 楼
    <a href="http://xiaofei85390656-163-com.iteye.com/" target="_blank" title="晨曦的朝阳">晨曦的朝阳</a>
    2011-11-21&nbsp;&nbsp;
    <a href="http://nuysoft.iteye.com/blog/1199674#" onclick="quote_comment(2230554);return false;">引用</a>
    
  </div>
  <div class="comment_content">事件绑定内容真够多的，可不容易看呀。之前一下子去看ready事件，完全陷进去了，希望看了LZ前边内容后去看下节内容不会像以前一样,LZ继续加油!</div>
</div>

<div id="bc2227950">
  <div class="comment_title">
    3 楼
    <a href="http://nuysoft.iteye.com/" target="_blank" title="nuysoft">nuysoft</a>
    2011-11-09&nbsp;&nbsp;
    <a href="http://nuysoft.iteye.com/blog/1199674#" onclick="quote_comment(2227950);return false;">引用</a>
    
  </div>
  <div class="comment_content"><div class="quote_title">魏祖清 写道</div><div class="quote_div">写的的确好好啊，看了很容易就懂了，不过看到现在，有一个问题不明白就是jquery事件是全部放在$.cache[id][$.expend]中的话，那么浏览器解析器是什么识别这些事件，比如我们单击某个html元素什么懂得触发这些事件</div><br><br>第67行 2.&nbsp; 如果是第一次在DOM元素上绑定该类型事件句柄，在DOM元素上绑定jQuery.event.handle，作为统一的事件响应入口&nbsp; <br><br>jQuery.event.handle，执行句柄，所有的事件，无论是bind、live、delegate，最后都会调用handle来执行事件处理函数，大致执行过程分为三步：<br>1. 封装原始事件对象，生成jQuery.Event对象，修正target、relatedTarget、pageX、pageY、which（键盘按键+鼠标按键）、metaKey属性<br>2. 根据封装后的jQuery.Event.type从$.cache中取出对应事件类型的事件句柄数组<br>3. 执行这个数组 var ret = handleObj.handler.apply( this, args );<br><br>大致思路就是这样，细节可以读读jQuery.event.handle的源码<br><br></div>
</div>

<div id="bc2227854">
  <div class="comment_title">
    2 楼
    <a href="http://weizuqing1986-126-com.iteye.com/" target="_blank" title="魏祖清">魏祖清</a>
    2011-11-09&nbsp;&nbsp;
    <a href="http://nuysoft.iteye.com/blog/1199674#" onclick="quote_comment(2227854);return false;">引用</a>
    
  </div>
  <div class="comment_content">写的的确好好啊，看了很容易就懂了，不过看到现在，有一个问题不明白就是jquery事件是全部放在$.cache[id][$.expend]中的话，那么浏览器解析器是什么识别这些事件，比如我们单击某个html元素什么懂得触发这些事件</div>
</div>

<div id="bc2223313">
  <div class="comment_title">
    1 楼
    <a href="http://robinjiang-126-com.iteye.com/" target="_blank" title="坏小子小滨">坏小子小滨</a>
    2011-10-19&nbsp;&nbsp;
    <a href="http://nuysoft.iteye.com/blog/1199674#" onclick="quote_comment(2223313);return false;">引用</a>
    
  </div>
  <div class="comment_content">持续学习中，感谢楼主</div>
</div>


    
    
  </div>

  <div class="blog_comment">
    <h5>发表评论</h5>
            <form action="./[原创] jQuery源码分析-10事件处理-Event-事件绑定与删除-bind unbind+live die+delegat undelegate - nuysoft - ITeye技术网站_files/[原创] jQuery源码分析-10事件处理-Event-事件绑定与删除-bind unbind+live die+delegat undelegate - nuysoft - ITeye技术网站.html" id="comment_form" method="post" onsubmit="return false;"><div style="margin:0;padding:0;display:inline"><input name="authenticity_token" type="hidden" value="foncspGUjo88KbEH23TBNwmOVJHI8suaVg9RqM0afpk="></div>          


  <input type="hidden" id="editor_bbcode_flag" value="true">



<div id="editor_main"><div id="editor_wrapper" class="clearfix"><div id="bbcode_emotions"><h5>表情图标</h5><img src="./[原创] jQuery源码分析-10事件处理-Event-事件绑定与删除-bind unbind+live die+delegat undelegate - nuysoft - ITeye技术网站_files/icon_biggrin.gif"><img src="./[原创] jQuery源码分析-10事件处理-Event-事件绑定与删除-bind unbind+live die+delegat undelegate - nuysoft - ITeye技术网站_files/icon_smile.gif"><img src="./[原创] jQuery源码分析-10事件处理-Event-事件绑定与删除-bind unbind+live die+delegat undelegate - nuysoft - ITeye技术网站_files/icon_sad.gif"><img src="./[原创] jQuery源码分析-10事件处理-Event-事件绑定与删除-bind unbind+live die+delegat undelegate - nuysoft - ITeye技术网站_files/icon_surprised.gif"><img src="./[原创] jQuery源码分析-10事件处理-Event-事件绑定与删除-bind unbind+live die+delegat undelegate - nuysoft - ITeye技术网站_files/icon_eek.gif"><img src="./[原创] jQuery源码分析-10事件处理-Event-事件绑定与删除-bind unbind+live die+delegat undelegate - nuysoft - ITeye技术网站_files/icon_confused.gif"><img src="./[原创] jQuery源码分析-10事件处理-Event-事件绑定与删除-bind unbind+live die+delegat undelegate - nuysoft - ITeye技术网站_files/icon_cool.gif"><img src="./[原创] jQuery源码分析-10事件处理-Event-事件绑定与删除-bind unbind+live die+delegat undelegate - nuysoft - ITeye技术网站_files/icon_lol.gif"><img src="./[原创] jQuery源码分析-10事件处理-Event-事件绑定与删除-bind unbind+live die+delegat undelegate - nuysoft - ITeye技术网站_files/icon_mad.gif"><img src="./[原创] jQuery源码分析-10事件处理-Event-事件绑定与删除-bind unbind+live die+delegat undelegate - nuysoft - ITeye技术网站_files/icon_razz.gif"><img src="./[原创] jQuery源码分析-10事件处理-Event-事件绑定与删除-bind unbind+live die+delegat undelegate - nuysoft - ITeye技术网站_files/icon_redface.gif"><img src="./[原创] jQuery源码分析-10事件处理-Event-事件绑定与删除-bind unbind+live die+delegat undelegate - nuysoft - ITeye技术网站_files/icon_cry.gif"><img src="./[原创] jQuery源码分析-10事件处理-Event-事件绑定与删除-bind unbind+live die+delegat undelegate - nuysoft - ITeye技术网站_files/icon_evil.gif"><img src="./[原创] jQuery源码分析-10事件处理-Event-事件绑定与删除-bind unbind+live die+delegat undelegate - nuysoft - ITeye技术网站_files/icon_twisted.gif"><img src="./[原创] jQuery源码分析-10事件处理-Event-事件绑定与删除-bind unbind+live die+delegat undelegate - nuysoft - ITeye技术网站_files/icon_rolleyes.gif"><img src="./[原创] jQuery源码分析-10事件处理-Event-事件绑定与删除-bind unbind+live die+delegat undelegate - nuysoft - ITeye技术网站_files/icon_wink.gif"><img src="./[原创] jQuery源码分析-10事件处理-Event-事件绑定与删除-bind unbind+live die+delegat undelegate - nuysoft - ITeye技术网站_files/icon_exclaim.gif"><img src="./[原创] jQuery源码分析-10事件处理-Event-事件绑定与删除-bind unbind+live die+delegat undelegate - nuysoft - ITeye技术网站_files/icon_question.gif"><img src="./[原创] jQuery源码分析-10事件处理-Event-事件绑定与删除-bind unbind+live die+delegat undelegate - nuysoft - ITeye技术网站_files/icon_idea.gif"><img src="./[原创] jQuery源码分析-10事件处理-Event-事件绑定与删除-bind unbind+live die+delegat undelegate - nuysoft - ITeye技术网站_files/icon_arrow.gif"></div><div id="bbcode_controllers"><div id="bbcode_toolbar"><input type="button" value="B" id="button_bold"><input type="button" value="I" id="button_italic"><input type="button" value="U" id="button_underline"><input type="button" value="Quote"><input type="button" value="Code"><input type="button" value="List"><input type="button" value="Img"><input type="button" value="URL"><input type="button" value="Flash"><input type="button" value="Table"><br>字体颜色: <select id="select_color"><option value="black" style="color: black;">标准</option><option value="darkred" style="color: darkred;">深红</option><option value="red" style="color: red;">红色</option><option value="orange" style="color: orange;">橙色</option><option value="brown" style="color: brown;">棕色</option><option value="yellow" style="color: yellow;">黄色</option><option value="green" style="color: green;">绿色</option><option value="olive" style="color: olive;">橄榄</option><option value="cyan" style="color: cyan;">青色</option><option value="blue" style="color: blue;">蓝色</option><option value="darkblue" style="color: darkblue;">深蓝</option><option value="indigo" style="color: indigo;">靛蓝</option><option value="violet" style="color: violet;">紫色</option><option value="gray" style="color: gray;">灰色</option><option value="white" style="color: white;">白色</option><option value="black" style="color: black;">黑色</option></select>&nbsp;字体大小: <select id="select_font"><option value="0">标准</option><option value="xx-small">1 (xx-small)</option><option value="x-small">2 (x-small)</option><option value="small">3 (small)</option><option value="medium">4 (medium)</option><option value="large">5 (large)</option><option value="x-large">6 (x-large)</option><option value="xx-large">7 (xx-large)</option></select>&nbsp;对齐: <select id="select_align"><option value="0">标准</option><option value="left">居左</option><option value="center">居中</option><option value="right">居右</option></select></div><div id="bbcode_tooltip">提示：选择您需要装饰的文字, 按上列按钮即可添加上相应的标签</div><textarea class="validate-richeditor bad-words min-length-5" cols="40" id="editor_body" name="comment[body]" rows="20" style="width: 500px; height: 350px;"></textarea></div></div></div>


<script type="text/javascript">
  var editor = new Control.TextArea.Editor("editor_body", "bbcode", false);
</script>

          <p style="text-align:right;margin-right:30px;">(快捷键 Alt+S / Ctrl+Enter) <input class="submit" id="quick_reply_button" name="commit" type="submit" value="提交"></p>
       </form>
        <script type="text/javascript">
          new HotKey("s",function() {$('quick_reply_button').click();},{altKey: true, ctrlKey: false});
          new HotKey(new Number(13),function() {$('quick_reply_button').click();},{altKey: false, ctrlKey: true});

          new Validation("comment_form", {immediate: false, onFormValidate: function(result, form){
            if(result) {
              new Ajax.Request('/blog/create_comment/1199674', {
                onFailure:function(response){
                  $('comments').insert({after:response.responseText})
                  form.spinner.hide();
                  Element.scrollTo($('comments'));
                },
                onSuccess:function(response){
                  Element.scrollTo($('comments'));
                  var new_comment = new Element('div', {}).update(response.responseText).firstChild;
                  var comment_id = new_comment.readAttribute('id');

                  $('comments').insert({after:response.responseText});
                  $('editor_body').value = "";

                  var css_rules = '#' + comment_id + ' pre';
                  highlightNewAddContent(css_rules);
                  processComment();
                  code_favorites_init(css_rules);
                  
                  form.spinner.hide();
                }, parameters:Form.serialize(form)
              });
            }
        }});
        </script>
        </div>
</div>


<script type="text/javascript">
  dp.SyntaxHighlighter.HighlightAll('code', true, true);

  $$('#main .blog_content pre[name=code]').each(function(pre, index){ // blog content
    var post_id = 1199674;
    var location = window.location;
    source_url = location.protocol + "//" + location.host + location.pathname + location.search;
    pre.writeAttribute('codeable_id', post_id);
    pre.writeAttribute('codeable_type', "Blog");
    pre.writeAttribute('source_url', source_url);
    pre.writeAttribute('pre_index', index);
    pre.writeAttribute('title', '[原创] jQuery源码分析-10事件处理-Event-事件绑定与删除-bind/unbind+live/die+delegat/undelegate');
  });

  fix_image_size($$('div.blog_content img'), 700);

  function processComment() {
    $$('#main .blog_comment > div').each(function(comment){// comment
      var post_id = comment.id.substr(2);
      $$("#"+comment.id+" pre[name=code]").each(function(pre, index){
        var location = window.location;
        source_url = location.protocol + "//" + location.host + location.pathname + location.search;
        source_url += "#" + comment.id;
        pre.writeAttribute('codeable_id', post_id);
        pre.writeAttribute('codeable_type', "BlogComment");
        pre.writeAttribute('source_url', source_url);
        pre.writeAttribute('pre_index', index);
        pre.writeAttribute('title', '[原创] jQuery源码分析-10事件处理-Event-事件绑定与删除-bind/unbind+live/die+delegat/undelegate');
      });
    });
  }

  function quote_comment(id) {
    new Ajax.Request('/editor/quote', {
      parameters: {'id':id, 'type':'BlogComment'},
      onSuccess:function(response){editor.bbcode_editor.textarea.insertAfterSelection(response.responseText);
        Element.scrollTo(editor.bbcode_editor.textarea.element);}
    });
  }

  code_favorites_init();
  processComment();
  new WeiboShare({share_buttons: $('share_weibo'), img_scope: $('blog_content')});
</script>




        </div>

        <div id="local">
          <div class="local_top"></div>
          <div id="blog_owner">
  <div id="blog_owner_logo"><a href="http://nuysoft.iteye.com/"><img alt="nuysoft的博客" class="logo" src="./[原创] jQuery源码分析-10事件处理-Event-事件绑定与删除-bind unbind+live die+delegat undelegate - nuysoft - ITeye技术网站_files/d6b532d5-b30d-3a42-8336-611f8b83dfd6.jpg" title="nuysoft的博客: nuysoft" width=""></a></div>
  <div id="blog_owner_name">nuysoft</div>
</div>

          <div id="blog_actions">
            <ul>
              <li>浏览: 349120 次</li>
              <li>性别: <img alt="Icon_minigender_1" src="./[原创] jQuery源码分析-10事件处理-Event-事件绑定与删除-bind unbind+live die+delegat undelegate - nuysoft - ITeye技术网站_files/icon_minigender_1.gif" title="男"></li>
              <li>来自: 北京</li>
              <li><img src="./[原创] jQuery源码分析-10事件处理-Event-事件绑定与删除-bind unbind+live die+delegat undelegate - nuysoft - ITeye技术网站_files/offline.gif"></li>
              
                <li>
                  <a href="http://my.iteye.com/messages/new?message%5Breceiver_name%5D=nuysoft" class="message" title="发送站内短信">发短消息</a>
                  
                    <a href="http://my.iteye.com/feed/772224" class="subscription" onclick="if (confirm(&#39;你确定要取消这个关注？&#39;)) { var f = document.createElement(&#39;form&#39;); f.style.display = &#39;none&#39;; this.parentNode.appendChild(f); f.method = &#39;POST&#39;; f.action = this.href;var m = document.createElement(&#39;input&#39;); m.setAttribute(&#39;type&#39;, &#39;hidden&#39;); m.setAttribute(&#39;name&#39;, &#39;_method&#39;); m.setAttribute(&#39;value&#39;, &#39;delete&#39;); f.appendChild(m);var s = document.createElement(&#39;input&#39;); s.setAttribute(&#39;type&#39;, &#39;hidden&#39;); s.setAttribute(&#39;name&#39;, &#39;authenticity_token&#39;); s.setAttribute(&#39;value&#39;, &#39;foncspGUjo88KbEH23TBNwmOVJHI8suaVg9RqM0afpk=&#39;); f.appendChild(s);f.submit(); };return false;">取消关注</a>
                  
                </li>
              
            </ul>
          </div>
          <div id="user_visits" class="clearfix">
            <h5>最近访客 <span style="font-weight:normal;font-size:12px;padding-left:30px;"><a href="http://nuysoft.iteye.com/blog/user_visits">更多访客&gt;&gt;</a></span></h5>
            
              <div class="user_visit">
                <div class="logo"><a href="http://hhy5277.iteye.com/" target="_blank"><img alt="hhy5277的博客" class="logo" src="./[原创] jQuery源码分析-10事件处理-Event-事件绑定与删除-bind unbind+live die+delegat undelegate - nuysoft - ITeye技术网站_files/user-logo-thumb.gif" title="hhy5277的博客: " width="48px"></a></div>
                <div class="left"><a href="http://hhy5277.iteye.com/" target="_blank" title="hhy5277">hhy5277</a></div>
              </div>
            
              <div class="user_visit">
                <div class="logo"><a href="http://dylinshi126.iteye.com/" target="_blank"><img alt="dylinshi126的博客" class="logo" src="./[原创] jQuery源码分析-10事件处理-Event-事件绑定与删除-bind unbind+live die+delegat undelegate - nuysoft - ITeye技术网站_files/user-logo-thumb.gif" title="dylinshi126的博客: " width="48px"></a></div>
                <div class="left"><a href="http://dylinshi126.iteye.com/" target="_blank" title="dylinshi126">dylinshi126</a></div>
              </div>
            
              <div class="user_visit">
                <div class="logo"><a href="http://hxlhuangxiaolong-yahoo-cn.iteye.com/" target="_blank"><img alt="诚信天下hxl的博客" class="logo" src="./[原创] jQuery源码分析-10事件处理-Event-事件绑定与删除-bind unbind+live die+delegat undelegate - nuysoft - ITeye技术网站_files/f7552907-3258-3880-858e-5631bb20d923-thumb.jpg" title="诚信天下hxl的博客: " width="48px"></a></div>
                <div class="left"><a href="http://hxlhuangxiaolong-yahoo-cn.iteye.com/" target="_blank" title="诚信天下hxl">诚信天下hxl</a></div>
              </div>
            
              <div class="user_visit">
                <div class="logo"><a href="http://wyxzhsh.iteye.com/" target="_blank"><img alt="wyxzhsh的博客" class="logo" src="./[原创] jQuery源码分析-10事件处理-Event-事件绑定与删除-bind unbind+live die+delegat undelegate - nuysoft - ITeye技术网站_files/531e8f8d-4594-33e3-aacb-68bcbca9fa06-thumb.jpg" title="wyxzhsh的博客: " width="48px"></a></div>
                <div class="left"><a href="http://wyxzhsh.iteye.com/" target="_blank" title="wyxzhsh">wyxzhsh</a></div>
              </div>
            
          </div>

          
            <div>
              <h5>博客专栏</h5>
              

  
  <dl class="series" style="padding-bottom:5px;">
    <dt>
      <a href="http://www.iteye.com/blogs/subjects/jquery" target="_blank"><img alt="91bd5d30-bd1e-3b00-9210-87db1cca0016" src="./[原创] jQuery源码分析-10事件处理-Event-事件绑定与删除-bind unbind+live die+delegat undelegate - nuysoft - ITeye技术网站_files/91bd5d30-bd1e-3b00-9210-87db1cca0016.png"></a>
    </dt>
    <dd>
    <a href="http://www.iteye.com/blogs/subjects/jquery" target="_blank" title="jQuery技术内幕">jQuery技术内幕</a><br>
      <span class="visited">浏览量：136964</span>
    </dd>
  </dl>
  


            </div>
          

                      <div id="blog_menu">
              <h5>文章分类</h5>
              <ul>
                <li><a href="http://nuysoft.iteye.com/">全部博客 (36)</a></li>
                
                  <li><a href="http://nuysoft.iteye.com/category/99537">天天向上 (10)</a></li>
                
                  <li><a href="http://nuysoft.iteye.com/category/116143">项目管理 (2)</a></li>
                
                  <li><a href="http://nuysoft.iteye.com/category/116144">Java (1)</a></li>
                
                  <li><a href="http://nuysoft.iteye.com/category/136360">读书笔记 (0)</a></li>
                
                  <li><a href="http://nuysoft.iteye.com/category/140986">jQuery (24)</a></li>
                
              </ul>
            </div>
            <div id="month_blogs">
              <h5>社区版块</h5>
              <ul>
                <li><a href="http://nuysoft.iteye.com/blog/news">我的资讯</a> (0)</li>
                <li>
                  <a href="http://nuysoft.iteye.com/blog/post">我的论坛</a> (1)
                </li>
                <li><a href="http://nuysoft.iteye.com/blog/answered_problems">我的问答</a> (0)</li>
              </ul>
            </div>
            <div id="month_blogs">
              <h5>存档分类</h5>
              <ul>
                
                  <li><a href="http://nuysoft.iteye.com/blog/monthblog/2011-11">2011-11</a> (3)</li>
                
                  <li><a href="http://nuysoft.iteye.com/blog/monthblog/2011-10">2011-10</a> (11)</li>
                
                  <li><a href="http://nuysoft.iteye.com/blog/monthblog/2011-09">2011-09</a> (14)</li>
                
                <li><a href="http://nuysoft.iteye.com/blog/monthblog_more">更多存档...</a></li>
              </ul>
            </div>
            
            

            <div id="guest_books">
              <h5>最新评论</h5>
              <ul>
                
                <li>
                  <a href="http://niuqiang2008.iteye.com/" target="_blank" title="niuqiang2008">niuqiang2008</a>： 
                   学习学习&nbsp;&nbsp;&nbsp;&nbsp;<br>
                  <a href="http://nuysoft.iteye.com/blog/1256338#bc2362322">[原创] jQuery源码分析-04 选择器-Sizzle-工作原理</a>
                </li>
                
                <li>
                  <a href="http://liuweihug.iteye.com/" target="_blank" title="liuweihug">liuweihug</a>： 
                  jquery 解析正则表达式及常见的Regex规则和表达式 - ...<br>
                  <a href="http://nuysoft.iteye.com/blog/1217898#bc2356306">[原创] jQuery源码分析-02正则表达式-RegExp-常用正则表达式</a>
                </li>
                
                <li>
                  <a href="http://liang8768.iteye.com/" target="_blank" title="liang8768">liang8768</a>： 
                  mark!!!<br>
                  <a href="http://nuysoft.iteye.com/blog/1177459#bc2352219">[原创] jQuery源码分析-00前言开光</a>
                </li>
                
                <li>
                  <a href="http://levinqdl.iteye.com/" target="_blank" title="levinqdl">levinqdl</a>： 
                  viewsoft 写道“// fail”均调用不到fn tes ...<br>
                  <a href="http://nuysoft.iteye.com/blog/1177451#bc2351119">[原创] jQuery源码分析-01总体架构</a>
                </li>
                
                <li>
                  <a href="http://perwarz.iteye.com/" target="_blank" title="perwarz">perwarz</a>： 
                  为什么$("")返回的会是一个数组？搞了好 ...<br>
                  <a href="http://nuysoft.iteye.com/blog/1177451#bc2337964">[原创] jQuery源码分析-01总体架构</a>
                </li>
                
              </ul>
            </div>

            <div class="local_bottom"></div>
          
        </div>
      </div>

      <div id="footer" class="clearfix">
        <div id="copyright">
          <hr>
          声明：ITeye文章版权属于作者，受法律保护。没有作者书面许可不得转载。若作者同意转载，必须以超链接形式标明文章原始出处和作者。<br>
          © 2003-2015 ITeye.com.   All rights reserved.  [ 京ICP证110151号  京公网安备110105010620 ]
        </div>
      </div>
    </div>
    <script type="text/javascript">
  document.write("<img src='http://stat.iteye.com/?url="+ encodeURIComponent(document.location.href) + "&referrer=" + encodeURIComponent(document.referrer) + "&user_id=317070' width='0' height='0' />");
</script><img src="./[原创] jQuery源码分析-10事件处理-Event-事件绑定与删除-bind unbind+live die+delegat undelegate - nuysoft - ITeye技术网站_files/saved_resource" width="0" height="0">

<script src="./[原创] jQuery源码分析-10事件处理-Event-事件绑定与删除-bind unbind+live die+delegat undelegate - nuysoft - ITeye技术网站_files/tracking.js" type="text/javascript"></script>

    
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-20906367-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
      
    
  

</body></html>